/**
 * <%= pkg.description %> - version: <%= pkg.version %> - license: MPL 2.0/GPL 2.0+/LGPL 2.1+ - Follow me on Twitter! @ekameleon - version: 1.0.0
 */(function(e,t){'object'==typeof exports&&'undefined'!=typeof module?t(exports):'function'==typeof define&&define.amd?define(['exports'],t):t(e.application={})})(this,function(e){'use strict';function t(e='',t='',n=''){if(!kt)try{if(navigator&&navigator.userAgent&&-1<navigator.userAgent.toLowerCase().indexOf('chrome')){const a=[`\n %c %c %c ${e} ${t} %c %c ${n} %c %c\n\n`,'background: #ff0000; padding:5px 0;','background: #AA0000; padding:5px 0;','color: #F7FF3C; background: #000000; padding:5px 0;','background: #AA0000; padding:5px 0;','color: #F7FF3C; background: #ff0000; padding:5px 0;','background: #AA0000; padding:5px 0;','background: #ff0000; padding:5px 0;'];window.console.log.apply(console,a)}else window.console&&window.console.log(`${e} ${t} - ${n}`)}catch(e){}}function n(){}function a(){}function r(e,t=0,n=!1){this.auto=n,this.receiver=e,this.priority=t}function i(){Object.defineProperties(this,{proxy:{value:null,configurable:!0,writable:!0},receivers:{writable:!0,value:[]}})}function l(){Object.defineProperties(this,{fullScreen:{value:new i},orientationChange:{value:new i},resize:{value:new i},_allowFullScreen:{writable:!0,value:!1},_aspectRatio:{writable:!0,value:Mt.ANY},_displayState:{writable:!0,value:zt.NORMAL},_fullScreenExit:{writable:!0,value:null},_fullScreenHeight:{writable:!0,value:null},_fullScreenInteractive:{writable:!0,value:!1},_fullScreenRequest:{writable:!0,value:null},_fullScreenWidth:{writable:!0,value:null},_height:{writable:!0,value:null},_launchedFromHomeScreen:{writable:!0,value:!1},_orientation:{writable:!0,value:jt.UNKNOWN},_pixelRatio:{writable:!0,value:1},_supportedOrientations:{writable:!0,value:null},_supportsOrientationChange:{writable:!0,value:!1},_width:{writable:!0,value:null}}),this.__initialize__()}function o(e,t,n=!0){for(var a in(null===n||void 0===n)&&(n=!0),(null===t||void 0===t)&&(t={}),t)(!(a in e)||n)&&(e[a]=t[a]);return e}function u(e){return!!e&&(e instanceof s||'id'in e)}function s(){Object.defineProperties(this,{id:{value:null,writable:!0}})}function d(e=null){Object.defineProperties(this,{_constructorName:{writable:!0,value:null}}),s.call(this),e&&this.setTo(e)}function c(e=null){Object.defineProperties(this,{owner:{value:null,writable:!0},view:{value:null,writable:!0}}),d.call(this,e)}function p(e,t,n=0,a=-1){if(!(e instanceof String||'string'==typeof e)||''===e)return-1;if(!(t instanceof Array))return-1;n=0<n?0:n,a=0>a?-1:a;let r,i=e.length;r=0>a||a>i-n?i-1:n+a-1;for(let l=n;l<=r;l++)if(-1<t.indexOf(e[l]))return l;return-1}function _(){}function g(e,t){Object.defineProperties(this,{key:{value:e,writable:!0},value:{value:t,writable:!0}})}function v(){}function f(){}function b(e){if(!(e instanceof Array))throw new ReferenceError(this+' constructor failed, the passed-in Array argument not must be \'null\'.');Object.defineProperties(this,{_a:{value:e,writable:!0},_k:{value:-1,writable:!0}})}function m(e){if(e&&e instanceof _)Object.defineProperties(this,{_m:{value:e,writable:!0},_i:{value:new b(e.keys()),writable:!0},_k:{value:null,writable:!0}});else throw new ReferenceError(this+' constructor failed, the passed-in KeyValuePair argument not must be \'null\'.')}function h(e=null,t=null){if(Object.defineProperties(this,{_keys:{value:[],writable:!0},_values:{value:[],writable:!0}}),null===e||null===t)this._keys=[],this._values=[];else{let n=e instanceof Array&&t instanceof Array&&0<e.length&&e.length===t.length;this._keys=n?[].concat(e):[],this._values=n?[].concat(t):[]}}function y(e,t,n){this.name='InvalidChannelError',this.message=e||'invalid channel error',this.fileName=t,this.lineNumber=n,this.stack=new Error().stack}function w(e,t){Object.defineProperties(this,{_name:{value:'string'==typeof t||t instanceof String?t:'',enumerable:!1,writable:!0,configurable:!0},_value:{value:isNaN(e)?0:e,enumerable:!1,writable:!0,configurable:!0}})}function E(e,t){w.call(this,e,t)}function A(e,t,n){this.channel=n,this.level=t instanceof E?t:E.ALL,this.message=e}function S(e){i.call(this),Object.defineProperties(this,{_entry:{value:new A(null,null,e),writable:!0}})}function R(e,...t){if(null===e||!(e instanceof String||'string'==typeof e))return'';if(0<t.length){t=[].concat.apply([],t);let a=t.length;for(var n=0;n<a;n++)e=e.replace(new RegExp('\\{'+n+'\\}','g'),t[n])}return e}function L(e,t,n){this.name='InvalidFilterError',this.message=e||'invalid filter error',this.fileName=t,this.lineNumber=n,this.stack=new Error().stack}function T(){Object.defineProperties(this,{_count:{value:0,writable:!0},_factory:{value:null,writable:!0},_filters:{value:['*'],writable:!0},_level:{value:E.ALL,writable:!0}}),this.factory=Kt}function O(){Object.defineProperties(this,{_loggers:{value:new h,writable:!0},_targetLevel:{value:E.NONE,writable:!0},_targets:{value:[],writable:!0}})}function I(e=null){if(T.call(this),Object.defineProperties(this,{_lineNumber:{value:1,writable:!0}}),this.includeChannel=!1,this.includeDate=!1,this.includeLevel=!1,this.includeLines=!1,this.includeMilliseconds=!1,this.includeTime=!1,this.separator=' ',e)for(var t in e)this.hasOwnProperty(t)&&(this[t]=e[t])}function C(e=null){I.call(this,e)}function N(e){return'string'==typeof e||e instanceof String}function F(e,t=!1,n=!1){Object.defineProperties(this,{_bubbles:{writable:!0,value:!!t},_cancelable:{writable:!0,value:!!n},_currentTarget:{writable:!0,value:null},_defaultPrevented:{writable:!0,value:!1},_eventPhase:{writable:!0,value:0},_propagationStopped:{writable:!0,value:!1},_immediatePropagationStopped:{writable:!0,value:!1},_target:{writable:!0,value:null},_type:{writable:!0,value:e instanceof String||'string'==typeof e?e:null}}),d.call(this)}function P(){}function x(){}function D(e){Object.defineProperties(this,{target:{writable:!0,value:e instanceof x?e:null},_captureListeners:{value:{}},_listeners:{value:{}}})}function k(e=null){if(D.call(this),Object.defineProperties(this,{_id:{value:null,writable:!0},__isStage:{value:!1,writable:!0},_parent:{value:null,writable:!0}}),e)for(let t in e)t in this&&(this[t]=e[t])}function M(e=null){Object.defineProperties(this,{_broadcastListeners:{value:[]},_children:{value:[]}}),k.call(this,e)}function z(e=null,t=null){let n=null;Xt(t)?n=t:N(t)&&(n=document.createElement(t)),Object.defineProperties(this,{_element:{value:n,writable:!0}}),M.call(this,e)}function j(){z.call(this,null,'img')}function U(e=null){z.call(this,e,'a-assets'),this.element&&(this.element.addEventListener('error',this._error.bind(this)),this.element.addEventListener('loaded',this._loaded.bind(this)))}function G(e=null,t='a-entity'){Object.defineProperties(this,{addedToStage:{value:new i},removedFromStage:{value:new i},_addedToStage:{writable:!0,value:null},_onStage:{writable:!0,value:!1},_position:{writable:!1,value:{x:0,y:0,z:0}},_raycast:{writable:!1,value:'button'},_removedFromStage:{writable:!0,value:null},_rotation:{writable:!1,value:{x:0,y:0,z:0}},_root:{writable:!0,value:null},_scale:{writable:!1,value:{x:1,y:1,z:1}}}),z.call(this,e,t),this._addedToStage=this.__addedToStage.bind(this),this._removedFromStage=this.__removedFromStage.bind(this),this.addEventListener(F.ADDED_TO_STAGE,this._addedToStage),this.addEventListener(F.REMOVED_FROM_STAGE,this._removedFromStage)}function Y(e=null){Object.defineProperties(this,{finishIt:{value:new i},startIt:{value:new i},_ended:{writable:!0,value:null},_playing:{writable:!0,value:!1},_requestPlay:{writable:!0,value:!1},_running:{writable:!0,value:!1}}),G.call(this,e,'a-sound')}function H(){}function V(){Object.defineProperties(this,{finishIt:{value:new i},startIt:{value:new i},__lock__:{writable:!0,value:!1},_phase:{writable:!0,value:Qt.INACTIVE},_running:{writable:!0,value:!1}})}function B(){V.call(this),Object.defineProperties(this,{changeIt:{value:new i},clearIt:{value:new i},errorIt:{value:new i},infoIt:{value:new i},looping:{value:!1,writable:!0},loopIt:{value:new i},pauseIt:{value:new i},progressIt:{value:new i},resumeIt:{value:new i},stopIt:{value:new i},throwError:{value:!1,writable:!0},timeoutIt:{value:new i}})}function K(e=0,t=0,n=!1){B.call(this),Object.defineProperties(this,{_count:{value:0,writable:!0},_delay:{value:0<e?e:0,writable:!0},_itv:{value:0,writable:!0},_repeatCount:{value:0<t?t:0,writable:!0},_stopped:{value:!1,writable:!0},_useSeconds:{value:!!n,writable:!0}})}function q(e=null){Object.defineProperties(this,{click:{value:new i},down:{value:new i},out:{value:new i},over:{value:new i},up:{value:new i},_enabled:{writable:!0,value:!0},_intersection:{writable:!0,value:null},_intersectionCleared:{writable:!0,value:null},_launchedRaycaster:{writable:!0,value:!1},_objects:{writable:!0,value:'button'},_mouseDown:{writable:!0,value:null},_mouseUp:{writable:!0,value:null},_notifyClick:{writable:!0,value:null},_target:{writable:!0,value:null},_timer:{value:new K(0,1)}}),G.call(this,e),this.objects=this._objects}function W(e=null,t='a-entity'){G.call(this,e,t)}function X(e=null){W.call(this,e,'a-circle')}function Z(){Object.defineProperties(this,{cursor:{writable:!0,value:null},sound:{writable:!0,value:null},tweenOver:{writable:!0,value:null},tweenOut:{writable:!0,value:null},_onFinish:{writable:!0,value:null}}),n.call(this)}function $(){Object.defineProperties(this,{tweenOver:{writable:!0,value:null},tweenOut:{writable:!0,value:null}}),n.call(this)}function J(e){this.motion=e instanceof te?e:null}function Q(e=null){B.call(this),Object.defineProperties(this,{_id:{value:e,writable:!0}})}function ee(){B.call(this),Object.defineProperties(this,{deltaTime:{value:1,writable:!0},elapsedMS:{value:1/tn,writable:!0},fps:{get:function(){return 1e3/this.elapsedMS}},minFPS:{get:function(){return 1e3/this._maxElapsedMS},set:function(e){this._maxElapsedMS=1/Rt(Lt(0,e)/1e3,tn)}},lastTime:{value:0,writable:!0},speed:{value:1,writable:!0},_requestID:{value:null,writable:!0},_maxElapsedMS:{value:100,writable:!0},_stopped:{value:!1,writable:!0}})}function te(e=null){Q.call(this,e),Object.defineProperties(this,{useSeconds:{writable:!0,value:!1},_duration:{writable:!0,value:0},_fps:{writable:!0,value:NaN},_nextFrame:{value:new J(this)},_prevTime:{writable:!0,value:NaN},_startTime:{writable:!0,value:NaN},_stopped:{writable:!0,value:!1},_target:{writable:!0,value:null},_time:{writable:!0,value:NaN},_timer:{writable:!0,value:null}}),this.setTimer(new ee)}function ne(e=null,t=0,n=!1,a=!1,r=null){te.call(this,r),Object.defineProperties(this,{position:{writable:!0,value:0},_change:{writable:!0,value:1},_easing:{writable:!0,value:e instanceof Function?e:en}}),this.duration=t,this.useSeconds=n,a&&this.run()}function ae(e){if(ne.call(this),this.position=null,Object.defineProperties(this,{_begin:{writable:!0,value:null},_changed:{writable:!0,value:!1},_easings:{writable:!0,value:null},_from:{writable:!0,value:null},_target:{writable:!0,value:null},_to:{writable:!0,value:null}}),e){for(var t in e)t in this&&(this[t]=e[t]);'auto'in e&&!0===e.auto&&this.run()}}function re(){z.call(this,null,'div')}function ie(e=null){G.call(this,e,'a-scene')}function le(e=null,t=null){z.call(this,e,t),Object.defineProperties(this,{activated:{value:new i},desactivated:{value:new i},fullScreen:{value:new i},orientationChange:{value:new i},resize:{value:new i},_allowFullScreen:{writable:!0,value:!1},_aspectRatio:{writable:!0,value:Mt.ANY},_displayState:{writable:!0,value:zt.NORMAL},_fullScreenChange:{writable:!0,value:null},_fullScreenElement:{writable:!0,value:null},_fullScreenExit:{writable:!0,value:null},_fullScreenHeight:{writable:!0,value:null},_fullScreenInteractive:{writable:!0,value:!1},_fullScreenRequest:{writable:!0,value:null},_fullScreenWidth:{writable:!0,value:null},_height:{writable:!0,value:null},__isStage:{value:!0},_launchedFromHomeScreen:{writable:!0,value:!1},_orientation:{writable:!0,value:jt.UNKNOWN},_pixelRatio:{writable:!0,value:1},_supportedOrientations:{writable:!0,value:null},_supportsOrientationChange:{writable:!0,value:!1},_width:{writable:!0,value:null}}),this.__initialize__()}function oe(e=null){le.call(this,e,document.body||document.createElement('body'))}function ue(e=null){W.call(this,e,'a-sky')}function se(e,t=0,n=!1){Object.defineProperties(this,{action:{writable:!0,value:e},auto:{writable:!0,value:!0===n},priority:{writable:!0,value:0<t?Math.ceil(t):0}})}function de(e='normal',t=null){B.call(this),Object.defineProperties(this,{verbose:{value:!1,writable:!0},_actions:{value:[],writable:!0},_next:{value:null,writable:!0,configurable:!0},_stopped:{value:!1,writable:!0},_mode:{value:de.NORMAL,writable:!0}}),('string'==typeof e||e instanceof String)&&(this.mode=e),t&&t instanceof Array&&0<t.length&&t.forEach((e)=>{e instanceof V&&this.add(e)})}function ce(e=null){this.chain=e}function pe(e=!1,t=0,n='normal',a=null){de.call(this,n,a),Object.defineProperties(this,{looping:{value:!!e,writable:!0},numLoop:{value:0<t?St(t):0,writable:!0},_current:{value:null,writable:!0},_currentLoop:{value:0,writable:!0},_position:{value:0,writable:!0},_next:{value:new ce(this)}})}function _e(){B.call(this),Object.defineProperties(this,{factory:{writable:!0,value:null}})}function ve(){B.call(this),Object.defineProperties(this,{camera:{writable:!0,value:null},cursor:{writable:!0,value:null},states:{writable:!0,value:null}})}function ge(){}function fe(e,t=null){if(!(e instanceof Function))return null;if(null===t||!(t instanceof Array)||0===t.length)return new e;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6]);case 8:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]);case 9:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]);case 10:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9]);case 11:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10]);case 12:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11]);case 13:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12]);case 14:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13]);case 15:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14]);case 16:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]);case 17:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15],t[16]);case 18:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15],t[16],t[17]);case 19:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15],t[16],t[17],t[18]);case 20:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15],t[16],t[17],t[18],t[19]);case 21:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15],t[16],t[17],t[18],t[19],t[20]);case 22:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15],t[16],t[17],t[18],t[19],t[20],t[21]);case 23:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15],t[16],t[17],t[18],t[19],t[20],t[21],t[22]);case 24:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15],t[16],t[17],t[18],t[19],t[20],t[21],t[22],t[23]);case 25:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15],t[16],t[17],t[18],t[19],t[20],t[21],t[22],t[23],t[24]);case 26:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15],t[16],t[17],t[18],t[19],t[20],t[21],t[22],t[23],t[24],t[25]);case 27:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15],t[16],t[17],t[18],t[19],t[20],t[21],t[22],t[23],t[24],t[25],t[26]);case 28:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15],t[16],t[17],t[18],t[19],t[20],t[21],t[22],t[23],t[24],t[25],t[26],t[27]);case 29:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15],t[16],t[17],t[18],t[19],t[20],t[21],t[22],t[23],t[24],t[25],t[26],t[27],t[28]);case 30:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15],t[16],t[17],t[18],t[19],t[20],t[21],t[22],t[23],t[24],t[25],t[26],t[27],t[28],t[29]);case 31:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15],t[16],t[17],t[18],t[19],t[20],t[21],t[22],t[23],t[24],t[25],t[26],t[27],t[28],t[29],t[30]);case 32:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15],t[16],t[17],t[18],t[19],t[20],t[21],t[22],t[23],t[24],t[25],t[26],t[27],t[28],t[29],t[30],t[31]);default:return null;}}function be(){}function me(e=null){Object.defineProperties(this,{autoClear:{value:!1,writable:!0},_evaluators:{value:[],writable:!0}}),e instanceof Array&&0<e.length&&this.add.apply(this,e)}function he(e){return!!e&&(!!(e instanceof ye)||!!e.isLocked&&e.isLocked instanceof Function&&!!e.lock&&e.lock instanceof Function&&!!e.unlock&&e.unlock instanceof Function)}function ye(){Object.defineProperties(this,{__lock__:{writable:!0,value:!1}})}function we(e,t='value',n=null){Object.defineProperties(this,{args:{value:null,writable:!0},evaluators:{value:n instanceof Array?n:null,writable:!0},scope:{value:null,writable:!0},value:{value:e,writable:!0},_policy:{value:null,writable:!0}}),this.policy=t}function Ee(e){if(!(e instanceof Array)||0===e.length)return null;else{let t=[],n=e.length;for(let a,r=0;r<n;r++)if(a=e[r],null!==a){let e=sn.CALLBACK in a?a[sn.CALLBACK]:null,n=sn.CONFIG in a?a[sn.CONFIG]+'':null,r=sn.LOCALE in a?a[sn.LOCALE]+'':null,i=sn.REFERENCE in a?a[sn.REFERENCE]+'':null,l=sn.VALUE in a?a[sn.VALUE]:null,o=sn.EVALUATORS in a?a[sn.EVALUATORS]:null;if(null!==i&&0<i.length)t.push(new we(i,sn.REFERENCE,o));else if(null!==n&&0<n.length)t.push(new we(n,sn.CONFIG,o));else if(null!==r&&0<r.length)t.push(new we(r,sn.LOCALE,o));else if(e instanceof Function||(e instanceof String||'string'==typeof e)&&''!==e){let n=new we(e,sn.CALLBACK,o);sn.SCOPE in a&&(n.scope=a[sn.SCOPE]),sn.ARGUMENTS in a&&a[sn.ARGUMENTS]instanceof Array&&(n.args=Ee(a[sn.ARGUMENTS])),t.push(n)}else t.push(new we(l,sn.VALUE,o))}return 0<t.length?t:null}}function Ae(e,t=!1,n=0,a='    '){n=isNaN(n)?0:n,t=!!t,a||(a='    ');var r,i=[],o=e.length;for(r=0;r<o;r++){if(void 0===e[r]){i.push('undefined');continue}if(null===e[r]){i.push('null');continue}t&&n++,i.push(Oe(e[r],t,n,a)),t&&n--}if(t){var l=[];for(r=0;r<n;r++)l.push(a);var u='\n'+l.join('');return u+'['+u+a+i.join(','+u+a)+u+']'}return'['+i.join(',')+']'}function Se(e,t=!1){if(t=!!t,t)return'new Date('+(e.valueOf()+')');var n=e.getFullYear(),a=e.getMonth(),r=e.getDate(),i=e.getHours(),l=e.getMinutes(),o=e.getSeconds(),u=e.getMilliseconds(),s=[n,a,r,i,l,o,u];for(s.reverse();0===s[0];)s.splice(0,1);return s.reverse(),'new Date('+s.join(',')+')'}function Re(e,t=!1,n=0,a='    '){n=isNaN(n)?0:n,t=!!t,a||(a='    ');var r=[];for(var l in e)if(e.hasOwnProperty(l)){if(void 0===e[l]){r.push(l+':undefined');continue}if(null===e[l]){r.push(l+':null');continue}t&&n++,r.push(l+':'+Oe(e[l],t,n,a)),t&&n--}if(r=r.sort(),t){let e=[];for(var o=0;o<n;o++)e.push(a);let t='\n'+e.join('');return t+'{'+t+a+r.join(','+t+a)+t+'}'}return'{'+r.join(',')+'}'}function Le(e){for(var t=e.toString(16);4>t.length;)t='0'+t;return t}function Te(e){for(var t,n='"',a='',r='',i=0,l=e.length;i<l;){if(r=e.charAt(i),t=e.charCodeAt(i),255<t){a+='\\u'+Le(t),i++;continue}switch(r){case'\b':{a+='\\b';break}case'\t':{a+='\\t';break}case'\n':{a+='\\n';break}case'\x0B':{a+='\\v';break}case'\f':{a+='\\f';break}case'\r':{a+='\\r';break}case'"':{a+='\\"';break}case'\'':{a+='\\\'';break}case'\\':{a+='\\\\';break}default:a+=r;}i++}return n+a+n}function Oe(e,t,n,a){return n=isNaN(n)?0:n,t=!!t,a||(a='    '),void 0===e?'undefined':null===e?'null':'string'==typeof e||e instanceof String?Te(e):'boolean'==typeof e||e instanceof Boolean?e?'true':'false':'number'==typeof e||e instanceof Number?e.toString():e instanceof Date?Se(e):e instanceof Array?Ae(e,t,n,a):e.constructor&&e.constructor===Object?Re(e,t,n,a):'toSource'in e?e.toSource(n):'<unknown>'}function Ie(e,t,n=null,a=!1,r='after',i=0){Object.defineProperties(this,{dispatcher:{value:e,writable:!0},method:{value:n,writable:!0},priority:{value:i,writable:!0},type:{value:t,writable:!0},useCapture:{value:!0===a,writable:!0},_order:{value:r===cn.BEFORE?cn.BEFORE:cn.AFTER,writable:!0}})}function Ce(e){if(!e)return null;let t=null;if(e instanceof Array?t=e:sn.LISTENERS in e&&e[sn.LISTENERS]instanceof Array&&(t=e[sn.LISTENERS]),null===t||0===t.length)return null;let n,a,r,i=[],l=e[sn.ID]+'',o=t.length;for(let u=0;u<o;u++)if(n=t[u],null!==n&&Ie.DISPATCHER in n&&Ie.TYPE in n){if(a=n[Ie.DISPATCHER],!(a instanceof String||'string'==typeof a)||0===a.length)continue;if(r=n[Ie.TYPE],!(r instanceof String||'string'==typeof r)||0===r.length)continue;i.push(new Ie(a,r,n[Ie.METHOD],!0===n[Ie.USE_CAPTURE],n[Ie.ORDER]===cn.BEFORE?cn.BEFORE:cn.AFTER,isNaN(n[Ie.PRIORITY])?0:n[Ie.PRIORITY]))}else dn&&dn.warning('ObjectBuilder.createListeners failed, a listener definition is invalid in the object definition "{0}" at "{1}" with the value : {2}',l,u,Oe(n));return 0<i.length?i:null}function Ne(){}function Fe(e,t,n='value',a=null){Object.defineProperties(this,{args:{value:null,writable:!0},evaluators:{value:a instanceof Array?a:null,writable:!0},name:{value:e,writable:!0},scope:{value:null,writable:!0},value:{value:t,writable:!0},_policy:{value:null,writable:!0}}),this.policy=n}function Pe(e){if(!e)return null;let t=null;if(e instanceof Array?t=e:sn.PROPERTIES in e&&e[sn.PROPERTIES]instanceof Array&&(t=e[sn.PROPERTIES]),!(t instanceof Array)||0===t.length)return null;let n=[],a=e[sn.ID]+'',r=t.length,l=null;for(let o=0;o<r;o++){l=t[o];let e=null,r=null,i=null,u=null,s=null,d=null,c=null,p=null;if(l&&sn.NAME in l){if(s=l[sn.NAME],!(s instanceof String||'string'==typeof s)||''===s.length)continue;sn.EVALUATORS in l&&(p=l[sn.EVALUATORS]instanceof Array?l[sn.EVALUATORS]:null),sn.ARGUMENTS in l&&(e=l[sn.ARGUMENTS]||null),sn.CONFIG in l&&(i=l[sn.CONFIG]||null),sn.LOCALE in l&&(u=l[sn.LOCALE]||null),sn.CALLBACK in l&&(r=l[sn.CALLBACK]),sn.REFERENCE in l&&(d=l[sn.REFERENCE]||null),sn.VALUE in l&&(c=l[sn.VALUE]);let t=null;(d instanceof String||'string'==typeof d)&&''!==d?t=new Fe(s,d,sn.REFERENCE,p):(i instanceof String||'string'==typeof i)&&''!==i?t=new Fe(s,i,sn.CONFIG,p):(u instanceof String||'string'==typeof u)&&''!==u?t=new Fe(s,u,sn.LOCALE,p):r instanceof Function||(r instanceof String||'string'==typeof r)&&''!==r?(t=new Fe(s,r,sn.CALLBACK,p),e&&e instanceof Array&&(t.args=Ee(e)),sn.SCOPE in l&&(t.scope=l[sn.SCOPE]||null)):e&&e instanceof Array?t=new Fe(s,Ee(e),sn.ARGUMENTS):t=new Fe(s,c,sn.VALUE,p),t&&n.push(t)}else dn&&dn.warning('createProperties failed, a property definition is invalid in the object definition "{0}" at "{1}" with the value : {2}',a,o,Oe(l))}return 0<n.length?n:null}function xe(e,t=null,n=0,a=!1,r='after'){Object.defineProperties(this,{autoDisconnect:{value:a,writable:!0},order:{get:function(){return this._order},set:function(e){this._order=e===cn.BEFORE?cn.BEFORE:cn.AFTER}},priority:{value:n,writable:!0},signal:{value:e,writable:!0},slot:{value:t,writable:!0},_order:{value:r===cn.BEFORE?cn.BEFORE:cn.AFTER,writable:!0}})}function De(e){if(!e)return null;let t=null;if(e instanceof Array?t=e:sn.RECEIVERS in e&&e[sn.RECEIVERS]instanceof Array&&(t=e[sn.RECEIVERS]),null===t||0===t.length)return null;let n,a,r=[],l=e[sn.ID]+'',o=t.length;for(let u=0;u<o;u++)if(n=t[u],null!==n&&xe.SIGNAL in n){if(a=n[xe.SIGNAL],!(a instanceof String||'string'==typeof a)||0===a.length)continue;r.push(new xe(a,n[xe.SLOT],isNaN(n[xe.PRIORITY])?0:n[xe.PRIORITY],!0===n[xe.AUTO_DISCONNECT],n[xe.ORDER]===cn.BEFORE?cn.BEFORE:cn.AFTER))}else dn.warning('ObjectBuilder.createReceivers failed, a receiver definition is invalid in the object definition "{0}" at "{1}" with the value : {2}',l,u,Oe(n));return 0<r.length?r:null}function ke(e,t){Object.defineProperties(this,{args:{value:t,writable:!0},name:{value:e,writable:!0}})}function Me(e,t,n){ke.call(this,t,n),Object.defineProperties(this,{factory:{value:e,writable:!0}})}function ze(e,t,n=null){Fe.call(this,t,null,null,n),Object.defineProperties(this,{factory:{value:e,writable:!0}})}function je(e){Object.defineProperties(this,{ref:{value:e instanceof String||'string'==typeof e?e:null,writable:!0}})}function Ue(e,t,n){ke.call(this,t,n),Object.defineProperties(this,{type:{value:e,writable:!0}})}function Ge(e,t,n=null){Fe.call(this,e,null,null,n),Object.defineProperties(this,{type:{value:t,writable:!0}})}function Ye(e){Object.defineProperties(this,{value:{writable:!0,value:e}})}function He(e){return pn.FACTORY_METHOD in e?Me.build(e[pn.FACTORY_METHOD]):pn.FACTORY_PROPERTY in e?ze.build(e[pn.FACTORY_PROPERTY]):pn.FACTORY_REFERENCE in e?new je(e[pn.FACTORY_REFERENCE]):pn.FACTORY_VALUE in e?new Ye(e[pn.FACTORY_VALUE]):pn.STATIC_FACTORY_METHOD in e?Ue.build(e[pn.STATIC_FACTORY_METHOD]):pn.STATIC_FACTORY_PROPERTY in e?Ge.build(e[pn.STATIC_FACTORY_PROPERTY]):null}function Ve(e,t,n=!1,a=!1,r=!1){if(null===e||void 0===e)throw new ReferenceError(this+' constructor failed, the \'id\' value passed in argument not must be empty or \'null\' or \'undefined\'.');if(null===t||void 0===t)throw new ReferenceError(this+' constructor failed, the \'type\' passed in argument not must be empty or \'null\' or \'undefined\'.');Object.defineProperties(this,{constructorArguments:{value:null,enumerable:!0,writable:!0},destroyMethodName:{value:null,enumerable:!0,writable:!0},id:{value:e,enumerable:!0,writable:!0},identify:{value:!1,enumerable:!0,writable:!0},initMethodName:{value:null,enumerable:!0,writable:!0},lock:{value:!1,enumerable:!0,writable:!0},properties:{value:null,enumerable:!0,writable:!0},type:{value:t,enumerable:!0,writable:!0},_afterListeners:{value:null,writable:!0},_beforeListeners:{value:null,writable:!0},_dependsOn:{value:null,writable:!0},_generates:{value:null,writable:!0},_lazyInit:{value:a&&n,writable:!0},_lazyType:{value:!0===r,writable:!0},_singleton:{value:!0===n,writable:!0},_scope:{value:!0===n?_n.SINGLETON:_n.PROTOTYPE,writable:!0},_strategy:{value:null,writable:!0}})}function Be(e){let t=new Ve(e[sn.ID]||null,e[sn.TYPE]||null,e[sn.SINGLETON]||!1,e[sn.LAZY_INIT]||!1,e[sn.LAZY_TYPE]||!1);sn.IDENTIFY in e&&(e[sn.IDENTIFY]instanceof Boolean||'boolean'==typeof e[sn.IDENTIFY])&&(t.identify=e[sn.IDENTIFY]),sn.LOCK in e&&(e[sn.LOCK]instanceof Boolean||'boolean'==typeof e[sn.LOCK])&&(t.lock=e[sn.LOCK]),sn.ARGUMENTS in e&&e[sn.ARGUMENTS]instanceof Array&&(t.constructorArguments=Ee(e[sn.ARGUMENTS])),sn.DESTROY_METHOD_NAME in e&&(t.destroyMethodName=e[sn.DESTROY_METHOD_NAME]),sn.INIT_METHOD_NAME in e&&(t.initMethodName=e[sn.INIT_METHOD_NAME]),sn.SCOPE in e&&(t.scope=e[sn.SCOPE]),sn.DEPENDS_ON in e&&e[sn.DEPENDS_ON]instanceof Array&&(t.dependsOn=e[sn.DEPENDS_ON]),sn.GENERATES in e&&e[sn.GENERATES]instanceof Array&&(t.generates=e[sn.GENERATES]);let n=Ce(e);n&&(t.listeners=n);let a=Pe(e);a&&(t.properties=a);let r=De(e);r&&(t.receivers=r);let i=He(e);return i&&(t.strategy=i),t}function Ke(){}function qe(){Object.defineProperties(this,{expressions:{value:new h},_beginSeparator:{value:'{',writable:!0},_endSeparator:{value:'}',writable:!0},_pattern:{value:'{0}((\\w+)|(\\w+)((.\\w)+|(.\\w+))){1}'},_reg:{value:null,writable:!0}}),this._reset()}function We(e){Object.defineProperties(this,{separator:{value:'.',writable:!0},target:{value:e,writable:!0,configurable:!0},throwError:{value:!1,writable:!0},undefineable:{value:null,writable:!0}})}function Xe(e){We.call(this),this.config=e instanceof et?e:null,Object.defineProperties(this,{target:{get:function(){return null===this.config?null:this.config.config}}})}function Ze(e){We.call(this),this.config=e instanceof et?e:null,Object.defineProperties(this,{target:{get:function(){return null===this.config?null:this.config.locale}}})}function $e(e){Object.defineProperties(this,{factory:{value:e instanceof nt?e:null,writable:!0},separator:{value:'.',writable:!0},undefineable:{value:null,writable:!0},throwError:{get:function(){return this._propEvaluator.throwError},set:function(e){this._propEvaluator.throwError=e}},_propEvaluator:{value:new We,writable:!0}})}function Je(e,t=null){if((e instanceof String||'string'==typeof e)&&(e=e.split('.'),0<e.length))try{var n=t||Ot;return e.forEach((e)=>{n.hasOwnProperty(e)&&(n=n[e])}),n}catch(t){}}function Qe(e=null){Object.defineProperties(this,{config:{value:e instanceof et?e:null,writable:!0},throwError:{value:!1,writable:!0}})}function et(e=null){Object.defineProperties(this,{defaultDestroyMethod:{value:null,writable:!0,enumerable:!0},defaultInitMethod:{value:null,writable:!0,enumerable:!0},domain:{value:null,writable:!0,enumerable:!0},identify:{value:!1,writable:!0,enumerable:!0},lazyInit:{value:!1,writable:!0,enumerable:!0},lock:{value:!1,writable:!0,enumerable:!0},parameters:{value:null,writable:!0,enumerable:!0},root:{value:null,writable:!0,enumerable:!0},stage:{value:null,writable:!0,enumerable:!0},useLogger:{value:!1,writable:!0,enumerable:!0},_config:{value:{},writable:!0},_configEvaluator:{value:new Xe(this),writable:!0},_locale:{value:{},writable:!0},_localeEvaluator:{value:new Ze(this),writable:!0},_referenceEvaluator:{value:new $e,writable:!0},_typeAliases:{value:new h,writable:!0},_typeEvaluator:{value:new Qe(this),writable:!0},_typeExpression:{value:new qe,writable:!0},_typePolicy:{value:gn.NONE,writable:!0}}),this.throwError=!1,e&&this.initialize(e)}function tt(){B.call(this),Object.defineProperties(this,{_map:{writable:!0,value:new h}})}function nt(e=null,t=null){tt.call(this),Object.defineProperties(this,{objects:{value:t instanceof Array?t:null,writable:!0},bufferSingletons:{value:[],writable:!0},_config:{value:null,writable:!0},_evaluator:{value:new me},_singletons:{value:new h}}),this.config=e}function at(e=null,t=null){V.call(this),Object.defineProperties(this,{func:{value:e instanceof Function?e:null,writable:!0},scope:{value:t,writable:!0}})}function rt(e=null,t=null){Object.defineProperties(this,{factory:{writable:!0,value:t},state:{writable:!0,value:e}}),B.call(this)}function it(e=null){Object.defineProperties(this,{_closeAfter:{writable:!0,value:null},_closeBefore:{writable:!0,value:null},_openAfter:{writable:!0,value:null},_openBefore:{writable:!0,value:null}}),d.call(this,e)}function lt(e=null,t=null){rt.call(this,e,t),Object.defineProperties(this,{_chain:{value:new pe}}),this._chain.mode=de.TRANSIENT,this._chain.finishIt.connect(this.notifyFinished.bind(this))}function ot(e=null,t=null){Object.defineProperties(this,{chain:{writable:!0,value:e instanceof pe?e:null},factory:{writable:!0,value:t}})}function ut(e=null,t=null){Object.defineProperties(this,{_chain:{value:new pe}}),rt.call(this,e,t),this._chain.mode=de.TRANSIENT,this._chain.finishIt.connect(this.notifyFinished.bind(this))}function st(e=null,t=null){Object.defineProperties(this,{chain:{writable:!0,value:e instanceof pe?e:null},factory:{writable:!0,value:t}})}function dt(){ye.call(this)}function ct(){dt.call(this),Object.defineProperties(this,{beforeChanged:{value:new i},changed:{value:new i},cleared:{value:new i},security:{value:!0,writable:!0},_current:{value:null,writable:!0}})}function pt(e=null,t='id'){ct.call(this),Object.defineProperties(this,{added:{value:new i},removed:{value:new i},updated:{value:new i},_map:{writable:!0,value:e instanceof _?e:new h},_primaryKey:{value:(t instanceof String||'string'==typeof t)&&''!==t?t:pt.DEFAULT_PRIMARY_KEY,writable:!0}})}function _t(e=null,t=null,n=!1,a=!1,r=!1,i=!1){V.call(this),Object.defineProperties(this,{autoClear:{value:!0===n,writable:!0},autoDequeue:{value:!0===r,writable:!0},autoSelect:{value:!0===a,writable:!0},cleanFirst:{value:!0===i,writable:!0},datas:{value:t instanceof Array?t:null,writable:!0},first:{value:null,writable:!0},model:{value:e instanceof pt?e:null,writable:!0}})}function vt(e=null,t=null,n=!1,a=!1,r=!1,i=!1){_t.call(this,e,t,n,a,r,i)}function gt(){pt.call(this)}function ft(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;Object.defineProperties(this,{container:{writable:!0,value:null},scene:{writable:!0,value:null}}),it.call(this,e)}function bt(e=null){G.call(this,e,'a-text')}function mt(e=null){Object.defineProperties(this,{backgroundColor:{writable:!0,value:'#00FFFF'},height:{writable:!0,value:1},radius:{writable:!0,value:0},width:{writable:!0,value:1},_geometry:{writable:!0,value:null},_loaded:{writable:!0,value:null},_material:{writable:!0,value:null},_mesh:{writable:!0,value:null},_text:{writable:!0,value:null}}),W.call(this,e,'a-entity'),this._text=new bt,this.addChild(this._text),this._loaded=this.loaded.bind(this),this._element.addEventListener('loaded',this._loaded)}function ht(){P.call(this),Object.defineProperties(this,{current:{writable:!0,value:null},states:{writable:!0,value:null}})}function yt(e=null){W.call(this,e,'a-image')}function wt(){n.call(this),Object.defineProperties(this,{sound:{writable:!0,value:null}})}function Et(){B.call(this),Object.defineProperties(this,{sky:{writable:!0,value:null}})}function At(){l.call(this)}var St=Math.round,Rt=Math.min,Lt=Math.max,Tt=Math.sign;Date.now&&Date.prototype.getTime||(Date.now=function(){return new Date().getTime()}),Function.prototype.bind||(Function.prototype.bind=function(e){if('function'!=typeof this)throw new TypeError('Function.prototype.bind called on incompatible '+this);var t=Array.prototype.slice.call(arguments,1),n=this,a=function(){},r=function(){return n.apply(this instanceof a?this:e,t.concat(Array.prototype.slice.call(arguments)))};return this.prototype&&(a.prototype=this.prototype),r.prototype=new a,r}),void 0===Function.prototype.name&&Object.defineProperty(Function.prototype,'name',{get:function(){return this.toString().match(/^\s*function\s*(\S*)\s*\(/)[1]}}),void 0===Tt&&(Tt=function(e){return 0>e?-1:0<e?1:+e}),void 0===Object.assign&&function(){Object.assign=function(e){if(void 0===e||null===e)throw new TypeError('Cannot convert undefined or null to object');for(var t,n=Object(e),a=1;a<arguments.length;a++)if(t=arguments[a],void 0!==t&&null!==t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}}();var Ot=Ot||null;if(!Ot)try{Ot=window}catch(t){}if(!Ot)try{Ot=document}catch(t){}Ot||(Ot={});var It=Ot.performance||{};if(Object.defineProperty(Ot,'performance',{value:It,configurable:!0,writable:!0}),It.now=It.now||It.mozNow||It.msNow||It.oNow||It.webkitNow,!(Ot.performance&&Ot.performance.now)){const e=Date.now();Ot.performance.now=()=>Date.now()-e}let Ct=Date.now();const Nt=['ms','moz','webkit','o'];let Ft=Nt.length;for(let t=0;t<Ft&&!Ot.requestAnimationFrame;++t){const e=Nt[t];Ot.requestAnimationFrame=Ot[`${e}RequestAnimationFrame`],Ot.cancelAnimationFrame=Ot[`${e}CancelAnimationFrame`]||Ot[`${e}CancelRequestAnimationFrame`]}Ot.requestAnimationFrame||(Ot.requestAnimationFrame=(e)=>{if('function'!=typeof e)throw new TypeError(`${e}is not a function`);const t=Date.now();let n=16+Ct-t;return 0>n&&(n=0),Ct=t,setTimeout(()=>{Ct=Date.now(),e(It.now())},n)}),Ot.cancelAnimationFrame||(Ot.cancelAnimationFrame=(e)=>clearTimeout(e));var Pt=Ot.cancelAnimationFrame,xt=Ot.requestAnimationFrame;if(Ot&&'function'!=typeof Ot.Uint32Array&&'object'!=typeof Ot.Uint32Array){var Dt=function(e){Ot[e]=function(e){var t;if('number'==typeof e)for(Array.call(this,e),this.length=e,t=0;t<this.length;t++)this[t]=0;else for(Array.call(this,e.length),this.length=e.length,t=0;t<this.length;t++)this[t]=e[t]},Ot[e].prototype=[],Ot[e].constructor=Ot[e]};Dt('Float32Array'),Dt('Uint32Array'),Dt('Uint16Array'),Dt('Int16Array'),Dt('ArrayBuffer')}var kt=!1;n.prototype=Object.create(Object.prototype,{constructor:{writable:!0,value:n},receive:{writable:!0,value:function(){}},toString:{writable:!0,value:function(){return'['+this.constructor.name+']'}}}),a.prototype=Object.create(Object.prototype,{constructor:{writable:!0,value:a},length:{get:function(){return 0}},connect:{writable:!0,value:function(e=0,t=!1){}},connected:{writable:!0,value:function(){}},disconnect:{writable:!0,value:function(){}},emit:{writable:!0,value:function(){}},hasReceiver:{writable:!0,value:function(){}}}),r.prototype=Object.create(Object.prototype),r.prototype.constructor=r,r.prototype.toString=function(){return'[SignalEntry]'},i.prototype=Object.create(a.prototype,{constructor:{value:i,writable:!0},length:{get:function(){return this.receivers.length}},connect:{value:function(e,t=0,o=!1){if(null===e)return!1;if(o=!0===o,t=0<t?t-t%1:0,'function'==typeof e||e instanceof Function||e instanceof n||'receive'in e){if(this.hasReceiver(e))return!1;this.receivers.push(new r(e,t,o));let n,i,u=this.receivers,a=function(e,t){var n=u[e];return u[e]=u[t],u[t]=n,!0},s=!1,d=u.length;for(n=1;n<d;n++){for(i=0;i<d-n;i++)u[i+1].priority>u[i].priority&&(s=a(i,i+1));if(!s)break}return!0}return!1}},connected:{value:function(){return 0<this.receivers.length}},disconnect:{value:function(e=null){if(null===e)return!!(0<this.receivers.length)&&(this.receivers=[],!0);if(0<this.receivers.length)for(var t=this.receivers.length;-1<--t;)if(this.receivers[t].receiver===e)return this.receivers.splice(t,1),!0;return!1}},emit:{value:function(...t){let o=this.receivers.length;if(0===o)return;let l,i,e=[],r=this.receivers.slice();var a;for(l=0;l<o;l++)i=r[l],i.auto&&e.push(i);if(0<e.length)for(o=e.length;-1<--o;)l=this.receivers.indexOf(e[o]),-1<l&&this.receivers.splice(l,1);for(o=r.length,l=0;l<o;l++)a=r[l].receiver,a instanceof Function||'function'==typeof receiver?a.apply(this.proxy||this,t):(a instanceof n||'receive'in a&&a.receive instanceof Function)&&a.receive.apply(this.proxy||a,t)}},hasReceiver:{value:function(e){if(null===e)return!1;if(0<this.receivers.length)for(let t=this.receivers.length;-1<--t;)if(this.receivers[t].receiver===e)return!0;return!1}},toArray:{value:function(){let e=[],t=this.receivers.length;if(0<t)for(let n=0;n<t;n++)e.push(this.receivers[n].receiver);return e}},toString:{value:function(){return'[Signal]'}}});var Mt=Object.defineProperties({},{ANY:{enumerable:!0,value:'any'},LANDSCAPE:{enumerable:!0,value:'landscape'},PORTRAIT:{enumerable:!0,value:'portrait'}}),zt=Object.defineProperties({},{FULL_SCREEN:{enumerable:!0,value:'fullScreen'},FULL_SCREEN_INTERACTIVE:{enumerable:!0,value:'fullScreenInteractive'},NORMAL:{enumerable:!0,value:'normal'}}),jt=Object.defineProperties({},{DEFAULT:{enumerable:!0,value:'default'},ROTATED_LEFT:{enumerable:!0,value:'rotatedLeft'},ROTATED_RIGHT:{enumerable:!0,value:'rotatedRight'},UNKNOWN:{enumerable:!0,value:'unknown'},UPSIDE_DOWN:{enumerable:!0,value:'upsideDown'}});l.prototype=Object.create(Object.prototype,{constructor:{writable:!0,value:l},allowFullScreen:{get:function(){return this._allowFullScreen}},allowFullScreenInteractive:{get:function(){return this._fullScreenInteractive}},aspectRatio:{get:function(){return this._aspectRatio}},displayState:{get:function(){return this._displayState},set:function(e){if(this._displayState!==e){switch(this._displayState=e,this._displayState){case zt.FULL_SCREEN:{document.documentElement[this._fullScreenRequest]();break}case zt.FULL_SCREEN_INTERACTIVE:{document.documentElement[this._fullScreenRequest](Element.ALLOW_KEYBOARD_INPUT);break}case zt.NORMAL:default:{document[this._fullScreenExit]();break}}this.notifyFullScreen(this._displayState)}}},fullScreenHeight:{get:function(){return this._fullScreenHeight}},fullScreenWidth:{get:function(){return this._fullScreenWidth}},height:{get:function(){return this._height}},launchedFromHomeScreen:{get:function(){return this._launchedFromHomeScreen}},orientation:{get:function(){return this._orientation}},pixelRatio:{get:function(){return this._pixelRatio}},width:{get:function(){return this._width}},getDeviceOrientation:{writable:!0,value:function(){if(window.screen.orientation&&window.screen.orientation.type)switch(window.screen.orientation.type){case'portrait-secondary':{this._orientation=jt.UPSIDE_DOWN,this._aspectRatio=Mt.PORTRAIT;break}case'landscape-primary':{this._orientation=jt.ROTATED_LEFT,this._aspectRatio=Mt.LANDSCAPE;break}case'landscape-secondary':{this._orientation=jt.ROTATED_RIGHT,this._aspectRatio=Mt.LANDSCAPE;break}case'portrait-primary':default:{this._orientation=jt.DEFAULT,this._aspectRatio=Mt.PORTRAIT;break}}else if(void 0!==window.orientation)switch(window.orientation){case 180:{this._orientation=jt.UPSIDE_DOWN,this._aspectRatio=Mt.PORTRAIT;break}case 90:{this._orientation=jt.ROTATED_LEFT,this._aspectRatio=Mt.LANDSCAPE;break}case-90:{this._orientation=jt.ROTATED_RIGHT,this._aspectRatio=Mt.LANDSCAPE;break}case 0:default:this._orientation=jt.DEFAULT,this._aspectRatio=Mt.PORTRAIT;}}},getViewportSize:{writable:!0,value:function(){return this._width=Lt(document.documentElement.clientWidth,window.innerWidth||0),this._height=Lt(document.documentElement.clientHeight,window.innerHeight||0),{width:this._width,height:this._height}}},notifyFullScreen:{writable:!0,value:function(){this.fullScreen.emit(this._displayState,this)}},notifyOrientationChange:{writable:!0,value:function(){this.getDeviceOrientation(),this.orientationChange.emit(this)}},notifyResized:{writable:!0,value:function(){this.getViewportSize(),this.resize.emit(this)}},__initialize__:{writable:!0,value:function(){(!0===navigator.standalone||window.matchMedia('(display-mode: standalone)').matches)&&(this._launchedFromHomeScreen=!0),this._pixelRatio=window.devicePixelRatio||1,this.getViewportSize(),this._fullScreenWidth=window.screen.width,this._fullScreenHeight=window.screen.height,window.orientation||window.screen.orientation?(this._supportsOrientationChange=!0,this.getDeviceOrientation()):this._supportsOrientationChange=!1;let e=['requestFullscreen','requestFullScreen','webkitRequestFullscreen','webkitRequestFullScreen','msRequestFullscreen','msRequestFullScreen','mozRequestFullScreen','mozRequestFullscreen'],t=['cancelFullScreen','exitFullscreen','webkitCancelFullScreen','webkitExitFullscreen','msCancelFullScreen','msExitFullscreen','mozCancelFullScreen','mozExitFullscreen'],n=e.length;for(let a=0;a<n;a++)if(document.documentElement[e[a]]&&document[t[a]]){this._allowFullScreen=!0,this._fullScreenRequest=e[a],this._fullScreenExit=t[a];break}window.Element&&Element.ALLOW_KEYBOARD_INPUT&&(this._fullScreenInteractive=!0),!0===this._allowFullScreen&&window.addEventListener('fullscreenchange',this.notifyFullScreen.bind(this),!1),!0===this._supportsOrientationChange&&window.addEventListener('orientationchange',this.notifyOrientationChange.bind(this),!1),window.addEventListener('resize',this.notifyResized.bind(this),!1)}}});[].concat({name:'draw',value:{schema:{width:{default:256},height:{default:256},background:{default:'#FFFFFF'}},create:function(e,t){var n=this,a=document.createElement('canvas');a.width=e,a.height=t,a.style='display: none',n.canvas=a,n.ctx=a.getContext('2d'),this.texture=new THREE.Texture(n.canvas),0<this.el.object3D.children.length?(this.el.object3D.children[0].material=new THREE.MeshBasicMaterial,this.el.object3D.children[0].material.map=this.texture):(this.el.object3D.material=new THREE.MeshBasicMaterial,this.el.object3D.material.map=this.texture),this.el.hasLoaded?n.render():this.el.addEventListener('loaded',function(){n.render()})},init:function(){this.registers=[],this.update()},register:function(e){this.registers.push(e)},remove:function(){},render:function(){this.registers&&0<this.registers.length&&(this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.fillStyle=this.data.background,this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.registers.forEach(function(e){e()})),this.texture.needsUpdate=!0},update:function(e){e||this.create(this.data.width,this.data.height)}}},{name:'label',value:{schema:{color:{default:'#FF0000'},font:{default:'36px Georgia'},text:{default:''}},dependencies:['draw'],update:function(){let e=this.el.components.draw,t=e.ctx,n=e.canvas;t.fillStyle=this.el.getAttribute('color'),t.fillRect(0,0,n.width,n.height),t.fillStyle=this.data.color,t.font=this.data.font,t.textAlign='center',t.textBaseline='middle',t.fillText(this.data.text,.5*n.width,.5*n.height),e.render()}}});s.prototype=Object.create(Object.prototype,{constructor:{writable:!0,value:s}}),d.prototype=Object.create(s.prototype,{constructor:{writable:!0,value:d},formatToString:{value:function(e,...t){e||(!this._constructorName&&(this._constructorName=this.constructor.name),e=this._constructorName);let n=[e],a=t.length;for(let r=0;r<a;++r)t[r]in this&&n.push(t[r]+':'+this[t[r]]);return'['+n.join(' ')+']'}},setTo:{writable:!0,value:function(e){if(e)for(var t in e)t in this&&(this[t]=e[t]);return this}},toString:{writable:!0,value:function(){return this.formatToString(null)}}}),c.prototype=Object.create(d.prototype,{constructor:{writable:!0,value:c},toString:{writable:!0,value:function(){return this.formatToString(null,'id')}}});var Ut=Object.defineProperties({},{HOME:{enumerable:!0,value:'home'}}),Gt=Object.defineProperties({},{HOME:{enumerable:!0,value:'home_view'}}),Yt=(e,t,n,a)=>e===a?t+n:n*(-Math.pow(2,-10*e/a)+1)+t,Ht={name:'application',debug:!0,verbose:!1,first:Ut.HOME,states:[new c({id:Ut.HOME,view:Gt.HOME})]};o(Ht,{home_image:{id:'home_image',src:'images/image.min.jpg'}}),o(Ht,{camera:{x:0,y:0,z:0},over_sound:{src:'url(audios/snap.mp3)',volume:.3}}),o(Ht,{cursor:{duration:2,useSeconds:!0,z:-1},cursor_circle:{color:'red',opacity:.3,radius:.01,shader:'flat',thetaLength:0,thetaStart:90,z:.01},cursor_ring:{color:'white',opacity:.2,radius:.015,shader:'flat'},cursor_over_tween:{easing:Yt,from:{thetaLength:0},to:{thetaLength:360}},cursor_out_tween:{duration:2,useSeconds:!0,easing:Yt,from:{thetaLength:360},to:{thetaLength:0}}}),o(Ht,{loader:{class:'dots-loader'}}),o(Ht,{scene:{antialias:!0}}),o(Ht,{sky:{color:'#383838'}}),o(Ht,{home_audio:{src:'url(sounds/home.mp3)',volume:1},home_button:{align:'center',color:'#FFFFFF',backgroundColor:'#ff6666',radius:.08,value:'Start the experience',font:'kelsonsans',raycasted:!0,width:2.5,height:.3},home_button_front:{x:0,y:-1,z:-4},home_button_back:{side:'double',rotationY:180,x:0,y:-1,z:4},home_image:{width:3,height:1.5,src:'#home_image'},home_image_front:{x:0,y:0,z:-4},home_image_back:{side:'double',rotationY:180,x:0,y:0,z:4},home_subtitle:{align:'center',color:'#FFFFFF'},home_subtitle_front:{x:0,y:-.5,z:-4},home_subtitle_back:{side:'double',rotationY:180,x:0,y:-.5,z:4},home_title:{align:'center',color:'#FFFFFF',font:'kelsonsans'},home_title_front:{x:0,y:0,z:-2},home_title_back:{side:'double',rotationY:180,x:0,y:0,z:2}}),_.prototype=Object.create(Object.prototype,{constructor:{writable:!0,value:_},length:{get:()=>0},clear:{value:function(){},writable:!0},clone:{value:function(){return new _},writable:!0},copyFrom:{value:function(){},writable:!0},delete:{value:function(){},writable:!0},forEach:{value:function(e=null){},writable:!0},get:{value:function(){return null},writable:!0},has:{value:function(){return!1},writable:!0},hasValue:{value:function(){return!1},writable:!0},isEmpty:{value:function(){return!1},writable:!0},iterator:{value:function(){return null},writable:!0},keyIterator:{value:function(){return null},writable:!0},keys:{value:function(){return null},writable:!0},set:{value:function(){},writable:!0},toString:{value:function(){return'['+this.constructor.name+']'},writable:!0},values:{value:function(){},writable:!0}}),g.prototype=Object.create(Object.prototype,{constructor:{value:g},clone:{value:function(){return new g(this.key,this.value)}},toString:{value:function(){return'[MapEntry key:'+this.key+' value:'+this.value+']'}}}),v.prototype=Object.create(Object.prototype,{constructor:{writable:!0,value:v},format:{value:function(e){if(e instanceof _){let t='{',n=e.keys(),a=n.length;if(0<a){let r=e.values();for(let e=0;e<a;e++)t+=n[e]+':'+r[e],e<a-1&&(t+=',')}return t+='}',t}return'{}'}}});var Vt=new v;f.prototype=Object.create(Object.prototype,{constructor:{writable:!0,value:f},delete:{writable:!0,value:function(){}},hasNext:{writable:!0,value:function(){}},key:{writable:!0,value:function(){}},next:{writable:!0,value:function(){}},reset:{writable:!0,value:function(){}},seek:{writable:!0,value:function(){}},toString:{writable:!0,value:function(){return'__clazzname__'in this.constructor||Object.defineProperty(this.constructor,'__clazzname__',{value:this.constructor.name}),'['+this.constructor.__clazzname__+']'}}}),b.prototype=Object.create(f.prototype,{constructor:{value:b},delete:{value:function(){return this._a.splice(this._k--,1)[0]}},hasNext:{value:function(){return this._k<this._a.length-1}},key:{value:function(){return this._k}},next:{value:function(){return this._a[++this._k]}},reset:{value:function(){this._k=-1}},seek:{value:function(e){e=Lt(Rt(e-1,this._a.length),-1),this._k=isNaN(e)?-1:e}}}),m.prototype=Object.create(f.prototype,{constructor:{writable:!0,value:m},delete:{value:function(){return this._i.delete(),this._m.delete(this._k)}},hasNext:{value:function(){return this._i.hasNext()}},key:{value:function(){return this._k}},next:{value:function(){return this._k=this._i.next(),this._m.get(this._k)}},reset:{value:function(){this._i.reset()}},seek:{value:function(){throw new Error('This Iterator does not support the seek() method.')}}}),h.prototype=Object.create(_.prototype,{constructor:{writable:!0,value:h},length:{get:function(){return this._keys.length}},clear:{value:function(){this._keys=[],this._values=[]}},clone:{value:function(){return new h(this._keys,this._values)}},copyFrom:{value:function(e){if(e&&e instanceof _){let t=e.keys(),n=e.values(),a=t.length;for(let e=0;e<a;e-=-1)this.set(t[e],n[e])}}},delete:{value:function(e){let t=null,n=this.indexOfKey(e);return-1<n&&(t=this._values[n],this._keys.splice(n,1),this._values.splice(n,1)),t}},forEach:{value:function(e,t=null){if('function'!=typeof e)throw new TypeError(e+' is not a function');let n=this._keys.length;for(let a=0;a<n;a++)e.call(t,this._values[a],this._keys[a],this)}},get:{value:function(e){return this._values[this.indexOfKey(e)]}},getKeyAt:{value:function(e){return this._keys[e]}},getValueAt:{value:function(e){return this._values[e]}},has:{value:function(e){return-1<this.indexOfKey(e)}},hasValue:{value:function(e){return-1<this.indexOfValue(e)}},indexOfKey:{value:function(e){for(let t=this._keys.length;-1<--t;)if(this._keys[t]===e)return t;return-1}},indexOfValue:{value:function(e){for(let t=this._values.length;-1<--t;)if(this._values[t]===e)return t;return-1}},isEmpty:{value:function(){return 0===this._keys.length}},iterator:{value:function(){return new m(this)}},keyIterator:{value:function(){return new b(this._keys)}},keys:{value:function(){return this._keys.concat()}},set:{value:function(e,t){let n=null,a=this.indexOfKey(e);return 0>a?(this._keys.push(e),this._values.push(t)):(n=this._values[a],this._values[a]=t),n}},setKeyAt:{value:function(e,t){if(e>=this._keys.length)throw new RangeError('ArrayMap.setKeyAt('+e+') failed with an index out of the range.');if(this.containsKey(t))return null;let n=this._keys[e];if(void 0===n)return null;let a=this._values[e];return this._keys[e]=t,new g(n,a)}},setValueAt:{value:function(e,t){if(e>=this._keys.length)throw new RangeError('ArrayMap.setValueAt('+e+') failed with an index out of the range.');let n=this._values[e];if(void 0===n)return null;let a=this._keys[e];return this._values[e]=t,new g(a,n)}},toString:{value:function(){return Vt.format(this)}},values:{value:function(){return this._values.concat()}}}),y.prototype=Object.create(Error.prototype),y.prototype.constructor=y,w.prototype=Object.create(Object.prototype),w.prototype.constructor=w,w.prototype.equals=function(e){return e===this||!!(e instanceof w)&&e.toString()===this.toString()&&e.valueOf()===this.valueOf()},w.prototype.toString=function(){return this._name},w.prototype.valueOf=function(){return this._value},E.prototype=Object.create(w.prototype),E.prototype.constructor=E,Object.defineProperties(E,{ALL:{value:new E(1,'ALL'),enumerable:!0},CRITICAL:{value:new E(16,'CRITICAL'),enumerable:!0},DEBUG:{value:new E(2,'DEBUG'),enumerable:!0},DEFAULT_LEVEL_STRING:{value:'UNKNOWN',enumerable:!0},ERROR:{value:new E(8,'ERROR'),enumerable:!0},INFO:{value:new E(4,'INFO'),enumerable:!0},NONE:{value:new E(0,'NONE'),enumerable:!0},WARNING:{value:new E(6,'WARNING'),enumerable:!0},WTF:{value:new E(32,'WTF'),enumerable:!0},get:{value:function(e){let t=[E.ALL,E.CRITICAL,E.DEBUG,E.ERROR,E.INFO,E.NONE,E.WARNING,E.WTF],n=t.length;for(;-1<--n;)if(t[n]._value===e)return t[n];return null}},getLevelString:{value:function(e){return E.validate(e)?e.toString():E.DEFAULT_LEVEL_STRING}},validate:{value:function(e){let t=[E.ALL,E.CRITICAL,E.DEBUG,E.ERROR,E.INFO,E.NONE,E.WARNING,E.WTF];return-1<t.indexOf(e)}}}),A.prototype=Object.create(Object.prototype),A.prototype.constructor=A,S.prototype=Object.create(i.prototype,{constructor:{writable:!0,value:S},channel:{get:function(){return this._entry.channel}},critical:{value:function(e,...t){this._log(E.CRITICAL,e,t)}},debug:{value:function(e,...t){this._log(E.DEBUG,e,t)}},error:{value:function(e,...t){this._log(E.ERROR,e,t)}},info:{value:function(e,...t){this._log(E.INFO,e,t)}},log:{value:function(e,...t){this._log(E.ALL,e,t)}},warning:{value:function(e,...t){this._log(E.WARNING,e,t)}},wtf:{value:function(e,...t){this._log(E.WTF,e,t)}},toString:{value:function(){return'[Logger]'}},_log:{value:function(e,t,n){if(this.connected()){if(('string'==typeof t||t instanceof String)&&n instanceof Array)for(var a=n.length,r=0;r<a;r++)t=(t+'').replace(new RegExp('\\{'+r+'\\}','g'),n[r]);this._entry.message=t,this._entry.level=e,this.emit(this._entry)}}}}),L.prototype=Object.create(Error.prototype),L.prototype.constructor=L;var Bt=Object.defineProperties({},{CHARS_INVALID:{value:'The following characters are not valid: []~$^&/(){}<>+=_-`!@#%?,:;\'\\',enumerable:!0},CHAR_PLACEMENT:{value:'\'*\' must be the right most character.',enumerable:!0},EMPTY_FILTER:{value:'filter must not be null or empty.',enumerable:!0},ERROR_FILTER:{value:'Error for filter \'{0}\'.',enumerable:!0},DEFAULT_CHANNEL:{value:'',enumerable:!0},ILLEGALCHARACTERS:{value:'[]~$^&/\\(){}<>+=`!#%?,:;\'"@',enumerable:!0},INVALID_CHARS:{value:'Channels can not contain any of the following characters : []~$^&/\\(){}<>+=`!#%?,:;\'"@',enumerable:!0},INVALID_LENGTH:{value:'Channels must be at least one character in length.',enumerable:!0},INVALID_TARGET:{value:'Log, Invalid target specified.',enumerable:!0}});T.prototype=Object.create(n.prototype,{constructor:{value:T,writable:!0},factory:{get:function(){return this._factory},set:function(e){this._factory&&this._factory.removeTarget(this),this._factory=e instanceof O?e:Kt,this._factory.addTarget(this)}},filters:{get:function(){return[].concat(this._filters)},set:function(e){let t=[];if(e&&e instanceof Array&&0<e.length){let a,r=e.length;for(var n=0;n<r;n++)a=e[n],-1===t.indexOf(a)&&(this._checkFilter(a),t.push(a))}else t.push('*');0<this._count&&this._factory.removeTarget(this),this._filters=t,0<this._count&&this._factory.addTarget(this)}},level:{get:function(){return this._level},set:function(e){this._factory.removeTarget(this),this._level=e||E.ALL,this._factory.addTarget(this)}},addFilter:{value:function(e){this._checkFilter(e);let t=this._filters.indexOf(e);return-1===t&&(this._filters.push(e),!0)}},addLogger:{value:function(e){e&&e instanceof S&&(this._count++,e.connect(this))}},logEntry:{value:function(){}},receive:{value:function(e){if(e instanceof A){if(this._level===E.NONE)return;e.level.valueOf()>=this._level.valueOf()&&this.logEntry(e)}}},removeFilter:{value:function(e){if(e&&('string'==typeof e||e instanceof String)&&''!==e){let t=this._filters.indexOf(e);if(-1<t)return this._filters.splice(t,1),!0}return!1}},removeLogger:{value:function(e){e instanceof S&&(this._count--,e.disconnect(this))}},_checkFilter:{value:function(e){if(null===e)throw new L(Bt.EMPTY_FILTER);if(this._factory.hasIllegalCharacters(e))throw new L(R(Bt.ERROR_FILTER,e)+Bt.CHARS_INVALID);var t=e.indexOf('*');if(0<=t&&t!==e.length-1)throw new L(R(Bt.ERROR_FILTER,e)+Bt.CHAR_PLACEMENT)}},toString:{value:function(){return'[LoggerTarget]'}}}),O.prototype=Object.create(n.prototype,{constructor:{value:O},addTarget:{value:function(e){if(e&&e instanceof T){for(let t,n,a=e.filters,r=this._loggers.iterator();r.hasNext();)n=r.next(),t=r.key(),this._channelMatchInFilterList(t,a)&&e.addLogger(n);this._targets.push(e),(this._targetLevel===E.NONE||e.level.valueOf()<this._targetLevel.valueOf())&&(this._targetLevel=e.level)}else throw new Error(Bt.INVALID_TARGET)}},flush:{value:function(){this._loggers.clear(),this._targets=[],this._targetLevel=E.NONE}},getLogger:{value:function(e){this._checkChannel(e);let t=this._loggers.get(e);t||(t=new S(e),this._loggers.set(e,t));let n,a=this._targets.length;for(var r=0;r<a;r++)n=this._targets[r],this._channelMatchInFilterList(e,n.filters)&&n.addLogger(t);return t}},hasIllegalCharacters:{value:function(e){return-1!==p(e,Bt.ILLEGALCHARACTERS.split(''))}},isAll:{value:function(){return this._targetLevel===E.ALL}},isCritical:{value:function(){return this._targetLevel===E.CRITICAL}},isDebug:{value:function(){return this._targetLevel===E.DEBUG}},isError:{value:function(){return this._targetLevel===E.ERROR}},isInfo:{value:function(){return this._targetLevel===E.INFO}},isWarning:{value:function(){return this._targetLevel===E.WARNING}},isWtf:{value:function(){return this._targetLevel===E.WTF}},removeTarget:{value:function(e){if(e&&e instanceof T){for(var t,n=e.filters,a=this._loggers.iterator();a.hasNext();){t=a.next();var r=a.key();this._channelMatchInFilterList(r,n)&&e.removeLogger(t)}for(var l=this._targets.length,o=0;o<l;o++)e===this._targets[o]&&(this._targets.splice(o,1),o--);this._resetTargetLevel()}else throw new Error(Bt.INVALID_TARGET)}},toString:{value:function(){return'[LoggerFactory]'}},_channelMatchInFilterList:{value:function(e,t){let n,a=-1,r=t.length;for(var l=0;l<r;l++){if(n=t[l],a=n.indexOf('*'),0===a)return!0;if(a=0>a?a=e.length:a-1,e.substring(0,a)===n.substring(0,a))return!0}return!1}},_checkChannel:{value:function(e){if(null===e||0===e.length)throw new y(Bt.INVALID_LENGTH);if(this.hasIllegalCharacters(e)||-1!==e.indexOf('*'))throw new y(Bt.INVALID_CHARS)}},_resetTargetLevel:{value:function(){let e,t=E.NONE,n=this._targets.length;for(let a=0;a<n;a++)e=this._targets[a],(t===E.NONE||e.level.valueOf()<t.valueOf())&&(t=e.level);this._targetLevel=t}}});var Kt=new O;I.prototype=Object.create(T.prototype,{constructor:{value:I,writable:!0},internalLog:{value:function(){}},toString:{writable:!0,value:function(){return'['+this.constructor.name+']'}},logEntry:{value:function(e){var t=this.formatMessage(e.message,E.getLevelString(e.level),e.channel,new Date);this.internalLog(t,e.level)}},resetLineNumber:{value:function(){this._lineNumber=1}},formatDate:{value:function(e){var t='';return t+=this.getDigit(e.getDate()),t+='/'+this.getDigit(e.getMonth()+1),t+='/'+e.getFullYear(),t}},formatLevel:{value:function(e){return'['+e+']'}},formatLines:{value:function(){return'['+this._lineNumber++ +']'}},formatMessage:{value:function(e,t,n,a){var r='';return this.includeLines&&(r+=this.formatLines()+this.separator),(this.includeDate||this.includeTime)&&(a=a||new Date,this.includeDate&&(r+=this.formatDate(a)+this.separator),this.includeTime&&(r+=this.formatTime(a)+this.separator)),this.includeLevel&&(r+=this.formatLevel(t||'')+this.separator),this.includeChannel&&(r+=(n||'')+this.separator),r+=e,r}},formatTime:{value:function(e){var t='';return t+=this.getDigit(e.getHours()),t+=':'+this.getDigit(e.getMinutes()),t+=':'+this.getDigit(e.getSeconds()),this.includeMilliseconds&&(t+=':'+this.getDigit(e.getMilliseconds())),t}},getDigit:{value:function(e){return isNaN(e)?'00':(10>e?'0':'')+e}}}),C.prototype=Object.create(I.prototype,{constructor:{value:C},internalLog:{value:function(e,t){if(console)switch(t){case E.CRITICAL:{console.trace(e);break}case E.DEBUG:{console.log(e);break}case E.ERROR:{console.error(e);break}case E.INFO:{console.info(e);break}case E.WARNING:{console.warn(e);break}default:case E.ALL:{console.log(e);break}}else throw new new ReferenceError('The console reference is unsupported.')}}});var qt=new C({includeChannel:!0,includeDate:!1,includeLevel:!0,includeLines:!0,includeMilliseconds:!0,includeTime:!0});qt.filters=['*'],qt.level=E.ALL;var Wt=Kt.getLogger(Ht.name),Xt=(e)=>!!e&&('HTMLElement'in window?e&&e instanceof HTMLElement:!!(e&&'object'==typeof obj&&'nodeType'in e&&1===e.nodeType&&e.nodeName));F.prototype=Object.create(d.prototype,{constructor:{writable:!0,value:F},bubbles:{get:function(){return this._bubbles}},cancelable:{get:function(){return this._cancelable}},currentTarget:{get:function(){return this._currentTarget}},eventPhase:{get:function(){return this._eventPhase}},target:{get:function(){return this._target}},timestamp:{value:new Date().valueOf()},type:{get:function(){return this._type}},clone:{writable:!0,value:function(){return new F(this._type,this._bubbles,this._cancelable)}},isDefaultPrevented:{value:function(){return this._defaultPrevented}},isImmediatePropagationStopped:{value:function(){return this._immediatePropagationStopped}},isPropagationStopped:{value:function(){return this._propagationStopped}},preventDefault:{value:function(){this._cancelable&&(this._defaultPrevented=!0)}},stopImmediatePropagation:{value:function(){this._immediatePropagationStopped=!0}},stopPropagation:{value:function(){this._propagationStopped=!0}},toString:{writable:!0,value:function(){return this.formatToString(null,'type','bubbles','cancelable')}},withTarget:{value:function(e){var t=this.target?this.clone():this;return t._target=e,t}},withCurrentTarget:{value:function(e){return this._currentTarget=e,this}}}),Object.defineProperties(F,{ACTIVATE:{value:'activate'},ADDED:{value:'added'},ADDED_TO_STAGE:{value:'addedToStage'},CANCEL:{value:'cancel'},CHANGE:{value:'change'},CLEAR:{value:'clear'},CLICK:{value:'click'},CLOSE:{value:'close'},COMPLETE:{value:'complete'},CONNECT:{value:'connect'},COPY:{value:'copy'},CUT:{value:'cut'},DEACTIVATE:{value:'deactivate'},FULLSCREEN:{value:'fullScreen'},INIT:{value:'init'},OPEN:{value:'open'},PASTE:{value:'paste'},REMOVED:{value:'removed'},REMOVED_FROM_STAGE:{value:'removedFromStage'},RENDER:{value:'render'},RESIZE:{value:'resize'},SCROLL:{value:'scroll'},SELECT:{value:'select'},UNLOAD:{value:'unload'}}),P.prototype=Object.create(Object.prototype,{constructor:{writable:!0,value:P},handleEvent:{writable:!0,value:function(){}},toString:{writable:!0,value:function(){return'['+this.constructor.name+']'}}});var Zt=Object.defineProperties({},{AT_TARGET:{value:2,enumerable:!0},BUBBLING_PHASE:{value:3,enumerable:!0},CAPTURING_PHASE:{value:1,enumerable:!0},NONE:{value:0,enumerable:!0}});x.prototype=Object.create(Object.prototype,{constructor:{writable:!0,value:x},addEventListener:{writable:!0,value:function(e=!1,t=0){}},dispatchEvent:{writable:!0,value:function(){}},hasEventListener:{writable:!0,value:function(){}},removeEventListener:{writable:!0,value:function(e=!1){}},willTrigger:{writable:!0,value:function(){}}}),D.prototype=Object.create(x.prototype,{constructor:{writable:!0,value:D},addEventListener:{writable:!0,value:function(e,t,n=!1,a=0){if(!(e instanceof String||'string'==typeof e))throw new TypeError(this+' addEventListener failed, the type argument must be a valid String expression.');if(!(t instanceof Function||t instanceof P))throw new TypeError(this+' addEventListener failed, the listener must be a valid Function or EventListener reference.');let r=n?this._captureListeners:this._listeners,i={type:e,listener:t,useCapture:n,priority:a};e in r?r[e].push(i):r[e]=[i],r[e].sort(this.compare)}},dispatchEvent:{writable:!0,value:function(e){if(!(e instanceof F))throw new TypeError(this+' dispatchEvent failed, the event argument must be a valid Event object.');e=e.withTarget(this.target||this);let t=this.createAncestorChain();if(e._eventPhase=Zt.CAPTURING_PHASE,D.internalHandleCapture(e,t),!e.isPropagationStopped()){e._eventPhase=Zt.AT_TARGET,e.withCurrentTarget(e._target);let t=this._listeners[e.type];this._listeners[e.type]&&D.processListeners(e,t)}return e.bubbles&&!e.isPropagationStopped()&&(e._eventPhase=Zt.BUBBLING_PHASE,D.internalHandleBubble(e,t)),!e.isDefaultPrevented()}},hasEventListener:{writable:!0,value:function(e){return!!(this._listeners[e]||this._captureListeners[e])}},removeEventListener:{writable:!0,value:function(e,t,n=!1){if(!(e instanceof String||'string'==typeof e))throw new TypeError(this+' removeEventListener failed, the type must be a valid String expression.');if(!(t instanceof Function||t instanceof P))throw new TypeError(this+' removeEventListener failed, the listener must be a valid Function or EventListener reference.');let a=n?this._captureListeners:this._listeners,r=a[e];if(r&&0<r.length){let n=r.length;for(let l=0;l<n;++l)if(r[l].listener===t){1===n?delete a[e]:r.splice(l,1);break}}}},toString:{writable:!0,value:function(){let e='['+this.constructor.name;return this.target&&(e+=' target:'+this.target),e+']'}},willTrigger:{writable:!0,value:function(e){let t=this.createAncestorChain();if(t instanceof Array&&0<t.length)for(let n,a=t.length;-1<--a;)if(n=t[a],n instanceof x&&n.hasEventListener(e))return!0;return this.hasEventListener(e)}},createAncestorChain:{writable:!0,value:function(){return null}},compare:{value:function(e,t){return e.priority>t.priority?-1:e.priority<t.priority?1:0}},processCapture:{value:function(e){e.withCurrentTarget(this.target||this);let t=this._captureListeners[e.type];t&&D.processListeners(e,t)}},processBubble:{value:function(e){e.withCurrentTarget(this.target||this);let t=this._listeners[e.type];t&&D.processListeners(e,t)}}}),Object.defineProperties(D,{processListeners:{value:function(e,t){if(t instanceof Array&&0<t.length){let n,a=t.length;for(let r=0;r<a;++r){n=t[r].listener;let a;if(n instanceof P?a=n.handleEvent(e):n instanceof Function&&(a=n(e)),!1===a&&(e.stopPropagation(),e.preventDefault()),e.isImmediatePropagationStopped())break}}}},internalHandleCapture:{value:function(e,t){if(!(t instanceof Array)||0>=t.length)return;let n,a=t.length-1;for(let r=a;0<=r&&(n=t[r],n.processCapture(e),!e.isPropagationStopped());r--);}},internalHandleBubble:{value:function(e,t){if(!t||0>=t.length)return;let n,a=t.length;for(let r=0;r<a&&(n=t[r],n.processBubble(e),!e.isPropagationStopped());r++);}}}),k.prototype=Object.create(D.prototype,{constructor:{value:k,writable:!0},base:{get:function(){let e=this;for(;e._parent;)e=e._parent;return e}},id:{get:function(){return this._id},set:function(e){this._id=N(e)?e:null,this._element&&this.setAttribute('id',e)}},parent:{get:function(){return this._parent}},root:{get:function(){let e=this;for(;e._parent;){if(e._parent.__isStage)return e;e=e._parent}return e}},stage:{get:function(){let e=this.base;return e&&e.__isStage?e:null}},dispose:{value:function(){}},removeFromParent:{value:function(){this._parent&&this._parent.removeChild(this)}},createAncestorChain:{value:function(){let e=[],t=this;for(;t._parent;)e.push(t._parent),t=t._parent;return e}},setParent:{value:function(e){let t=e;for(;t!==this&&null!==t;)t=t._parent;if(t===this)throw new ReferenceError('An object cannot be added as a child to itself or one of its children.');else this._parent=e}}}),M.prototype=Object.create(k.prototype,{constructor:{value:M,writable:!0},children:{get:function(){return this._children}},numChildren:{get:function(){return this._children.length}},addChild:{value:function(e){return this.addChildAt(e,this._children.length)}},addChildAt:{value:function(e,t){if(e instanceof k){let n=this._children.length;if(0<=t&&t<=n){if(e.parent===this)this.setChildIndex(e,t);else if(t>=n?(this._children.push(e),this._appendChild(e)):(this._children.splice(t,0,e),this._insertChildAt(e,t)),e.removeFromParent(),e.setParent(this),e.dispatchEvent(new F(F.ADDED,!0)),this.stage){let t=new F(F.ADDED_TO_STAGE);e instanceof M?e.broadcastEvent(t):e.dispatchEvent(t)}return e}throw new RangeError(this+' addChildAt('+t+') failed, invalid child index.')}return null}},contains:{value:function(e){for(;e;){if(e===this)return!0;e=e._parent}return!1}},getChildAt:{value:function(e){let t=this._children.length;if(0>e&&(e=t+e),0<=e&&e<t)return this._children[e];throw new RangeError('Invalid child index')}},getChildIndex:{value:function(e){return this._children.indexOf(e)}},removeChild:{value:function(e,t=!1){let n=this.getChildIndex(e);return-1===n?null:this.removeChildAt(n,t)}},removeChildAt:{value:function(e,t=!1){if(0<=e&&e<this._children.length){let n=this._children[e];if(n.dispatchEvent(new F(F.REMOVED,!0)),this.stage){let e=new F(F.REMOVED_FROM_STAGE);n instanceof M?n.broadcastEvent(e):n.dispatchEvent(e)}return n.setParent(null),e=this._children.indexOf(n),0<=e&&(this._children.splice(e,0,n),this._removeChild(n)),!0===t&&n.dispose(),n}throw new RangeError(this+' removeChildAt failed with an invalid child index')}},removeChildren:{value:function(e=0,t=-1,n=!1){let a=this._children.length;(0>t||t>=a)&&(t=a-1);let r=this._children.slice(e,t-e+1);a=r.length;for(let l=0;l<=a;l++)this.removeChild(r[l],n)}},setChildIndex:{value:function(e,t){if(e instanceof Node){let n=this.getChildIndex(e);if(n===t)return;if(-1===n)throw new Error(this+' setChildIndex failed, the passed-in child reference is not a child of this container.');this._children.splice(n,1),this._children.splice(t,0,e),this._element&&(t>=this._children.length?this._element.appendChild(e._element):this._element.insertBefore(e._element,this._element.children[t]))}}},broadcastEvent:{value:function(e){if(!(e instanceof F))throw new ReferenceError(this+' broadcastEvent failed, the event parameter must be a valid system.events.Event reference.');if(e.bubbles)throw new ReferenceError('Broadcast of bubbling events is prohibited');let t=this._broadcastListeners.length;this.getChildEventListeners(this,e.type,this._broadcastListeners);let n=this._broadcastListeners.length;for(let a=t;a<n;a++)this._broadcastListeners[a].dispatchEvent(e);this._broadcastListeners.length=t}},getChildEventListeners:{value:function(e,t,n){try{if(e.hasEventListener(t)&&(n[n.length]=e),e instanceof M){let a=e._children,r=a.length;for(let e=0;e<r;e++)this.getChildEventListeners(a[e],t,n)}}catch(t){console.log(this+' error '+t)}}},_appendChild:{writable:!0,value:function(){}},_insertChildAt:{writable:!0,value:function(){}},_removeChild:{writable:!0,value:function(){}}}),z.prototype=Object.create(M.prototype,{constructor:{value:z,writable:!0},addClass:{value:function(e){this._element.classList.contains(e)||this._element.classList.add(e)}},id:{get:function(){return this._element.id},set:function(e){this._element.id=e}},class:{get:function(){return this.getAttribute('class')},set:function(e){this.setAttribute('class',e)}},element:{get:function(){return this._element},set:function(e){this._element=null,Xt(e)?this._element=e:N(e)&&(this._element=document.getElementById(e))}},getAttribute:{value:function(e){return this._element?this._element.getAttribute(e):null}},removeClass:{value:function(e){this._element.classList.contains(e)&&this._element.classList.remove(e)}},setAttribute:{value:function(e,t){this._element&&this._element.setAttribute(e,t)}},_appendChild:{writable:!0,value:function(e){e&&e._element&&this._element&&this._element.appendChild(e._element)}},_insertChildAt:{writable:!0,value:function(e,t){this._element&&e&&e._element&&this._element.insertBefore(e._element,this._element.children[t])}},_removeChild:{writable:!0,value:function(e){e&&e._element&&e._element.parentNode.removeChild(e._element)}}}),j.prototype=Object.create(z.prototype,{constructor:{value:j,writable:!0},height:{get:function(){return this.getAttribute('height')},set:function(e){this.setAttribute('height',e)}},src:{get:function(){return this.getAttribute('src')},set:function(e){this.setAttribute('src',e)}},width:{get:function(){return this.getAttribute('width')},set:function(e){this.setAttribute('width',e)}}});const $t=Kt.getLogger('molecule.logging.logger');U.prototype=Object.create(z.prototype,{constructor:{value:U,writable:!0},_error:{value:function(e){$t.error(this+' error, '+e)}},_loaded:{value:function(e){$t.debug(this+' loaded, '+e)}}});var Jt=(e,t,n)=>isNaN(e)?NaN:(isNaN(t)&&(t=e),isNaN(n)&&(n=e),Lt(Rt(e,n),t));G.prototype=Object.create(z.prototype,{constructor:{value:G,writable:!0},alpha:{get:function(){return this.getAttribute('opacity')},set:function(e){this.setAttribute('opacity',Jt(e,0,1))}},dispose:{value:function(){this.removeEventListener(F.ADDED_TO_STAGE,this._addedToStage),this.removeEventListener(F.REMOVED_FROM_STAGE,this._removedFromStage)}},geometry:{get:function(){return this.getAttribute('geometry')},set:function(e){this.setAttribute('geometry',e)}},raycasted:{get:function(){return this._element.classList.contains(this._raycast)},set:function(e){!0===e?this._element.classList.add(this._raycast):this._element.classList.contains(this._raycast)&&this._element.classList.remove(this._raycast)}},raycast:{get:function(){return this._raycast},set:function(e){e!==this._raycast&&(this.raycasted=!1),this._raycast=e,this.raycasted=!0}},opacity:{get:function(){return this.getAttribute('opacity')},set:function(e){this.setAttribute('opacity',Jt(e,0,1))}},position:{get:function(){return this._position},set:function(e){'x'in e&&(this._position.x=e.x),'y'in e&&(this._position.y=e.y),'z'in e&&(this._position.z=e.z),this.setAttribute('position',this._position.x+' '+this._position.y+' '+this._position.z)}},rotation:{get:function(){return this._rotation},set:function(e){'x'in e&&(this._rotation.x=e.x),'y'in e&&(this._rotation.y=e.y),'z'in e&&(this._rotation.z=e.z),this.setAttribute('position',this._rotation.x+' '+this._rotation.y+' '+this._rotation.z)}},rotationX:{get:function(){return this._rotation.x},set:function(e){this._rotation.x=e,this.setAttribute('rotation',this._rotation.x+' '+this._rotation.y+' '+this._rotation.z)}},rotationY:{get:function(){return this._rotation.y},set:function(e){this._rotation.y=e,this.setAttribute('rotation',this._rotation.x+' '+this._rotation.y+' '+this._rotation.z)}},rotationZ:{get:function(){return this._rotation.z},set:function(e){this._rotation.z=e,this.setAttribute('rotation',this._rotation.x+' '+this._rotation.y+' '+this._rotation.z)}},scale:{get:function(){return this._scale},set:function(e){'x'in e&&(this._scale.x=e.x),'y'in e&&(this._scale.y=e.y),'z'in e&&(this._scale.z=e.z),this.setAttribute('scale',this._scale.x+' '+this._scale.y+' '+this._scale.z)}},scaleX:{get:function(){return this._scale.x},set:function(e){this._scale.x=e,this.setAttribute('scale',this._scale.x+' '+this._scale.y+' '+this._scale.z)}},scaleY:{get:function(){return this._scale.y},set:function(e){this._scale.y=e,this.setAttribute('scale',this._scale.x+' '+this._scale.y+' '+this._scale.z)}},scaleZ:{get:function(){return this._scale.z},set:function(e){this._scale.z=e,this.setAttribute('scale',this._scale.x+' '+this._scale.y+' '+this._scale.z)}},visible:{get:function(){return'true'===this.getAttribute('visible')},set:function(e){this.setAttribute('visible',!0===e?'true':'false')}},x:{get:function(){return this._position.x},set:function(e){this._position.x=e,this.setAttribute('position',this._position.x+' '+this._position.y+' '+this._position.z)}},y:{get:function(){return this._position.y},set:function(e){this._position.y=e,this.setAttribute('position',this._position.x+' '+this._position.y+' '+this._position.z)}},z:{get:function(){return this._position.z},set:function(e){this._position.z=e,this.setAttribute('position',this._position.x+' '+this._position.y+' '+this._position.z)}},notifyAddedToStage:{value:function(){this.addedToStage.emit(this)}},notifyRemovedFromStage:{value:function(){this.removedFromStage.emit(this)}},setAttribute:{value:function(e,t,n){this._element&&this._element.setAttribute(e,t,n)}},__addedToStage:{value:function(){this._onStage=!0,this.notifyAddedToStage()}},__removedFromStage:{value:function(){this._onStage=!1,this.notifyRemovedFromStage()}}}),Y.prototype=Object.create(G.prototype,{constructor:{value:Y,writable:!0},autoplay:{get:function(){return this._requestPlay},set:function(e){this._requestPlay=!0===e}},loop:{get:function(){return this.getAttribute('sound').loop},set:function(e){this.setAttribute('sound','loop',e)}},phase:{get:function(){return this._phase}},running:{get:function(){return this._running}},notifyFinished:{writable:!0,value:function(){this._running=!1,this.finishIt.emit(this)}},notifyStarted:{writable:!0,value:function(){this._running=!0,this.startIt.emit(this)}},play:{value:function(){!0===this._onStage&&!1===this._playing?setTimeout(this.__playSound.bind(this),100):this._requestPlay=!0}},pause:{value:function(){!0===this._onStage&&!0===this._playing&&(this._element.components.sound.pauseSound(),this._playing=!1)}},stop:{value:function(){!0===this._onStage&&!0===this._playing&&(this._ended&&(this._element.removeEventListener('sound-ended',this._ended),this._ended=!1),this._element.components.sound.stopSound(),this._playing=!1)}},src:{get:function(){return this.getAttribute('sound').src},set:function(e){this.setAttribute('sound','src',e)}},volume:{get:function(){return this.getAttribute('sound').volume},set:function(e){this.setAttribute('sound','volume',e)}},__addedToStage:{value:function(){this._onStage=!0,!0===this._requestPlay&&(this._requestPlay=!1,this.play())}},__playSound:{value:function(){!0===this._onStage&&!1===this._playing&&(this._playing=!0,this.notifyStarted(),this._ended=this.__ended.bind(this),this._element.addEventListener('sound-ended',this._ended),this._element.components.sound.playSound())}},__removedFromStage:{value:function(){this._onStage=!1,this._ended&&(this._element.removeEventListener('sound-ended',this._ended),this._ended=!1),!0===this._playing&&this.stop()}},__ended:{value:function(){this._playing=!1,this._element.removeEventListener('sound-ended',this._ended),this._ended=null,this.notifyFinished()}}});H.prototype=Object.create(Object.prototype,{constructor:{writable:!0,value:H},run:{writable:!0,value:function(){}},toString:{writable:!0,value:function(){return'['+this.constructor.name+']'}}});var Qt=Object.defineProperties({},{ERROR:{value:'error',enumerable:!0},DELAYED:{value:'delayed',enumerable:!0},FINISHED:{value:'finished',enumerable:!0},INACTIVE:{value:'inactive',enumerable:!0},RUNNING:{value:'running',enumerable:!0},STOPPED:{value:'stopped',enumerable:!0},TIMEOUT:{value:'timeout',enumerable:!0}});V.prototype=Object.create(H.prototype,{constructor:{writable:!0,value:V},phase:{get:function(){return this._phase}},running:{get:function(){return this._running}},clone:{writable:!0,value:function(){return new V}},isLocked:{writable:!0,value:function(){return this.__lock__}},lock:{writable:!0,value:function(){this.__lock__=!0}},notifyFinished:{writable:!0,value:function(){this._running=!1,this._phase=Qt.FINISHED,this.finishIt.emit(this),this._phase=Qt.INACTIVE}},notifyStarted:{writable:!0,value:function(){this._running=!0,this._phase=Qt.RUNNING,this.startIt.emit(this)}},unlock:{writable:!0,value:function(){this.__lock__=!1}}}),B.prototype=Object.create(V.prototype,{constructor:{writable:!0,value:B},clone:{writable:!0,value:function(){return new B}},notifyChanged:{writable:!0,value:function(){this.__lock__||this.changeIt.emit(this)}},notifyCleared:{writable:!0,value:function(){this.__lock__||this.clearIt.emit(this)}},notifyError:{writable:!0,value:function(e=null){if(this._running=!1,this._phase=Qt.ERROR,this.__lock__||this.errorIt.emit(this,e),this.throwError)throw new Error(e)}},notifyInfo:{writable:!0,value:function(e){this.__lock__||this.infoIt.emit(this,e)}},notifyLooped:{writable:!0,value:function(){this._running=!0,this._phase=Qt.RUNNING,this.__lock__||this.loopIt.emit(this)}},notifyPaused:{writable:!0,value:function(){this._running=!1,this._phase=Qt.STOPPED,this.__lock__||this.pauseIt.emit(this)}},notifyProgress:{writable:!0,value:function(){this._running=!0,this._phase=Qt.RUNNING,this.__lock__||this.progressIt.emit(this)}},notifyResumed:{writable:!0,value:function(){this._running=!0,this._phase=Qt.RUNNING,this.__lock__||this.resumeIt.emit(this)}},notifyStopped:{writable:!0,value:function(){this._running=!1,this._phase=Qt.STOPPED,this.__lock__||this.stopIt.emit(this)}},notifyTimeout:{writable:!0,value:function(){this._running=!1,this._phase=Qt.TIMEOUT,this.__lock__||this.timeoutIt.emit(this)}},resume:{writable:!0,value:function(){}},reset:{writable:!0,value:function(){}},start:{writable:!0,value:function(){this.run()}},stop:{writable:!0,value:function(){}}}),K.prototype=Object.create(B.prototype,{constructor:{value:K,writable:!0},currentCount:{get:function(){return this._count}},delay:{get:function(){return this._delay},set:function(e){if(this._running)throw new Error(this+' the \'delay\' property can\'t be changed during the running phase.');this._delay=0<e?e:0}},repeatCount:{get:function(){return this._repeatCount},set:function(e){this._repeatCount=0<e?e:0}},stopped:{get:function(){return this._stopped}},useSeconds:{get:function(){return this._useSeconds},set:function(e){if(this._running)throw new Error(this+' the \'useSeconds\' property can\'t be changed during the running phase.');this._useSeconds=!!e}},clone:{value:function(){return new K(this._delay,this._repeatCount)}},resume:{value:function(){this._stopped&&(this._running=!0,this._stopped=!1,this._itv=setInterval(this._next.bind(this),this._useSeconds?1e3*this._delay:this._delay),this.notifyResumed())}},reset:{value:function(){this.running&&this.stop(),this._count=0}},run:{value:function(){this._running||(this._count=0,this._stopped=!1,this.notifyStarted(),this._itv=setInterval(this._next.bind(this),this._useSeconds?1e3*this._delay:this._delay))}},stop:{value:function(){this._running&&!this._stopped&&(this._running=!1,this._stopped=!0,clearInterval(this._itv),this.notifyStopped())}},_next:{value:function(){this._count++,this.notifyProgress(),0<this._repeatCount&&this._repeatCount===this._count&&(clearInterval(this._itv),this.notifyFinished())}}}),q.prototype=Object.create(G.prototype,{constructor:{writable:!0,value:q},duration:{get:function(){return this._timer.delay},set:function(e){this._timer.delay=e}},dispose:{value:function(){this.removeEventListener('addedToStage',this._addedToStage),this.removeEventListener('removedFromStage',this._removedFromStage)}},enabled:{get:function(){return this._enabled},set:function(e){this._enabled=!0===e,!0===this._enabled?!0===this._onStage&&!1===this._launchedRaycaster&&this.launchRaycaster():!0===this._launchedRaycaster&&this.stopRaycaster()}},objects:{get:function(){return this._objects},set:function(e){N(this._objects)&&''!==this._objects?(this._objects=e,this.setAttribute('raycaster','objects','.'+this._objects)):(this._objects='',this.setAttribute('raycaster',''))}},notifyClick:{value:function(){this._target&&(this.click.connected&&this.click.emit(this._target,this),this._target.dispatchEvent(new Event('click')))}},notifyDown:{value:function(){this.down.connected&&this.down.emit(this._target,this),this._target.dispatchEvent(new Event('mousedown'))}},notifyOver:{value:function(){this._target&&(this.over.connected&&this.over.emit(this._target,this),this._target.dispatchEvent(new Event('mouseenter')),this._timer.run())}},notifyOut:{value:function(){this._timer.running&&this._timer.stop(),this._target&&(this.out.connected&&this.out.emit(this._target,this),this._target.dispatchEvent(new Event('mouseleave')))}},notifyUp:{value:function(){this.up.connected&&this.up.emit(this._target,this),this._target.dispatchEvent(new Event('mouseup'))}},useSeconds:{get:function(){return this._timer.useSeconds},set:function(e){this._timer.useSeconds=e}},__addedToStage:{value:function(){this._onStage=!0,!0===this._enabled&&!1===this._launchedRaycaster&&this.launchRaycaster()}},__removedFromStage:{value:function(){this._onStage=!1,!0===this._launchedRaycaster&&this.stopRaycaster()}},launchRaycaster:{value:function(){this._notifyClick=this.notifyClick.bind(this),this._intersection=this.intersection.bind(this),this._intersectionCleared=this.intersectionCleared.bind(this),this._mouseDown=this.notifyDown.bind(this),this._mouseUp=this.notifyUp.bind(this),this._timer.finishIt.connect(this._notifyClick),this.element.addEventListener('raycaster-intersection',this._intersection),this.element.addEventListener('raycaster-intersection-cleared',this._intersectionCleared),this._launchedRaycaster=!0}},stopRaycaster:{value:function(){this.element.removeEventListener('raycaster-intersection',this._intersection),this.element.removeEventListener('raycaster-intersection-cleared',this._intersectionCleared),this._timer.finishIt.disconnect(),this._notifyClick=null,this._intersection=null,this._intersectionCleared=null,this._mouseDown=null,this._mouseUp=null,this._launchedRaycaster=!1}},intersection:{value:function(e){let t,n,a=this.element;t=e.detail.els[0]===a?1:0,n=e.detail.els[t],n&&n!==this._target&&(this._target&&this.notifyOut(),this._target=n,this.notifyOver())}},intersectionCleared:{value:function(e){let t=this.element,n=e.detail.el;t===n||n!==this._target||(this.notifyOut(),this._target=null)}}}),W.prototype=Object.create(G.prototype,{constructor:{value:W,writable:!0},color:{get:function(){return this.getAttribute('color')},set:function(e){this.setAttribute('color',e)}},shader:{get:function(){return this.getAttribute('shader')},set:function(e){this.setAttribute('shader',e)}},side:{get:function(){return this.getAttribute('side')},set:function(e){this.setAttribute('side',e)}},src:{get:function(){return this.getAttribute('src')},set:function(e){this.setAttribute('src',e)}}}),X.prototype=Object.create(W.prototype,{constructor:{value:X,writable:!0},radius:{get:function(){return this.getAttribute('geometry').radius},set:function(e){this.setAttribute('geometry','radius',e)}},thetaLength:{get:function(){return this.getAttribute('geometry').thetaLength},set:function(e){this.setAttribute('geometry','thetaLength',e)}},thetaStart:{get:function(){return this.getAttribute('geometry').thetaStart},set:function(e){this.setAttribute('geometry','thetaStart',e)}}}),Z.prototype=Object.create(n.prototype,{constructor:{writable:!0,value:Z},receive:{value:function(e){try{if(!this.sound)throw new Error('sound');if(!this.tweenOver)throw new Error('tweenOver');if(!this.tweenOut)throw new Error('tweenOut')}catch(e){return void Wt.warning(R(this+' run failed, the {0} reference not must be null.',e.message))}Ht.debug&&Ht.verbose&&Wt.debug(this+' receive : '+e),this.tweenOut.running&&this.tweenOut.stop(),this.sound.play(),this.tweenOver.run()}}}),$.prototype=Object.create(n.prototype,{constructor:{writable:!0,value:$},receive:{writable:!0,value:function(e){try{if(!this.tweenOver)throw new Error('tweenOver');if(!this.tweenOut)throw new Error('tweenOut')}catch(e){return void Wt.warning(R(this+' run failed, the {0} reference not must be null.',e.message))}Ht.debug&&Ht.verbose&&Wt.debug(this+' receive : '+e),this.tweenOver.running&&this.tweenOver.stop(),this.tweenOut.run()}}});var en=(e,t,n,a)=>n*e/a+t;J.prototype=Object.create(n.prototype,{constructor:{value:J},receive:{value:function(){this.motion&&this.motion.setTime(this.motion.useSeconds?(It.now()-this.motion._startTime)/1e3:this.motion._time+1)}}}),Q.prototype=Object.create(B.prototype,{constructor:{value:Q,writable:!0},id:{get:function(){return this._id},set:function(e){this._id=e}},clone:{writable:!0,value:function(){return new Q(this.id)}},equals:{writable:!0,value:function(e){return e===this||!!(e&&e instanceof Q)&&e.id===this.id}},toString:{value:function(){return'['+this.constructor.name+']'}}}),ee.prototype=Object.create(B.prototype,{constructor:{value:ee,writable:!0},stopped:{get:function(){return this._stopped}},clone:{value:function(){return new ee}},resume:{value:function(){this._stopped&&(this._running=!0,this._stopped=!1,this.notifyResumed(),this._requestID=xt(this._next.bind(this)))}},reset:{value:function(){this.stop(),this._stopped=!1}},run:{value:function(){this._running||(this._stopped=!1,this.lastTime=performance.now(),this.notifyStarted(),this._requestID=xt(this._next.bind(this)))}},stop:{value:function(){this._running&&!this._stopped&&(this._running=!1,this._stopped=!0,Pt(this._requestID),this._requestID=null,this.notifyStopped())}},toString:{value:function(){return'[FrameTimer]'}},_next:{value:function(e=performance.now()){if(null!==this._requestID&&(this._stopped||!this._running))return Pt(this._requestID),void(this._requestID=null);let t;e>this.lastTime?(t=this.elapsedMS=e-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),this.deltaTime=t*tn*this.speed,this.notifyProgress()):this.deltaTime=this.elapsedMS=0,this.lastTime=e,this._requestID=xt(this._next.bind(this))}}});var tn=.06;te.prototype=Object.create(Q.prototype,{constructor:{value:te,writable:!0},duration:{get:function(){return this._duration},set:function(e){this._duration=isNaN(e)||0>=e?0:e}},fps:{get:function(){return this._fps},set:function(e){this._timer&&this._timer._running&&this._timer.stop(),this._fps=0<e?e:NaN,isNaN(this._fps)?this.setTimer(new ee):this.setTimer(new K(1e3/this._fps))}},prevTime:{get:function(){return this._prevTime}},stopped:{get:function(){return this._stopped}},target:{get:function(){return this._target},set:function(e){this._target=e}},clone:{writable:!0,value:function(){return new te(this.id)}},nextFrame:{value:function(){this.setTime(this.useSeconds?(It.now()-this._startTime)/1e3:this._time+1)}},prevFrame:{value:function(){this.useSeconds||this.setTime(this._time-1)}},resume:{writable:!0,value:function(){this._stopped&&this._time!==this._duration?(this._stopped=!1,this.fixTime(),this.startInterval(),this.notifyResumed()):this.run()}},rewind:{value:function(e=0){this._time=0<e?e:0,this.fixTime(),this.update()}},run:{writable:!0,value:function(){this._stopped=!1,this.notifyStarted(),this.rewind(),this.startInterval()}},setTime:{value:function(e){this._prevTime=this._time,e>this._duration?(e=this._duration,this.looping?(this.rewind(e-this._duration),this.notifyLooped()):(this.useSeconds&&(this._time=this._duration,this.update()),this.stop(),this.notifyFinished())):0>e?this.rewind():(this._time=e,this.update())}},startInterval:{value:function(){this._timer.start(),this._running=!0}},stop:{value:function(){this._running&&(this.stopInterval(),this._stopped=!0,this.notifyStopped())}},stopInterval:{value:function(){this._timer.stop(),this._running=!1}},update:{writable:!0,value:function(){}},fixTime:{value:function(){this.useSeconds&&(this._startTime=It.now()-1e3*this._time)}},setTimer:{value:function(e){this._timer&&(this._timer instanceof B&&(this._timer._running&&this._timer.stop(),this._timer.progressIt.disconnect(this._nextFrame)),this._timer=null),this._timer=e instanceof B?e:new K,this._timer&&this._timer.progressIt.connect(this._nextFrame)}}}),ne.prototype=Object.create(te.prototype,{constructor:{value:ne,writable:!0},easing:{get:function(){return this._easing},set:function(e){this._easing=e instanceof Function?e:en}},clone:{writable:!0,value:function(){return new ne(this.easing,this.duration,this.useSeconds)}},set:{value:function(e,t=0,n=!1){this.duration=t,this.useSeconds=n,this.easing=e}},update:{writable:!0,value:function(){this._easing?(this.position=this._easing(this._time,0,this._change,this._duration),this.notifyChanged()):this.position=null}}}),ae.prototype=Object.create(ne.prototype,{constructor:{value:ne,writable:!0},easings:{get:function(){return this._easings},set:function(e){this._easings=e}},from:{get:function(){return this._from},set:function(e){this._from=e,this._changed=!0}},target:{get:function(){return this._target},set:function(e){this._target=e,this._changed=!0}},to:{get:function(){return this._to},set:function(e){this._to=e,this._changed=!0}},clone:{writable:!0,value:function(){return new ae({duration:this.duration,easing:this.easing,easings:this.easings,from:this.from,target:this.target,to:this.to,useSeconds:this.useSeconds})}},notifyFinished:{value:function(){this._changed=!0,this._running=!1,this._phase=Qt.FINISHED,this.finishIt.emit(this),this._phase=Qt.INACTIVE}},run:{writable:!0,value:function(e=null){e&&(this.to=e),this._changed=!0,this._stopped=!1,this.position=null,this.notifyStarted(),this.rewind(),this.startInterval()}},update:{writable:!0,value:function(){if(this._changed){if(this._changed=!1,!this._target)throw new Error(this+' update failed, the \'target\' property not must be null.');if(!this._to)throw new Error(this+' update failed, the \'to\' property not must be null.');if(this._from)this._begin=this._from;else for(let e in this._begin={},this._to)e in this._target&&(this._begin[e]=this._target[e])}for(let t in this.position={},this._to)if(t in this._target){let n=this._easings&&t in this._easings&&this.easings[t]instanceof Function?this.easings[t]:this._easing;this._target[t]=this.position[t]=n(this._time,this._begin[t],this._to[t]-this._begin[t],this._duration)}this.notifyChanged()}}});re.prototype=Object.create(z.prototype,{constructor:{value:re,writable:!0}});ie.prototype=Object.create(G.prototype,{constructor:{value:ie,writable:!0},antialias:{get:function(){return!!this._element&&'true'===this._element.getAttribute('antialias')},set:function(e){this._element&&this._element.setAttribute('antialias',!0===e?'true':'false')}},embedded:{get:function(){return!!this._element&&''===this._element.getAttribute('embedded')},set:function(e){this._element&&this._element.setAttribute('embedded',!0===e?'':null)}},fog:{get:function(){return!!this._element&&''===this._element.getAttribute('fog')},set:function(e){this._element&&this._element.setAttribute('fog',!0===e?'':null)}},isMobile:{get:function(){return!!this._element&&this._element.isMobile}},vrModeUI:{get:function(){return!!this._element&&'true'===this._element.getAttribute('vr-mode-ui','enabled')},set:function(e){this._element&&this._element.setAttribute('vr-mode-ui','enabled',!0===e?'true':'false')}},enterVR:{value:function(){this._element&&this._element.enterVR()}},exitVR:{value:function(){this._element&&this._element.exitVR()}},reload:{value:function(){this._element&&this._element.reload()}}});le.prototype=Object.create(z.prototype,{constructor:{value:le,writable:!0},allowFullScreen:{get:function(){return this._allowFullScreen}},allowFullScreenInteractive:{get:function(){return this._fullScreenInteractive}},aspectRatio:{get:function(){return this._aspectRatio}},displayState:{get:function(){return this._displayState},set:function(e){if(this._displayState!==e)switch(this._displayState=e,this._displayState){case zt.FULL_SCREEN:{document.documentElement[this._fullScreenRequest]();break}case zt.FULL_SCREEN_INTERACTIVE:{document.documentElement[this._fullScreenRequest](Element.ALLOW_KEYBOARD_INPUT);break}case zt.NORMAL:default:{document[this._fullScreenExit]();break}}}},fullScreenHeight:{get:function(){return this._fullScreenHeight}},fullScreenWidth:{get:function(){return this._fullScreenWidth}},height:{get:function(){return this._height}},launchedFromHomeScreen:{get:function(){return this._launchedFromHomeScreen}},orientation:{get:function(){return this._orientation}},pixelRatio:{get:function(){return this._pixelRatio}},width:{get:function(){return this._width}},dispose:{value:function(){this._notifyFullScreen instanceof Function&&(window.removeEventListener(this._fullScreenChange,this._notifyFullScreen,!1),this._notifyFullScreen=null),this._notifyOrientationChange instanceof Function&&(window.removeEventListener('orientationchange',this._notifyOrientationChange,!1),this._notifyOrientationChange=null)}},getDeviceOrientation:{writable:!0,value:function(){if(window.screen.orientation&&window.screen.orientation.type)switch(window.screen.orientation.type){case'portrait-secondary':{this._orientation=jt.UPSIDE_DOWN,this._aspectRatio=Mt.PORTRAIT;break}case'landscape-primary':{this._orientation=jt.ROTATED_LEFT,this._aspectRatio=Mt.LANDSCAPE;break}case'landscape-secondary':{this._orientation=jt.ROTATED_RIGHT,this._aspectRatio=Mt.LANDSCAPE;break}case'portrait-primary':default:{this._orientation=jt.DEFAULT,this._aspectRatio=Mt.PORTRAIT;break}}else if(void 0!==window.orientation)switch(window.orientation){case 180:{this._orientation=jt.UPSIDE_DOWN,this._aspectRatio=Mt.PORTRAIT;break}case 90:{this._orientation=jt.ROTATED_LEFT,this._aspectRatio=Mt.LANDSCAPE;break}case-90:{this._orientation=jt.ROTATED_RIGHT,this._aspectRatio=Mt.LANDSCAPE;break}case 0:default:this._orientation=jt.DEFAULT,this._aspectRatio=Mt.PORTRAIT;}}},getViewportSize:{writable:!0,value:function(){return this._width=Rt(document.documentElement.clientWidth,window.innerWidth||0),this._height=Rt(document.documentElement.clientHeight,window.innerHeight||0),{width:this._width,height:this._height}}},notifyActivated:{writable:!0,value:function(){this.activated.connected()&&this.activated.emit(this)}},notifyDesactivated:{writable:!0,value:function(){this.desactivated.connected()&&this.desactivated.emit(this)}},notifyFullScreen:{writable:!0,value:function(){null===document[this._fullScreenElement]&&(this.displayState=zt.NORMAL),this.fullScreen.connected()&&this.fullScreen.emit(this._displayState,this)}},notifyOrientationChange:{writable:!0,value:function(){this.getDeviceOrientation(),this.orientationChange.connected()&&this.orientationChange.emit(this._orientation,this)}},notifyResized:{writable:!0,value:function(){this.getViewportSize(),this.resize.connected()&&this.resize.emit(this)}},toString:{writable:!0,value:function(){return'[Stage]'}},__initialize__:{writable:!0,value:function(){(!0===navigator.standalone||window.matchMedia('(display-mode: fullscreen)').matches||window.matchMedia('(display-mode: standalone)').matches)&&(this._launchedFromHomeScreen=!0),this._pixelRatio=window.devicePixelRatio||1,this.getViewportSize(),this._fullScreenWidth=window.screen.width,this._fullScreenHeight=window.screen.height,void 0!==window.orientation||void 0!==window.screen.orientation?(this._supportsOrientationChange=!0,this.getDeviceOrientation()):this._supportsOrientationChange=!1;let e=['requestFullscreen','requestFullScreen','webkitRequestFullscreen','webkitRequestFullScreen','msRequestFullscreen','msRequestFullScreen','mozRequestFullScreen','mozRequestFullscreen'],t=['cancelFullScreen','exitFullscreen','webkitCancelFullScreen','webkitExitFullscreen','msCancelFullScreen','msExitFullscreen','mozCancelFullScreen','mozExitFullscreen'],n=['fullscreenchange','fullscreenchange','webkitfullscreenchange','webkitfullscreenchange','msfullscreenchange','msfullscreenchange','mozfullscreenchange','mozfullscreenchange'],a=['fullscreenElement','fullscreenElement','webkitFullscreenElement','webkitFullscreenElement','msFullScreenElement','msFullscreenElement','mozFullScreenElement','mozFullscreenElement'],r=e.length;for(let l=0;l<r;l++)if(document.documentElement[e[l]]&&document[t[l]]){this._allowFullScreen=!0,this._fullScreenRequest=e[l],this._fullScreenExit=t[l],this._fullScreenChange=n[l],this._fullScreenElement=a[l];break}window.Element&&Element.ALLOW_KEYBOARD_INPUT&&(this._fullScreenInteractive=!0),!0===this._allowFullScreen&&(this._notifyFullScreen=this.notifyFullScreen.bind(this),window.addEventListener(this._fullScreenChange,this._notifyFullScreen,!1)),!0===this._supportsOrientationChange&&(this._notifyOrientationChange=this.notifyOrientationChange.bind(this),window.addEventListener('orientationchange',this._notifyOrientationChange,!1)),window.addEventListener('resize',this.notifyResized.bind(this),!1),window.addEventListener('focus',this.notifyActivated.bind(this),!1),window.addEventListener('blur',this.notifyDesactivated.bind(this),!1)}}}),oe.prototype=Object.create(le.prototype,{constructor:{value:oe,writable:!0},toString:{writable:!0,value:function(){return'[Body]'}}});ue.prototype=Object.create(W.prototype,{constructor:{value:ue,writable:!0},radius:{get:function(){return this.getAttribute('geometry','radius')},set:function(e){this.setAttribute('geometry','radius',e)}}});var nn=[].concat([{id:'assets',type:U,singleton:!0,lazyInit:!0,properties:[{name:'addChild',args:[{ref:'home_image'}]}]},{id:'home_image',type:j,properties:[{name:'#init',config:'home_image'}]}],[{id:'camera',type:G,singleton:!0,lazyInit:!0,properties:[{name:'#init',config:'camera'},{name:'setAttribute',args:[{value:'camera'},{value:''}]},{name:'setAttribute',args:[{value:'look-controls'},{value:''}]}]},{id:'over_sound',type:Y,singleton:!0,lazyInit:!0,properties:[{name:'#init',config:'over_sound'}]}],[{id:'container',type:G,singleton:!0,lazyInit:!0}],[{id:'cursor',type:q,singleton:!0,lazyInit:!0,generates:['cursor_over_receiver','cursor_out_receiver'],properties:[{name:'#init',config:'cursor'},{name:'addChild',args:[{ref:'cursor_circle'}]},{name:'addChild',args:[{ref:'cursor_ring'}]}]},{id:'cursor_circle',type:X,singleton:!0,lazyInit:!0,properties:[{name:'#init',config:'cursor_circle'}]},{id:'cursor_ring',type:X,singleton:!0,lazyInit:!0,properties:[{name:'#init',config:'cursor_ring'}]},{id:'cursor_over_receiver',type:Z,properties:[{name:'cursor',ref:'cursor'},{name:'sound',ref:'over_sound'},{name:'tweenOver',ref:'cursor_over_tween'},{name:'tweenOut',ref:'cursor_out_tween'}],receivers:[{signal:'cursor.over'}]},{id:'cursor_out_receiver',type:$,properties:[{name:'tweenOver',ref:'cursor_over_tween'},{name:'tweenOut',ref:'cursor_out_tween'}],receivers:[{signal:'cursor.out'}]},{id:'cursor_over_tween',type:ae,singleton:!0,lazyInit:!0,properties:[{name:'#init',config:'cursor_over_tween'},{name:'target',ref:'cursor_circle'},{name:'duration',ref:'cursor.duration'},{name:'useSeconds',ref:'cursor.useSeconds'}]},{id:'cursor_out_tween',type:ae,singleton:!0,lazyInit:!0,properties:[{name:'#init',config:'cursor_out_tween'},{name:'target',ref:'cursor_circle'}]}],[{id:'loader',type:re,singleton:!0,lazyInit:!0,properties:[{name:'#init',config:'loader'}]}],[{id:'scene',type:ie,singleton:!0,lazyInit:!0,properties:[{name:'#init',config:'scene'},{name:'addChild',args:[{ref:'camera'}]},{name:'addChild',args:[{ref:'sky'}]}]}],[{id:'sky',type:ue,singleton:!0,lazyInit:!0,properties:[{name:'#init',config:'sky'}]}],[{id:'stage',type:oe,singleton:!0,lazyInit:!0}]);se.prototype=Object.create(Object.prototype,{constructor:{value:se},toString:{value:function(){return'[ActionEntry action:'+this.action+' priority:'+this.priority+' auto:'+this.auto+']'}}}),Object.defineProperties(de,{EVERLASTING:{value:'everlasting',enumerable:!0},NORMAL:{value:'normal',enumerable:!0},TRANSIENT:{value:'transient',enumerable:!0}}),de.prototype=Object.create(B.prototype,{constructor:{writable:!0,value:de},length:{get:function(){return this._actions.length},set:function(e){if(this._running)throw new Error(this+' length property can\'t be changed, the batch process is in progress.');this.dispose();var t=this._actions.length;this._actions.length=e;var n=this._actions.length;if(0<n)for(;-1<--n;){let e=this._actions[n];e&&e.action&&this._next&&e.action.finishIt.connect(this._next)}else 0<t&&this.notifyCleared()}},mode:{get:function(){return this._mode},set:function(e){this._mode=e===de.TRANSIENT||e===de.EVERLASTING?e:de.NORMAL}},stopped:{get:function(){return this._stopped}},add:{value:function(e,t=0,n=!1){if(this._running)throw new Error(this+' add failed, the process is in progress.');if(e&&e instanceof V){n=!0===n,t=0<t?St(t):0,this._next&&e.finishIt.connect(this._next),this._actions.push(new se(e,t,n));let r,i,o=this._actions,a=(e,t)=>{var n=o[e];return o[e]=o[t],o[t]=n,!0},u=!1,s=o.length;for(r=1;r<s;r++){for(i=0;i<s-r;i++)o[i+1].priority>o[i].priority&&(u=a(i,i+1));if(!u)break}return!0}return!1}},clone:{writable:!0,value:function(){return new de(this._mode,0<this._actions.length?this._actions:null)}},contains:{writable:!0,value:function(t){if(t&&t instanceof V&&0<this._actions.length)for(var n,e=this._actions.length;-1<--e;)if(n=this._actions[e],n&&n.action===t)return!0;return!1}},dispose:{writable:!0,value:function(){0<this._actions.length&&this._actions.forEach((e)=>{e instanceof se&&e.action.finishIt.disconnect(this._next)})}},get:{writable:!0,value:function(e){if(0<this._actions.length&&e<this._actions.length){var t=this._actions[e];if(t)return t.action}return null}},isEmpty:{writable:!0,value:function(){return 0===this._actions.length}},next:{writable:!0,value:function(){}},remove:{writable:!0,value:function(t){if(this._running)throw new Error(this+' remove failed, the process is in progress.');if(this.stop(),0<this._actions.length)if(t&&t instanceof V){let n,e=this._actions.length;this._actions.forEach((a)=>{if(a&&a instanceof se&&a.action===t)return this._next&&n.action.finishIt.disconnect(this._next),this._actions.splice(e,1),!0})}else return this.dispose(),this._actions.length=0,this.notifyCleared(),!0;return!1}},toArray:{writable:!0,value:function(){if(0<this._actions.length){var e=[];return 0<this._actions.length&&this._actions.forEach((t)=>{t&&t instanceof se&&t.action&&e.push(t.action)}),e}return[]}},toString:{writable:!0,value:function(){let t='['+this.constructor.name;if(!0===this.verbose&&0<this._actions.length){t+='[';let n,a,e=this._actions.length,i=[];for(n=0;n<e;n++)a=this._actions[n],i.push(a&&a.action?a.action:null);t+=i.toString(),t+=']'}return t+=']',t}}}),ce.prototype=Object.create(n.prototype,{constructor:{value:ce},receive:{value:function(){if(null!==this.chain){var e=this.chain,t=e._mode;e._current&&(t!==de.EVERLASTING&&(t===de.TRANSIENT||t===de.NORMAL&&e._current.auto)&&(e._current.action.finishIt.disconnect(this),e._position--,e._actions.splice(this._position,1)),e.notifyChanged(),e._current=null),0<e._actions.length?e.hasNext()?(e._current=e._actions[e._position++],e.notifyProgress(),e._current&&e._current.action?e._current.action.run():this.receive()):this.looping?(e._position=0,0===e.numLoop?(e.notifyLooped(),e._currentLoop=0,this.receive()):e._currentLoop<e.numLoop?(e._currentLoop++,e.notifyLooped(),this.receive()):(e._currentLoop=0,e.notifyFinished())):(e._currentLoop=0,e._position=0,e.notifyFinished()):e.notifyFinished()}}}}),pe.prototype=Object.create(de.prototype,{constructor:{writable:!0,value:pe},current:{get:function(){return this._current?this._current.action:null}},currentLoop:{get:function(){return this._currentLoop}},position:{get:function(){return this._position}},clone:{writable:!0,value:function(){return new pe(this.looping,this.numLoop,this._mode,0<this._actions.length?this._actions:null)}},element:{writable:!0,value:function(){return this.hasNext()?this._actions[this._position].action:null}},hasNext:{writable:!0,value:function(){return this._position<this._actions.length}},resume:{writable:!0,value:function(){this._stopped?(this._running=!0,this._stopped=!1,this.notifyResumed(),this._current&&this._current.action?'resume'in this._current.action&&this._current.action.resume():this._next.receive()):this.run()}},run:{writable:!0,value:function(){this._running||(this.notifyStarted(),this._current=null,this._stopped=!1,this._position=0,this._currentLoop=0,this._next.receive())}},stop:{writable:!0,value:function(){this._running&&this._current&&this._current.action&&'stop'in this._current.action&&this._current.action instanceof Function&&(this._current.action.stop(),this._running=!1,this._stopped=!0,this.notifyStopped())}}}),_e.prototype=Object.create(B.prototype,{constructor:{value:_e,writable:!0},run:{value:function(){this.notifyStarted();try{if(!this.factory)throw new Error('factory')}catch(e){return Wt.warning(R('[BuildApplication] run failed, the {0} reference not must be null.',e.message)),void this.notifyFinished()}Wt.debug(this+' run');var e=this.factory.getObject('stage'),t=this.factory.getObject('scene');e.addChild(t),this.notifyFinished()}}}),ve.prototype=Object.create(B.prototype,{constructor:{value:ve},run:{value:function(){this.notifyStarted();try{if(!this.camera)throw new Error('camera');if(!this.cursor)throw new Error('cursor');if(!this.states)throw new Error('states')}catch(e){return Wt.warning(R(this+' run failed, the {0} reference not must be null.',e.message)),void this.notifyFinished()}Wt.debug(this+' run'),this.camera.addChild(this.cursor),Wt.debug(this+' states length : '+this.states.length),this.states.current=this.states.get(Ht.first),this.notifyFinished()}}});var an=function(){B.call(this),Object.defineProperties(this,{assets:{writable:!0,value:null},scene:{writable:!0,value:null},stage:{writable:!0,value:null},_finished:{writable:!0,value:null}})};an.prototype=Object.create(B.prototype,{constructor:{value:an},run:{value:function(){this.notifyStarted();try{if(!this.assets)throw new Error('assets');if(!this.scene)throw new Error('scene');if(!this.stage)throw new Error('stage')}catch(e){return Wt.warning(R(this+' run failed, the {0} reference not must be null.',e.message)),void this.notifyFinished()}Wt.debug(this+' run'),this._finished=this.finished.bind(this),this.assets.element.addEventListener('loaded',this._finished),this.scene.addChild(this.assets)}},finished:{value:function(){this.stage.element.classList.add('loaded'),this.assets.element.removeEventListener('loaded',this._finished),this._finished=null,this.notifyFinished()}}});var rn=[{id:'run',type:pe,init:'run',properties:[{name:'mode',value:de.TRANSIENT},{name:'add',args:[{ref:'body_states_init'}]},{name:'add',args:[{ref:'build_application'}]},{name:'add',args:[{ref:'init_application'}]}]},{id:'build_application',type:_e,properties:[{name:'factory',ref:'#this'}]},{id:'init_application',type:ve,properties:[{name:'camera',ref:'camera'},{name:'cursor',ref:'cursor'},{name:'states',ref:'body_states_model'}]},{id:'preload_application',type:an,properties:[{name:'assets',ref:'assets'},{name:'scene',ref:'scene'},{name:'stage',ref:'stage'}]}],ln=[{id:'states_chain',type:pe,singleton:!0,lazyInit:!0,properties:[{name:'mode',value:de.TRANSIEN}]}],on=[].concat(rn,ln),un=[].concat();ge.prototype=Object.create(n.prototype,{constructor:{value:ge},receive:{value:function(e){$t.debug(this+' receive : '+e)}}}),be.prototype=Object.create(Object.prototype,{constructor:{writable:!0,value:be},eval:{writable:!0,value:function(){}},toString:{writable:!0,value:function(){return'['+this.constructor.name+']'}}}),me.prototype=Object.create(be.prototype,{length:{get:function(){return this._evaluators.length}},add:{value:function(...t){this.autoClear&&this.clear();var n=t.length;if(0<n){var a,r,i,l;for(r=0;r<n;r++)if(l=t[r],l instanceof be)this._evaluators.push(l);else if(l instanceof Array)for(a=l.length,i=0;i<a;i++)l[i]instanceof be&&this._evaluators.push(l[i])}}},clear:{value:function(){this._evaluators=[]}},eval:{value:function(e){return this._evaluators.forEach((t)=>{t instanceof be&&(e=t.eval(e))}),e}},remove:{value:function(e){if(e instanceof be){var t=this._evaluators.indexOf(e);if(-1<t)return this._evaluators.splice(t,1),!0}return!1}}}),me.prototype.constructor=me,me.prototype.toString=function(){return'[MultiEvaluator]'},ye.prototype=Object.create(Object.prototype,{constructor:{writable:!0,value:ye},isLocked:{writable:!0,value:function(){return this.__lock__}},lock:{writable:!0,value:function(){this.__lock__=!0}},unlock:{writable:!0,value:function(){this.__lock__=!1}},toString:{writable:!0,value:function(){return'['+this.constructor.name+']'}}});var sn=Object.defineProperties({},{ARGUMENTS:{value:'args',enumerable:!0},CALLBACK:{value:'callback',enumerable:!0},CONFIG:{value:'config',enumerable:!0},DEPENDS_ON:{value:'dependsOn',enumerable:!0},DESTROY_METHOD_NAME:{value:'destroy',enumerable:!0},EVALUATORS:{value:'evaluators',enumerable:!0},FACTORY:{value:'factory',enumerable:!0},GENERATES:{value:'generates',enumerable:!0},ID:{value:'id',enumerable:!0},IDENTIFY:{value:'identify',enumerable:!0},INIT_METHOD_NAME:{value:'init',enumerable:!0},LAZY_INIT:{value:'lazyInit',enumerable:!0},LAZY_TYPE:{value:'lazyType',enumerable:!0},LISTENERS:{value:'listeners',enumerable:!0},LOCALE:{value:'locale',enumerable:!0},LOCK:{value:'lock',enumerable:!0},NAME:{value:'name',enumerable:!0},PROPERTIES:{value:'properties',enumerable:!0},RECEIVERS:{value:'receivers',enumerable:!0},REFERENCE:{value:'ref',enumerable:!0},SCOPE:{value:'scope',enumerable:!0},SINGLETON:{value:'singleton',enumerable:!0},TYPE:{value:'type',enumerable:!0},VALUE:{value:'value',enumerable:!0}});we.prototype=Object.create(Object.prototype,{constructor:{value:we},policy:{get:function(){return this._policy},set:function(e){switch(e){case sn.CALLBACK:case sn.REFERENCE:case sn.CONFIG:case sn.LOCALE:{this._policy=e;break}default:this._policy=sn.VALUE;}}},toString:{value:function(){return'[ObjectArgument]'}}});var dn=Kt.getLogger('system.ioc.logger'),cn=Object.defineProperties({},{AFTER:{value:'after',enumerable:!0},BEFORE:{value:'before',enumerable:!0},NONE:{value:'none',enumerable:!0},NOW:{value:'now',enumerable:!0}});Ie.prototype=Object.create(Object.prototype,{constructor:{value:Ie},order:{get:function(){return this._order},set:function(e){this._order=e===cn.BEFORE?cn.BEFORE:cn.AFTER}},toString:{value:function(){return'[ObjectListener]'}}}),Object.defineProperties(Ie,{DISPATCHER:{value:'dispatcher',enumerable:!0},METHOD:{value:'method',enumerable:!0},ORDER:{value:'order',enumerable:!0},PRIORITY:{value:'priority',enumerable:!0},USE_CAPTURE:{value:'useCapture',enumerable:!0},TYPE:{value:'type',enumerable:!0}}),Ne.prototype=Object.create(Object.prototype,{constructor:{writable:!0,value:Ne},toString:{writable:!0,value:function(){return'['+this.constructor.name+']'}}}),Fe.prototype=Object.create(Ne.prototype,{constructor:{writable:!0,value:Fe},policy:{get:function(){return this._policy},set:function(e){switch(e){case sn.ARGUMENTS:case sn.CALLBACK:case sn.CONFIG:case sn.LOCALE:case sn.REFERENCE:{this._policy=e;break}default:this._policy=sn.VALUE;}}}}),xe.prototype=Object.create(Object.prototype,{constructor:{value:xe},toString:{value:function(){return'[ObjectReceiver]'}}}),Object.defineProperties(xe,{AUTO_DISCONNECT:{value:'autoDisconnect',enumerable:!0},ORDER:{value:'order',enumerable:!0},PRIORITY:{value:'priority',enumerable:!0},SIGNAL:{value:'signal',enumerable:!0},SLOT:{value:'slot',enumerable:!0}});var pn=Object.defineProperties({},{FACTORY_METHOD:{value:'factoryMethod',enumerable:!0},FACTORY_PROPERTY:{value:'factoryProperty',enumerable:!0},FACTORY_REFERENCE:{value:'factoryReference',enumerable:!0},FACTORY_VALUE:{value:'factoryValue',enumerable:!0},STATIC_FACTORY_METHOD:{value:'staticFactoryMethod',enumerable:!0},STATIC_FACTORY_PROPERTY:{value:'staticFactoryProperty',enumerable:!0}});ke.prototype=Object.create(Ne.prototype,{constructor:{writable:!0,value:ke}}),Me.prototype=Object.create(ke.prototype,{constructor:{writable:!0,value:Me}}),Object.defineProperties(Me,{build:{value:function(e){return null===e?null:sn.FACTORY in e&&sn.NAME in e?new Me(e[sn.FACTORY]||null,e[sn.NAME]||null,Ee(e[sn.ARGUMENTS]||null)):null}}}),ze.prototype=Object.create(Fe.prototype,{constructor:{writable:!0,value:ze}}),Object.defineProperties(ze,{build:{value:function(e){return null===e?null:sn.FACTORY in e&&sn.NAME in e?new ze(e[sn.FACTORY]||null,e[sn.NAME]||null,e[sn.EVALUATORS]||null):null}}}),je.prototype=Object.create(Ne.prototype,{constructor:{value:je}}),Ue.prototype=Object.create(ke.prototype,{constructor:{value:Ue,writable:!0}}),Object.defineProperties(Ue,{build:{value:function(e){if(null===e)return null;if(sn.TYPE in e&&sn.NAME in e){let t=new Ue(e[sn.TYPE]||null,e[sn.NAME]||null,Ee(e[sn.ARGUMENTS]||null));return t}return null}}}),Ge.prototype=Object.create(Fe.prototype,{constructor:{value:Ge,writable:!0}}),Object.defineProperties(Ge,{build:{value:function(e){return null===e?null:sn.TYPE in e&&sn.NAME in e?new Ge(e[sn.NAME]||null,e[sn.TYPE]||null,e[sn.EVALUATORS]||null):null}}}),Ye.prototype=Object.create(Ne.prototype,{constructor:{writable:!0,value:Ye}});var _n=Object.defineProperties({},{PROTOTYPE:{value:'prototype',enumerable:!0},SINGLETON:{value:'singleton',enumerable:!0},SCOPES:{value:['prototype','singleton']},validate:{value:function(e){return-1<_n.SCOPES.indexOf(e)}}});Ve.prototype=Object.create(s.prototype,{constructor:{writable:!0,value:s},afterListeners:{get:function(){return this._afterListeners}},afterReceivers:{get:function(){return this._afterReceivers}},beforeListeners:{get:function(){return this._beforeListeners}},beforeReceivers:{get:function(){return this._beforeReceivers}},dependsOn:{get:function(){return this._dependsOn},set:function(e){this._dependsOn=e instanceof Array&&0<e.length?e.filter(this._filterStrings):null}},generates:{get:function(){return this._generates},set:function(e){this._generates=e instanceof Array&&0<e.length?e.filter(this._filterStrings):null}},lazyInit:{get:function(){return this._lazyInit},set:function(e){this._lazyInit=!!(e instanceof Boolean||'boolean'==typeof e)&&e}},lazyType:{get:function(){return this._lazyType},set:function(e){this._lazyType=!0===e}},listeners:{set:function(e){if(this._afterListeners=[],this._beforeListeners=[],null!==e&&e instanceof Array){let t=e.length;if(0<t)for(let n,a=0;a<t;a++)n=e[a],n instanceof Ie&&(n.order===cn.AFTER?this._afterListeners.push(n):this._beforeListeners.push(n))}}},receivers:{set:function(e){if(this._afterReceivers=[],this._beforeReceivers=[],null!==e&&e instanceof Array){let n=e.length;if(0<n)for(var t=0;t<n;t++){let n=e[t];n instanceof xe&&(n.order===cn.AFTER?this._afterReceivers.push(n):this._beforeReceivers.push(n))}}}},singleton:{get:function(){return this._singleton}},scope:{get:function(){return this._scope},set:function(e){this._scope=_n.validate(e)?e:_n.PROTOTYPE,this._singleton=this._scope===_n.SINGLETON}},strategy:{get:function(){return this._strategy},set:function(e){this._strategy=e instanceof Ne?e:null}},toString:{value:function(){return'[ObjectDefinition]'}},_filterStrings:{value:function(e){return('string'==typeof e||e instanceof String)&&0<e.length}}});var vn=Object.defineProperties({},{CONFIG:{value:'#config',enumerable:!0},INIT:{value:'#init',enumerable:!0},LOCALE:{value:'#locale',enumerable:!0},PARAMS:{value:'#params',enumerable:!0},ROOT:{value:'#root',enumerable:!0},STAGE:{value:'#stage',enumerable:!0},THIS:{value:'#this',enumerable:!0}});Ke.prototype=Object.create(Object.prototype),Ke.prototype.constructor=Ke,Ke.prototype.format=function(){},Object.defineProperties(qe,{MAX_RECURSION:{value:200,enumerable:!0}}),qe.prototype=Object.create(Ke.prototype,{constructor:{value:qe},beginSeparator:{get:function(){return this._beginSeparator},set:function(e){this._beginSeparator=e||'{',this._reset()}},endSeparator:{get:function(){return this._endSeparator},set:function(e){this._endSeparator=e||'}',this._reset()}},length:{get:function(){return this.expressions.length}},clear:{value:function(){this.expressions.clear()}},format:{value:function(e){return this._format(e+'',0)}},set:{value:function(e,t){return!!(''!==e&&(e instanceof String||'string'==typeof e))&&!!(''!==t&&(t instanceof String||'string'==typeof t))&&(this.expressions.set(e,t),!0)}},toString:{value:function(){return'[ExpressionFormatter]'}},_reset:{value:function(){this._reg=new RegExp(R(this._pattern,this.beginSeparator,this.endSeparator),'g')}},_format:{value:function(e,t=0){if(t>=qe.MAX_RECURSION)return e;let n=e.match(this._reg);if(null===n)return e;let a=n.length;if(0<a){let r,l;for(let o=0;o<a;o++)l=n[o].substr(1),l=l.substr(0,l.length-1),this.expressions.has(l)&&(r=this._format(this.expressions.get(l),t+1),this.expressions.set(l,r),e=e.replace(n[o],r)||r)}return e}}}),We.prototype=Object.create(be.prototype),We.prototype.constructor=We,We.prototype.eval=function(e){if(null!==e&&('string'==typeof e||e instanceof String)&&null!==this.target){var t=e+'';if(0<t.length){for(var n=this.target,a=t.split(this.separator),r=a.length,l=0;l<r;l++)if(a[l]in n)n=n[a[l]];else{if(this.throwError)throw new EvalError(this+' eval failed with the expression : '+e);return this.undefineable}return n}}return this.undefineable},We.prototype.toString=function(){return'[PropertyEvaluator]'},Xe.prototype=Object.create(We.prototype,{constructor:{value:Xe}}),Ze.prototype=Object.create(We.prototype,{constructor:{value:Ze}}),$e.prototype=Object.create(be.prototype,{constructor:{value:$e},eval:{value:function(e){if(this.factory instanceof nt&&(e instanceof String||'string'==typeof e)){var t=e+'';if(0<t.length){var n;try{n=this.factory.config.root}catch(t){}switch(t){case vn.CONFIG:return this.factory.config.config;case vn.LOCALE:return this.factory.config.locale;case vn.PARAMS:return this.factory.config.parameters;case vn.THIS:return this.factory;case vn.ROOT:return n;case vn.STAGE:{var a=this.factory.config.stage;return null===a?n&&'stage'in n&&null!==n.stage?n.stage:this.undefineable:a}default:{let e=t.split(this.separator);if(0<e.length){let t=e.shift(),n=this.factory.getObject(t);return n&&0<e.length&&(this._propEvaluator.target=n,n=this._propEvaluator.eval(e.join('.')),this._propEvaluator.target=null),n}}}}}return this.undefineable}}});var gn=Object.defineProperties({},{ALIAS:{value:'alias',enumerable:!0},ALL:{value:'all',enumerable:!0},EXPRESSION:{value:'expression',enumerable:!0},NONE:{value:'none',enumerable:!0}});Qe.prototype=Object.create(be.prototype,{constructor:{value:Qe},eval:{value:function(e){if(e instanceof Function)return e;if(e instanceof String||'string'==typeof e){var t=e+'',n=this.config;if(n&&n instanceof et){var a=n.typePolicy;if(a!==gn.NONE){if(a===gn.ALL||a===gn.ALIAS){var r=n.typeAliases;r instanceof h&&r.has(t)&&(t=r.get(t))}(a===gn.ALL||a===gn.EXPRESSION)&&n.typeExpression instanceof qe&&(t=n.typeExpression.format(t))}}try{var i=Je(t,n.domain);if(i instanceof Function)return i}catch(t){if(this.throwError)throw new EvalError(this+' eval failed : '+t.toString())}}return null}}}),Object.defineProperties(et,{TYPE_ALIAS:{value:'alias',enumerable:!0}}),et.prototype=Object.create(Object.prototype,{constructor:{value:et},config:{get:function(){return this._config},set:function(e){for(let t in e)this._config[t]=e[t]}},configEvaluator:{get:function(){return this._configEvaluator}},locale:{get:function(){return this._locale},set:function(e){for(let t in e)this._locale[t]=e[t]}},localeEvaluator:{get:function(){return this._localeEvaluator}},referenceEvaluator:{get:function(){return this._referenceEvaluator}},throwError:{get:function(){return this._configEvaluator.throwError&&this._localeEvaluator.throwError&&this._typeEvaluator.throwError&&this._referenceEvaluator.throwError},set:function(e){this._configEvaluator.throwError=e,this._localeEvaluator.throwError=e,this._referenceEvaluator.throwError=e,this._typeEvaluator.throwError=e}},typeAliases:{get:function(){return this._typeAliases},set:function(e){if(e instanceof h)for(let t=e.iterator();t.hasNext();){let e=t.next(),n=t.key();this._typeAliases.set(n,e)}else if(e instanceof Array){let t=e.length;if(0<t)for(;-1<--t;){let n=e[t];null!==n&&et.TYPE_ALIAS in n&&sn.TYPE in n&&this._typeAliases.set(n[et.TYPE_ALIAS]+'',n[sn.TYPE]+'')}}}},typeEvaluator:{get:function(){return this._typeEvaluator}},typeExpression:{get:function(){return this._typeExpression},set:function(e){if(e instanceof qe)this._typeExpression=e;else if(e instanceof Array){null===this._typeExpression&&(this._typeExpression=new qe);let t=e.length;if(0<t)for(;-1<--t;){let n=e[t];null!==n&&sn.NAME in n&&sn.VALUE in n&&this._typeExpression.set(n[sn.NAME]+'',n[sn.VALUE]+'')}}else this._typeExpression=new qe}},typePolicy:{get:function(){return this._typePolicy},set:function(e){switch(e){case gn.ALIAS:case gn.EXPRESSION:case gn.ALL:{this._typePolicy=e;break}default:this._typePolicy=gn.NONE;}}},initialize:{value:function(e){if(null!==e)for(let t in e)t in this&&(this[t]=e[t])}},setConfigTarget:{value:function(e=null){this._config=e||{}}},setLocaleTarget:{value:function(e=null){this._locale=e||{}}},toString:{value:function(){return'[ObjectConfig]'}}}),tt.prototype=Object.create(B.prototype,{constructor:{configurable:!0,writable:!0,value:tt},numObjectDefinition:{get:function(){return this._map.length}},addObjectDefinition:{value:function(e){if(e instanceof Ve)this._map.set(e.id,e);else throw new ReferenceError(this+' addObjectDefinition failed, the specified object definition must be an ObjectDefinition object.')}},clearObjectDefinition:{value:function(){this._map.clear()}},clone:{value:function(){return new tt}},getObjectDefinition:{value:function(e){if(this._map.has(e))return this._map.get(e);throw new ReferenceError(this+' getObjectDefinition failed, the specified object definition don\'t exist : '+e)}},hasObjectDefinition:{value:function(e){return this._map.has(e)}},removeObjectDefinition:{value:function(e){if(this._map.has(e))this._map.delete(e);else throw new ReferenceError(this+' removeObjectDefinition failed, the specified object definition don\'t exist : '+e)}}}),nt.prototype=Object.create(tt.prototype,{constructor:{value:nt},config:{get:function(){return this._config},set:function(e){this._config&&(this._config.referenceEvaluator.factory=null),this._config=e instanceof et?e:new et,this._config.referenceEvaluator.factory=this}},singletons:{get:function(){return this._singletons}},clone:{value:function(){return new nt(this.config,[].concat(this.objects))}},hasSingleton:{value:function(e){return this._singletons.has(e)}},getObject:{value:function(e){if(!(e instanceof String||'string'==typeof e))return null;let t=null;try{let n;try{n=this.getObjectDefinition(e)}catch(t){}if(!(n instanceof Ve))throw new Error('the definition is not register in the factory');if(n.singleton&&(t=this._singletons.get(e)||null),!t)if(!(n.type instanceof Function)&&(n.type instanceof String||'string'==typeof n.type)&&(n.type=this.config.typeEvaluator.eval(n.type)),n.type instanceof Function){if(n.strategy)t=this.createObjectWithStrategy(n.strategy);else try{t=fe(n.type,this.createArguments(n.constructorArguments,n.id))}catch(t){throw new Error('can\'t create the instance with the specified definition type '+n.type+'. The arguments limit exceeded, you can pass a maximum of 32 arguments')}if(t){if(!n.lazyType){let e=!1;if(t instanceof n.type?e=!0:n.type===String?e=t instanceof String||'string'==typeof t:n.type===Number?e=t instanceof Number||'number'==typeof t:n.type===Boolean&&(e=t instanceof Boolean||'boolean'==typeof t),!e)throw t=null,new Error('the new object is not an instance of the ['+n.type.name+'] constructor')}n.singleton&&this._singletons.set(e,t),this.dependsOn(n),this.populateIdentifiable(t,n);let a=he(t)&&(!0===n.lock||!0===this.config.lock&&!1!==n.lock);a&&t.lock(),n.beforeListeners instanceof Array&&0<n.beforeListeners.length&&this.registerListeners(t,n.beforeListeners),n.beforeReceivers instanceof Array&&0<n.beforeReceivers.length&&this.registerReceivers(t,n.beforeReceivers),this.populateProperties(t,n),n.afterListeners instanceof Array&&0<n.afterListeners.length&&this.registerListeners(t,n.afterListeners),n.afterReceivers instanceof Array&&0<n.afterReceivers.length&&this.registerReceivers(t,n.afterReceivers),a&&t.unlock(),this.invokeInitMethod(t,n),this.generates(n)}}else throw new Error('the definition.type property is not a valid constructor')}catch(t){this.warn(this+' getObject(\''+e+'\') failed, '+t.message+'.')}return t||null}},isDirty:{value:function(){return this.bufferSingletons&&this.bufferSingletons instanceof Array&&0<this.bufferSingletons.length}},isLazyInit:{value:function(e){return!!this.hasObjectDefinition(e)&&this.getObjectDefinition(e).lazyInit}},isSingleton:{value:function(e){return!!this.hasObjectDefinition(e)&&this.getObjectDefinition(e).singleton}},removeSingleton:{value:function(e){this.isSingleton(e)&&this._singletons.has(e)&&(this.invokeDestroyMethod(e),this._singletons.delete(e))}},run:{value:function(...e){if(!this.running){if(this.notifyStarted(),0<e.length&&e[0]instanceof Array&&(this.objects=e[0]),null===this.bufferSingletons&&(this.bufferSingletons=[]),this.objects instanceof Array&&0<this.objects.length)for(;0<this.objects.length;){let e=this.objects.shift();if(null!==e){let t=Be(e);this.addObjectDefinition(t),t.singleton&&!t.lazyInit&&this.hasObjectDefinition(t.id)&&this.bufferSingletons.push(t.id+'')}else this.warn(this+' create new object definition failed with a \'null\' or \'undefined\' object.')}if(this.bufferSingletons instanceof Array&&0<this.bufferSingletons.length&&!this._config.lazyInit&&!this.isLocked()){let e=this.bufferSingletons.length;for(let t=0;t<e;t++)this.getObject(this.bufferSingletons[t]);this.bufferSingletons=null}this.notifyFinished()}}},warn:{value:function(...e){this.config.useLogger&&dn.warning.apply(dn,e)}},createArguments:{value:function(e=null,t=null){if(null===e||!(e instanceof Array)||0===e.length)return null;let n=[],a=e.length;for(let r,l=0;l<a;l++)if(r=e[l],r instanceof we){let e=r.value;try{let a=null;if(r.policy===sn.CALLBACK){let n=e;(e instanceof String||'string'==typeof e)&&(n=this._config.referenceEvaluator.eval(e)),n instanceof Function?(r.scope&&(r.args instanceof Array?n=e.bind.apply(r.scope,[r.scope].concat(this.createArguments(r.args,t))):n=e.bind(r.scope)),e=n):(a=sn.CALLBACK,e=null)}r.policy===sn.REFERENCE?(e=this._config.referenceEvaluator.eval(e),null===e&&(a=sn.FACTORY)):r.policy===sn.CONFIG?(e=this._config.configEvaluator.eval(e),null===e&&(a=sn.LOCALE)):r.policy===sn.LOCALE&&(e=this._config.localeEvaluator.eval(e),null===e&&(a=sn.LOCALE)),null!==a&&this.warn(this+' createArguments failed at the index \''+l+'\' and return a \'null\' '+a+' reference, see the object definition with the id : '+t),null!==r.evaluators&&0<r.evaluators.length&&(e=this.eval(e,r.evaluators)),n.push(e)}catch(e){this.warn(this+' createArguments failed in the object definition with the id : '+t+', '+e.toString())}}return n}},createObjectWithStrategy:{value:function(e,t=null){if(!(e instanceof Ne))return null;let n,a,r=e.name,i=null;return e instanceof ke?e instanceof Ue?(n=e.type,(n instanceof String||'string'==typeof n)&&(n=this.config.typeEvaluator.eval(n)),n&&r&&r in n&&n[r]instanceof Function&&(i=n[r].apply(n,this.createArguments(e.args,t)))):e instanceof Me&&(a=this.getObject(e.factory),a&&r&&r in a&&a[r]instanceof Function&&(i=a[r].apply(a,this.createArguments(e.args,t)))):e instanceof Fe?e instanceof Ge?(n=e.type,(n instanceof String||'string'==typeof n)&&(n=this.config.typeEvaluator.eval(n)),n&&r&&r in n&&(i=n[r])):e instanceof ze&&(a=this.getObject(e.factory),a&&r&&r in a&&(i=a[r])):e instanceof Ye?i=e.value:e instanceof je&&(i=this._config.referenceEvaluator.eval(e.ref)),i}},dependsOn:{value:function(e){if(e instanceof Ve&&e.dependsOn instanceof Array&&0<e.dependsOn.length){let t,n=e.dependsOn.length;for(let a=0;a<n;a++)t=e.dependsOn[a],this.hasObjectDefinition(t)&&this.getObject(t)}}},eval:{value:function(e,t=null){if(!(t instanceof Array)||0===t.length)return e;this._evaluator.clear();let n,r=t.length,l=[];for(let a=0;a<r;a++)(n=t[a],null!==n)&&((n instanceof String||'string'==typeof n)&&(n=this.getObject(n)),n instanceof be&&l.push(n));return 0<l.length&&(this._evaluator.add(l),e=this._evaluator.eval(e),this._evaluator.clear()),e}},generates:{value:function(e){if(e instanceof Ve&&e.generates instanceof Array){let t=e.generates,n=t.length;if(0<n)for(let e,a=0;a<n;a++)e=t[a],this.hasObjectDefinition(e)&&this.getObject(e)}}},invokeDestroyMethod:{value:function(e){if(this.hasObjectDefinition(e)&&this._singletons.has(e)){let t=this.getObjectDefinition(e),n=this._singletons.get(e),a=t.destroyMethodName||null;null===a&&null!==this.config&&(a=this.config.defaultDestroyMethod),a&&a in n&&n[a]instanceof Function&&n[a].call(n)}}},invokeInitMethod:{value:function(e,t=null){if(t&&t instanceof Ve){let n=t.initMethodName||null;null===n&&this.config&&(n=this.config.defaultInitMethod||null),n&&n in e&&e[n]instanceof Function&&e[n].call(e)}}},populateIdentifiable:{value:function(e,t=null){t&&t instanceof Ve&&t.singleton&&u(e)&&(!0===t.identify||!0===this.config.identify&&!1!==t.identify)&&(e.id=t.id)}},populateProperties:{value:function(e,t=null){if(t&&t instanceof Ve){let n=t.properties;if(n&&n instanceof Array&&0<n.length){let a=t.id,r=n.length;for(let t=0;t<r;t++)this.populateProperty(e,n[t],a)}}}},populateProperty:{value:function(e,t,n){if(null===e)return void this.warn(this+' populate a new property failed, the object not must be \'null\' or \'undefined\', see the factory with the object definition \''+n+'\'.');let a=t.name,r=t.value;if(a===vn.INIT){if(t.policy===sn.REFERENCE&&(r instanceof String||'string'==typeof r)?r=this._config.referenceEvaluator.eval(r):t.policy===sn.CONFIG?r=this.config.configEvaluator.eval(r):t.policy===sn.LOCALE&&(r=this.config.localeEvaluator.eval(r)),t.evaluators&&0<t.evaluators.length&&(r=this.eval(r,t.evaluators)),r)for(var i in r)i in e?e[i]=r[i]:this.warn(this+' populateProperty failed with the magic #init name, the '+i+' attribute is not declared on the object with the object definition \''+n+'\'.');else this.warn(this+' populate a new property failed with the magic #init name, the object to enumerate not must be null, see the factory with the object definition \''+n+'\'.');return}if(!(a in e))return void this.warn(this+' populate a new property failed with the '+a+' attribute, this property is not registered in the object, see the object definition \''+n+'\'.');try{if(t.policy===sn.CALLBACK)(r instanceof String||'string'==typeof r)&&(r=this._config.referenceEvaluator.eval(r),null===r&&this.warn(this+' populateProperty with the name \''+a+'\' return a null callback reference, see the object definition with the id : '+n)),r instanceof Function?(t.scope&&(t.args instanceof Array?r=r.bind.apply(t.scope,[t.scope].concat(this.createArguments(t.args,n))):r=r.bind(t.scope)),r=r):r=null;else if(t.policy===sn.REFERENCE)r=this._config.referenceEvaluator.eval(r),null===r&&this.warn(this+' populateProperty with the name \''+a+'\' return a \'null\' factory reference, see the object definition with the id : '+n);else if(t.policy===sn.CONFIG)r=this.config.configEvaluator.eval(r),null===r&&this.warn(this+' populateProperty with the name \''+a+'\' return a \'null\' config reference, see the object definition with the id : '+n);else if(t.policy===sn.LOCALE)r=this.config.localeEvaluator.eval(r),null===r&&this.warn(this+' populateProperty with the name \''+a+'\' return a null locale reference, see the object definition with the id : '+n);else if(e[a]instanceof Function)return t.policy===sn.ARGUMENTS?void e[a].apply(e,this.createArguments(r,n)):void e[a]();t.evaluators&&0<t.evaluators.length&&(r=this.eval(r,t.evaluators)),e[a]=r}catch(t){this.warn(this+' populateProperty failed with the name \''+a+', see the object definition \''+n+'\', error: '+t.toString())}}},registerListeners:{value:function(t,e){if(null!==t&&null!==e&&e instanceof Array){let n=e.length;if(0<n)for(let a=0;a<n;a++)try{let n=e[a],r=this._config.referenceEvaluator.eval(n.dispatcher);if(r&&null!==n.type){let e;r instanceof x?(n.method&&n.method in t&&t[n.method]instanceof Function?e=t[n.method].bind(t):t instanceof P&&(e=t),r.addEventListener(n.type,e,n.useCapture,n.priority)):'addEventListener'in r&&r.addEventListener instanceof Function&&(n.method&&n.method in t&&t[n.method]instanceof Function?e=t[n.method].bind(t):t instanceof P&&(e=t.handleEvent.bind(t)),r.addEventListener(n.type,e,n.useCapture))}}catch(n){this.warn(this+' registerListeners failed with the target \''+t+'\' , in the collection of this listeners at {'+a+'} : '+n.toString())}}}},registerReceivers:{value:function(t,e=null){if(e instanceof Array&&0!==e.length){let r=e.length;for(let l=0;l<r;l++)try{let r=e[l],i=this._config.referenceEvaluator.eval(r.signal),o=null;i instanceof a&&((r.slot instanceof String||'string'==typeof r.slot)&&r.slot in t&&t[r.slot]instanceof Function?o=t[r.slot]:t instanceof n&&(o=t),(o instanceof n||o instanceof Function)&&i.connect(o,r.priority,r.autoDisconnect))}catch(n){this.warn(this+' registerReceivers failed with the target \''+t+'\' , in the collection of this receivers at {'+l+'} : '+n.toString())}}}}}),at.prototype=Object.create(V.prototype,{constructor:{writable:!0,value:at},clone:{writable:!0,value:function(){return new at(this.func,this.scope)}},run:{writable:!0,value:function(...e){if(this.notifyStarted(),this.func instanceof Function)e&&0<e.length?this.func.apply(this.scope,e):this.func.call(this.scope);else throw new TypeError('[Call] run failed, the \'func\' property must be a Function.');this.notifyFinished()}}}),rt.prototype=Object.create(B.prototype,{constructor:{writable:!0,value:rt}}),it.prototype=Object.create(d.prototype,{constructor:{value:it,writable:!0},closeAfter:{get:function(){return this._closeAfter},set:function(e){this._closeAfter=e instanceof V?e:null}},closeBefore:{get:function(){return this._closeBefore},set:function(e){this._closeBefore=e instanceof V?e:null}},openAfter:{get:function(){return this._openAfter},set:function(e){this._openAfter=e instanceof V?e:null}},openBefore:{get:function(){return this._openBefore},set:function(e){this._openBefore=e instanceof V?e:null}},attach:{writable:!0,value:function(){}},close:{writable:!0,value:function(){}},detach:{writable:!0,value:function(){}},dispose:{writable:!0,value:function(){}},initialize:{writable:!0,value:function(){}},open:{writable:!0,value:function(){}},update:{writable:!0,value:function(){}}}),lt.prototype=Object.create(rt.prototype,{constructor:{writable:!0,value:lt},run:{value:function(){if($t.debug(this+' run '+this.state),this.notifyStarted(),!(this.state instanceof c))return $t.warning(this+' failed, the State reference of this process not must be \'null\'.'),void this.notifyFinished();let e=this.state.view;e instanceof String||'string'==typeof e&&this.factory instanceof nt?e=this.factory.getObject(e):$t.warning(this+' run failed, the display of the state:'+this.state+' isn\'t register in the ioc factory with the view id : '+e),e instanceof it?(e.closeBefore&&this._chain.add(e.closeBefore),this._chain.add(new at(e.close,e)),e.closeAfter&&this._chain.add(e.closeAfter)):$t.warning(this+' failed, we can\'t find no View with the State : '+this.state),0<this._chain.length&&!this._chain.running?this._chain.run():this.notifyFinished()}}}),ot.prototype=Object.create(n.prototype,{constructor:{value:ot},receive:{value:function(e,t){$t.info(this+' receive '+e),this.chain&&e?(this.chain.add(new lt(e,this.factory),0,!0),t&&null===t.current&&!this.chain.running&&this.chain.run()):$t.warning(this+' failed with the state:'+e+' and the chain:'+this.chain)}}}),ut.prototype=Object.create(rt.prototype,{constructor:{writable:!0,value:ut},run:{value:function(){if($t.debug(this+' run '+this.state),this.notifyStarted(),!(this.state instanceof c))return $t.warning(this+' failed, the State reference of this process not must be \'null\'.'),void this.notifyFinished();let e=this.state.view;e instanceof String||'string'==typeof e&&this.factory instanceof nt?e=this.factory.getObject(e):$t.warning(this+' run failed, the display of the state:'+this.state+' isn\'t register in the ioc factory with the view id : '+e),e instanceof it?(e.openBefore&&this._chain.add(e.openBefore),this._chain.add(new at(e.open,e)),e.openAfter&&this._chain.add(e.openAfter)):$t.warning(this+' failed, we can\'t find no View in the State : '+this.state),0<this._chain.length&&!this._chain.running?this._chain.run():this.notifyFinished()}}}),st.prototype=Object.create(n.prototype,{constructor:{value:st},receive:{value:function(e){$t.info(this+' receive '+e),this.chain&&e?(this.chain.add(new ut(e,this.factory),0,!0),!this.chain.running&&this.chain.run()):$t.warning(this+' failed with the state:'+e+' and the chain:'+this.chain)}}}),dt.prototype=Object.create(ye.prototype,{constructor:{writable:!0,value:dt},supports:{writable:!0,value:function(e){return e===e}},toString:{writable:!0,value:function(){return'['+this.constructor.name+']'}},validate:{writable:!0,value:function(e){if(!this.supports(e))throw new Error(this+' validate('+e+') is mismatch.')}}}),ct.prototype=Object.create(dt.prototype,{constructor:{writable:!0,value:ct},current:{get:function(){return this._current},set:function(e){e===this._current&&this.security||(e&&this.validate(e),this._current&&this.notifyBeforeChange(this._current),this._current=e,this._current&&this.notifyChange(this._current))}},clear:{writable:!0,value:function(){this._current=null,this.notifyClear()}},notifyBeforeChange:{value:function(e){this.isLocked()||this.beforeChanged.emit(e,this)}},notifyChange:{value:function(e){this.isLocked()||this.changed.emit(e,this)}},notifyClear:{value:function(){this.isLocked()||this.cleared.emit(this)}}}),Object.defineProperty(pt,'DEFAULT_PRIMARY_KEY',{value:'id'}),pt.prototype=Object.create(ct.prototype,{constructor:{writable:!0,value:pt},length:{get:function(){return this._map.length}},primaryKey:{get:function(){return this._primaryKey},set:function(e){e===this._primaryKey||(this._primaryKey=(e instanceof String||'string'==typeof e)&&''!==e?e:pt.DEFAULT_PRIMARY_KEY,0<this._map.length&&this._map.clear())}},add:{value:function(e){if(null===e||void 0===e)throw new ReferenceError(this+' add method failed, the passed-in argument not must be \'null\'.');if(this.validate(e),!(this._primaryKey in e))throw new ReferenceError(this+' add method failed, the entry is not identifiable and don\'t contains a primary key with the name \''+this._primaryKey+'\'.');else if(!this._map.has(e[this._primaryKey]))this._map.set(e[this._primaryKey],e),this.notifyAdd(e);else throw new ReferenceError(this+' add method failed, the passed-in entry is already register in the model with the specified primary key, you must remove this entry before add a new entry.')}},clear:{value:function(){this._map.clear(),ct.prototype.clear.call(this)}},get:{value:function(e){return this._map.get(e)}},getByProperty:{value:function(e,t){if(null===e||!(e instanceof String||'string'==typeof e))return null;var n=this._map.values(),a=n.length;try{if(0<a)for(;-1<--a;)if(n[a][e]===t)return n[a]}catch(e){}return null}},has:{value:function(e){return this._map.hasValue(e)}},hasByProperty:{value:function(e,t){if(null===e||!(e instanceof String||'string'==typeof e))return!1;var n=this._map.values(),a=n.length;if(0<a)for(;-1<--a;)if(n[a][e]===t)return!0;return!1}},hasKey:{value:function(e){return this._map.has(e)}},isEmpty:{value:function(){return this._map.isEmpty()}},iterator:{value:function(){return this._map.iterator()}},keyIterator:{value:function(){return this._map.keyIterator()}},notifyAdd:{value:function(e){this.isLocked()||this.added.emit(e,this)}},notifyRemove:{value:function(e){this.isLocked()||this.removed.emit(e,this)}},notifyUpdate:{value:function(e){this.isLocked()||this.updated.emit(e,this)}},remove:{value:function(e){if(null===e||void 0===e)throw new ReferenceError(this+' remove method failed, the entry passed in argument not must be null.');if(!(this._primaryKey in e))throw new ReferenceError(this+' remove method failed, the entry is not identifiable and don\'t contains a primary key with the name \''+this._primaryKey+'\'.');else if(this._map.has(e[this._primaryKey]))this._map.delete(e[this._primaryKey]),this.notifyRemove(e);else throw new ReferenceError(this+' remove method failed, no entry register in the model with the specified primary key.')}},setMap:{value:function(e){this._map=e instanceof _?e:new h}},update:{value:function(e){if(!(this._primaryKey in e))throw new ReferenceError(this+' update method failed, the entry is not identifiable and don\'t contains a primary key with the name \''+this._primaryKey+'\'.');else if(this._map.has(e[this._primaryKey]))this._map.set(e[this._primaryKey],e),this.notifyUpdate(e);else throw new ReferenceError(this+' update method failed, no entry register in the model with the specified primary key.')}},toMap:{value:function(){return this._map}}}),_t.prototype=Object.create(V.prototype,{constructor:{writable:!0,value:_t},clone:{writable:!0,value:function(){return new _t(this.models,this.datas,this.autoClear,this.autoSelect,this.autoDequeue,this.cleanFirst)}},filterEntry:{writable:!0,value:function(e){return e}},reset:{writable:!0,value:function(){this.datas=null}},run:{writable:!0,value:function(...e){if(this.notifyStarted(),!(this.model instanceof pt))return void this.notifyFinished();if(!0!==this.autoClear||this.model.isEmpty()||this.model.clear(),0<e.length&&(this.datas=e[0]instanceof Array?e[0]:null),!(this.datas instanceof Array)||0===this.datas.length)return void this.notifyFinished();let t,n=this.datas.length;for(let a=0;a<n;a++)t=this.filterEntry(this.datas[a]),this.model.add(t),null===this.first&&null!==t&&(this.first=t);this.datas&&this.datas instanceof Array&&!0===this.autoDequeue&&(this.datas.length=0),null!==this.first&&!0===this.autoSelect&&(this.model.current=this.model.has(this.first)?this.model.get(this.first):this.first,!0===this.cleanFirst&&(this.first=null)),this.notifyFinished()}}}),vt.prototype=Object.create(_t.prototype,{constructor:{writable:!0,value:vt},filterEntry:{value:function(e){return e instanceof c?e:null}}}),gt.prototype=Object.create(pt.prototype,{constructor:{writable:!0,value:gt},supports:{writable:!0,value:function(e){return e instanceof c}}});var fn=[].concat([{id:'body_states_model',type:gt,dependsOn:['body_states_add','body_states_before_change','body_states_change'],singleton:!0,lazyInit:!0,properties:[{name:'security',value:!1}]},{id:'body_states_init',type:vt,properties:[{name:'autoDequeue',value:!0},{name:'datas',config:'states'},{name:'model',ref:'body_states_model'}]},{id:'body_states_add',type:ge,receivers:[{signal:'body_states_model.added'}]},{id:'body_states_before_change',type:ot,receivers:[{signal:'body_states_model.beforeChanged'}],args:[{ref:'states_chain'},{ref:'#this'}]},{id:'body_states_change',type:st,receivers:[{signal:'body_states_model.changed'}],args:[{ref:'states_chain'},{ref:'#this'}]}]);ft.prototype=Object.create(it.prototype,{constructor:{value:ft,writable:!0},close:{writable:!0,value:function(){try{if(!this.scene)throw new Error('scene');if(!this.container)throw new Error('container')}catch(e){return void Wt.warning(R(this+' close failed, the {0} reference not must be null.',e.message))}Wt.debug(this+' close'),this.scene.contains(this.container)&&this.scene.removeChild(this.container)}},open:{writable:!0,value:function(){try{if(!this.scene)throw new Error('scene');if(!this.container)throw new Error('container')}catch(e){return void Wt.warning(R(this+' open failed, the {0} reference not must be null.',e.message))}Wt.debug(this+' open'),this.scene.contains(this.container)||this.scene.addChild(this.container)}}}),bt.prototype=Object.create(G.prototype,{constructor:{value:bt,writable:!0},align:{get:function(){return this.getAttribute('align')},set:function(e){this.setAttribute('align',e)}},alphaTest:{get:function(){return this.getAttribute('alphaTest')},set:function(e){this.setAttribute('alphaTest',e)}},anchor:{get:function(){return this.getAttribute('anchor')},set:function(e){this.setAttribute('anchor',e)}},baseline:{get:function(){return this.getAttribute('baseline')},set:function(e){this.setAttribute('baseline',e)}},color:{get:function(){return this.getAttribute('color')},set:function(e){this.setAttribute('color',e)}},font:{get:function(){return this.getAttribute('font')},set:function(e){this.setAttribute('font',e)}},fontImage:{get:function(){return this.getAttribute('fontImage')},set:function(e){this.setAttribute('fontImage',e)}},height:{get:function(){return this.getAttribute('height')},set:function(e){this.setAttribute('height',e)}},letterSpacing:{get:function(){return this.getAttribute('letterSpacing')},set:function(e){this.setAttribute('letterSpacing',e)}},letterHeight:{get:function(){return this.getAttribute('letterHeight')},set:function(e){this.setAttribute('letterHeight',e)}},shader:{get:function(){return this.getAttribute('shader')},set:function(e){this.setAttribute('shader',e)}},side:{get:function(){return this.getAttribute('side')},set:function(e){this.setAttribute('side',e)}},tabSize:{get:function(){return this.getAttribute('tabSize')},set:function(e){this.setAttribute('tabSize',e)}},value:{get:function(){return this.getAttribute('value')},set:function(e){this.setAttribute('value',e)}},whitespace:{get:function(){return this.getAttribute('whitespace')},set:function(e){this.setAttribute('whitespace',e)}},width:{get:function(){return this.getAttribute('width')},set:function(e){this.setAttribute('width',e)}},wrapCount:{get:function(){return this.getAttribute('wrapCount')},set:function(e){this.setAttribute('wrapCount',e)}},wrapPixels:{get:function(){return this.getAttribute('wrapPixels')},set:function(e){this.setAttribute('wrapPixels',e)}},zOffset:{get:function(){return this.getAttribute('zOffset')},set:function(e){this.setAttribute('zOffset',e)}}}),mt.prototype=Object.create(W.prototype,{constructor:{value:mt,writable:!0},align:{get:function(){return this._text.align},set:function(e){this._text.align=e}},alphaTest:{get:function(){return this._text.alphaTest},set:function(e){this._text.alphaTest=e}},anchor:{get:function(){return this._text.anchor},set:function(e){this._text.anchor=e}},baseline:{get:function(){return this._text.baseline},set:function(e){this._text.baseline=e}},color:{get:function(){return this._text.color},set:function(e){this._text.color=e}},font:{get:function(){return this._text.font},set:function(e){this._text.font=e}},fontImage:{get:function(){return this._text.fontImage},set:function(e){this._text.fontImage=e}},letterSpacing:{get:function(){return this._text.letterSpacing},set:function(e){this._text.letterSpacing=e}},letterHeight:{get:function(){return this._text.letterHeight},set:function(e){this._text.letterHeight=e}},shader:{get:function(){return this.getAttribute('shader')},set:function(e){this.setAttribute('shader',e)}},side:{get:function(){return this.getAttribute('side')},set:function(e){this.setAttribute('side',e)}},tabSize:{get:function(){return this._text.tabSize},set:function(e){this._text.tabSize=e}},value:{get:function(){return this._text.value},set:function(e){this._text.value=e}},whitespace:{get:function(){return this._text.whitespace},set:function(e){this._text.whitespace=e}},wrapCount:{get:function(){return this._text.wrapCount},set:function(e){this._text.wrapCount=e}},wrapPixels:{get:function(){return this._text.wrapPixels},set:function(e){this._text.wrapPixels=e}},zOffset:{get:function(){return this._text.zOffset},set:function(e){this._text.zOffset=e}},loaded:{value:function(){this._element.removeEventListener('loaded',this._loaded),this._loaded=null,this.render()}},render:{value:function(){let e=this.height,t=this.radius,n=this.width,a=0,r=0,i=new THREE.Shape;i.moveTo(a,r+t),i.lineTo(a,r+e-t),i.quadraticCurveTo(a,r+e,a+t,r+e),i.lineTo(a+n-t,r+e),i.quadraticCurveTo(a+n,r+e,a+n,r+e-t),i.lineTo(a+n,r+t),i.quadraticCurveTo(a+n,r,a+n-t,r),i.lineTo(a+t,r),i.quadraticCurveTo(a,r,a,r+t),this._geometry=new THREE.ShapeGeometry(i),this._material=new THREE.MeshBasicMaterial({color:this.backgroundColor,shading:THREE.FlatShading}),this._mesh=new THREE.Mesh(this._geometry,this._material),this._mesh.position.x=-(n/2),this._mesh.position.y=-(e/2),this._element.setObject3D('mesh',this._mesh),this._geometry=null,this._material=null,this._mesh=null}}}),ht.prototype=Object.create(P.prototype,{constructor:{value:ht,writable:!0},handleEvent:{value:function(){try{if(!this.current)throw new Error('current');if(!this.states)throw new Error('states')}catch(e){return void Wt.warning(R(this+' run failed, the {0} reference not must be null.',e.message))}this.states.current.id!==this.current&&(this.states.current=this.states.get(this.current))}}});var bn=[{id:'home_button_back',type:mt,singleton:!0,lazyInit:!0,dependsOn:['home_button_click'],properties:[{name:'#init',config:'home_button'},{name:'#init',config:'home_button_back'}]},{id:'home_button_front',type:mt,singleton:!0,lazyInit:!0,dependsOn:['home_button_click'],properties:[{name:'#init',config:'home_button'},{name:'#init',config:'home_button_front'}]},{id:'home_button_click',type:ht,singleton:!0,lazyInit:!0,properties:[{name:'current',value:Ut.DOLPHINS},{name:'states',ref:'body_states_model'}],listeners:[{dispatcher:'home_button_back.element',type:'click'},{dispatcher:'home_button_front.element',type:'click'}]}];yt.prototype=Object.create(W.prototype,{constructor:{value:yt,writable:!0},height:{get:function(){return this.getAttribute('geometry').height},set:function(e){this.setAttribute('geometry','height',e)}},width:{get:function(){return this.getAttribute('geometry').width},set:function(e){this.setAttribute('geometry','width',e)}}});wt.prototype=Object.create(n.prototype,{constructor:{value:wt,writable:!0},receive:{value:function(){try{if(!this.sound)throw new Error('sound')}catch(e){return void Wt.warning(R(this+' run failed, the {0} reference not must be null.',e.message))}this.sound.play()}}});Et.prototype=Object.create(B.prototype,{constructor:{value:Et,writable:!0},run:{value:function(){this.notifyStarted();try{if(!this.sky)throw new Error('sky')}catch(e){return Wt.warning(R(this+' run failed, the {0} reference not must be null.',e.message)),void this.notifyFinished()}Wt.debug(this+' run'),this.sky.color='',this.sky.src='./images/image.min.jpg',this.notifyFinished()}}});var mn=[{id:'home_view',type:ft,singleton:!0,lazyInit:!0,properties:[{name:'openAfter',ref:'home_open_after'},{name:'container',ref:'home_container'},{name:'scene',ref:'scene'}]}].concat(bn,[{id:'home_container',type:G,singleton:!0,lazyInit:!0,properties:[{name:'addChild',args:[{ref:'home_title_back'}]},{name:'addChild',args:[{ref:'home_title_front'}]},{name:'addChild',args:[{ref:'home_subtitle_back'}]},{name:'addChild',args:[{ref:'home_subtitle_front'}]}]}],[{id:'home_image_front',type:yt,singleton:!0,lazyInit:!0,properties:[{name:'#init',config:'home_image'},{name:'#init',config:'home_image_front'}]},{id:'home_image_back',type:yt,singleton:!0,lazyInit:!0,properties:[{name:'#init',config:'home_image'},{name:'#init',config:'home_image_back'}]}],[{id:'home_sound',type:Y,singleton:!0,lazyInit:!0,generates:['home_sound_ended'],properties:[{name:'#init',config:'home_sound'}]},{id:'home_sound_ended',type:wt,singleton:!0,lazyInit:!0,receivers:[{signal:'home_sound.finishIt'}],properties:[{name:'sound',ref:'home_sound2'}]}],[{id:'home_subtitle_front',type:bt,singleton:!0,lazyInit:!0,properties:[{name:'#init',config:'home_subtitle'},{name:'#init',locale:'home_subtitle'},{name:'#init',config:'home_subtitle_front'}]},{id:'home_subtitle_back',type:bt,singleton:!0,lazyInit:!0,properties:[{name:'#init',config:'home_subtitle'},{name:'#init',config:'home_subtitle_back'}]}],[{id:'home_title_front',type:bt,singleton:!0,lazyInit:!0,properties:[{name:'#init',config:'home_title'},{name:'#init',locale:'home_title'},{name:'#init',config:'home_title_front'}]},{id:'home_title_back',type:bt,singleton:!0,lazyInit:!0,properties:[{name:'#init',config:'home_title'},{name:'#init',config:'home_title_back'}]}],[{id:'home_close_after',type:Et,properties:[]}],[{id:'home_open_after',type:Et,singleton:!0,lazyInit:!0,properties:[{name:'sky',ref:'sky'}]}]),hn=[].concat(mn),yn=[].concat(nn,on,un,fn,hn),wn=new nt;wn.config.useLogger=!0,wn.config.setConfigTarget(Ht),wn.config.setLocaleTarget({home_title:{value:'TALE'},home_subtitle:{value:'Each story is a Journey'}}),At.prototype=Object.create(l.prototype,{constructor:{value:At},init:{value:function(){Ht.debug&&Wt.debug(this+' init'),wn.finishIt.connect(this.ready.bind(this),0,!0),wn.run(yn)}},ready:{value:function(){Ht.debug&&Wt.debug(this+' ready'),wn.getObject('run')}}});var En=Object.defineProperties({},{name:{enumerable:!0,value:function(e){return(e instanceof String||'string'==typeof e)&&''!==e?e.charAt(0).toUpperCase()+e.substring(1):''}('vegas-aframe')},description:{enumerable:!0,value:'The VEGAS JS + AFrame prototype'},version:{enumerable:!0,value:'1.0.0'},license:{enumerable:!0,value:'MPL-1.1 OR GPL-2.0+ OR GPL-3.0+'},url:{enumerable:!0,value:'https://github.com/ekameleoon/vegas-aframe'}});try{window&&window.addEventListener('load',function e(){window.removeEventListener('load',e,!1),t(En.name,En.version,En.url);var n=new At;n.init()},!1)}catch(e){console&&console.warn(e)}e.metas=En,e.sayHello=t,e.skipHello=function(){kt=!0},Object.defineProperty(e,'__esModule',{value:!0})});
