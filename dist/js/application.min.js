/**
 * The VEGAS JS Skeleton application - version: 1.0.7 - license: MPL 2.0/GPL 2.0+/LGPL 2.1+ - Follow me on Twitter! @ekameleon
 */(function(e,t){'object'==typeof exports&&'undefined'!=typeof module?t(exports):'function'==typeof define&&define.amd?define(['exports'],t):t(e.application={})})(this,function(e){'use strict';function t(e,t=null){if(!(e instanceof Function))return null;if(null===t||!(t instanceof Array)||0===t.length)return new e;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6]);case 8:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]);case 9:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]);case 10:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9]);case 11:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10]);case 12:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11]);case 13:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12]);case 14:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13]);case 15:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14]);case 16:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]);case 17:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15],t[16]);case 18:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15],t[16],t[17]);case 19:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15],t[16],t[17],t[18]);case 20:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15],t[16],t[17],t[18],t[19]);case 21:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15],t[16],t[17],t[18],t[19],t[20]);case 22:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15],t[16],t[17],t[18],t[19],t[20],t[21]);case 23:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15],t[16],t[17],t[18],t[19],t[20],t[21],t[22]);case 24:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15],t[16],t[17],t[18],t[19],t[20],t[21],t[22],t[23]);case 25:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15],t[16],t[17],t[18],t[19],t[20],t[21],t[22],t[23],t[24]);case 26:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15],t[16],t[17],t[18],t[19],t[20],t[21],t[22],t[23],t[24],t[25]);case 27:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15],t[16],t[17],t[18],t[19],t[20],t[21],t[22],t[23],t[24],t[25],t[26]);case 28:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15],t[16],t[17],t[18],t[19],t[20],t[21],t[22],t[23],t[24],t[25],t[26],t[27]);case 29:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15],t[16],t[17],t[18],t[19],t[20],t[21],t[22],t[23],t[24],t[25],t[26],t[27],t[28]);case 30:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15],t[16],t[17],t[18],t[19],t[20],t[21],t[22],t[23],t[24],t[25],t[26],t[27],t[28],t[29]);case 31:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15],t[16],t[17],t[18],t[19],t[20],t[21],t[22],t[23],t[24],t[25],t[26],t[27],t[28],t[29],t[30]);case 32:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15],t[16],t[17],t[18],t[19],t[20],t[21],t[22],t[23],t[24],t[25],t[26],t[27],t[28],t[29],t[30],t[31]);default:return null;}}function r(){}function n(){}function a(e,t){Object.defineProperties(this,{key:{value:e,writable:!0},value:{value:t,writable:!0}})}function l(){}function i(){}function o(e){if(!(e instanceof Array))throw new ReferenceError(this+' constructor failed, the passed-in Array argument not must be \'null\'.');Object.defineProperties(this,{_a:{value:e,writable:!0},_k:{value:-1,writable:!0}})}function u(e){if(e&&e instanceof n)Object.defineProperties(this,{_m:{value:e,writable:!0},_i:{value:new o(e.keys()),writable:!0},_k:{value:null,writable:!0}});else throw new ReferenceError(this+' constructor failed, the passed-in KeyValuePair argument not must be \'null\'.')}function s(e=null,t=null){if(Object.defineProperties(this,{_keys:{value:[],writable:!0},_values:{value:[],writable:!0}}),null===e||null===t)this._keys=[],this._values=[];else{let r=e instanceof Array&&t instanceof Array&&0<e.length&&e.length===t.length;this._keys=r?[].concat(e):[],this._values=r?[].concat(t):[]}}function d(e){return!!e&&(e instanceof c||'id'in e)}function c(){Object.defineProperties(this,{id:{value:null,writable:!0}})}function v(e=null){Object.defineProperties(this,{autoClear:{value:!1,writable:!0},_evaluators:{value:[],writable:!0}}),e instanceof Array&&0<e.length&&this.add.apply(this,e)}function p(){}function f(){}function g(){}function _(){}function b(e){return!!e&&(!!(e instanceof E)||!!e.isLocked&&e.isLocked instanceof Function&&!!e.lock&&e.lock instanceof Function&&!!e.unlock&&e.unlock instanceof Function)}function E(){Object.defineProperties(this,{__lock__:{writable:!0,value:!1}})}function y(e,t='value',r=null){Object.defineProperties(this,{args:{value:null,writable:!0},evaluators:{value:r instanceof Array?r:null,writable:!0},scope:{value:null,writable:!0},value:{value:e,writable:!0},_policy:{value:null,writable:!0}}),this.policy=t}function h(e){if(!(e instanceof Array)||0===e.length)return null;else{let t=[],r=e.length;for(let n,a=0;a<r;a++)if(n=e[a],null!==n){let e=ye.CALLBACK in n?n[ye.CALLBACK]:null,r=ye.CONFIG in n?n[ye.CONFIG]+'':null,a=ye.LOCALE in n?n[ye.LOCALE]+'':null,l=ye.REFERENCE in n?n[ye.REFERENCE]+'':null,i=ye.VALUE in n?n[ye.VALUE]:null,o=ye.EVALUATORS in n?n[ye.EVALUATORS]:null;if(null!==l&&0<l.length)t.push(new y(l,ye.REFERENCE,o));else if(null!==r&&0<r.length)t.push(new y(r,ye.CONFIG,o));else if(null!==a&&0<a.length)t.push(new y(a,ye.LOCALE,o));else if(e instanceof Function||(e instanceof String||'string'==typeof e)&&''!==e){let r=new y(e,ye.CALLBACK,o);ye.SCOPE in n&&(r.scope=n[ye.SCOPE]),ye.ARGUMENTS in n&&n[ye.ARGUMENTS]instanceof Array&&(r.args=h(n[ye.ARGUMENTS])),t.push(r)}else t.push(new y(i,ye.VALUE,o))}return 0<t.length?t:null}}function m(e,t=!1,r=0,n='    '){r=isNaN(r)?0:r,t=!!t,n||(n='    ');var a,i=[],o=e.length;for(a=0;a<o;a++){if(e[a]===void 0){i.push('undefined');continue}if(null===e[a]){i.push('null');continue}t&&r++,i.push(L(e[a],t,r,n)),t&&r--}if(t){var l=[];for(a=0;a<r;a++)l.push(n);var u='\n'+l.join('');return u+'['+u+n+i.join(','+u+n)+u+']'}return'['+i.join(',')+']'}function w(e,t=!1){if(t=!!t,t)return'new Date('+(e.valueOf()+')');var r=e.getFullYear(),n=e.getMonth(),a=e.getDate(),l=e.getHours(),i=e.getMinutes(),o=e.getSeconds(),u=e.getMilliseconds(),s=[r,n,a,l,i,o,u];for(s.reverse();0===s[0];)s.splice(0,1);return s.reverse(),'new Date('+s.join(',')+')'}function O(e,t=!1,r=0,n='    '){r=isNaN(r)?0:r,t=!!t,n||(n='    ');var a=[];for(var l in e)if(e.hasOwnProperty(l)){if(void 0===e[l]){a.push(l+':undefined');continue}if(null===e[l]){a.push(l+':null');continue}t&&r++,a.push(l+':'+L(e[l],t,r,n)),t&&r--}if(a=a.sort(),t){let e=[];for(var o=0;o<r;o++)e.push(n);let t='\n'+e.join('');return t+'{'+t+n+a.join(','+t+n)+t+'}'}return'{'+a.join(',')+'}'}function A(e){for(var t=e.toString(16);4>t.length;)t='0'+t;return t}function R(e){for(var t,r='"',n='',a='',l=0,i=e.length;l<i;){if(a=e.charAt(l),t=e.charCodeAt(l),255<t){n+='\\u'+A(t),l++;continue}switch(a){case'\b':{n+='\\b';break}case'\t':{n+='\\t';break}case'\n':{n+='\\n';break}case'\x0B':{n+='\\v';break}case'\f':{n+='\\f';break}case'\r':{n+='\\r';break}case'"':{n+='\\"';break}case'\'':{n+='\\\'';break}case'\\':{n+='\\\\';break}default:n+=a;}l++}return r+n+r}function L(e,t,r,n){return r=isNaN(r)?0:r,t=!!t,n||(n='    '),void 0===e?'undefined':null===e?'null':'string'==typeof e||e instanceof String?R(e):'boolean'==typeof e||e instanceof Boolean?e?'true':'false':'number'==typeof e||e instanceof Number?e.toString():e instanceof Date?w(e):e instanceof Array?m(e,t,r,n):e.constructor&&e.constructor===Object?O(e,t,r,n):'toSource'in e?e.toSource(r):'<unknown>'}function T(e,t,r=0,n=-1){if(!(e instanceof String||'string'==typeof e)||''===e)return-1;if(!(t instanceof Array))return-1;r=0<r?0:r,n=0>n?-1:n;let a,i=e.length;a=0>n||n>i-r?i-1:r+n-1;for(let l=r;l<=a;l++)if(-1<t.indexOf(e[l]))return l;return-1}function I(e,t,r){this.name='InvalidChannelError',this.message=e||'invalid channel error',this.fileName=t,this.lineNumber=r,this.stack=new Error().stack}function N(e,t=0,r=!1){this.auto=r,this.receiver=e,this.priority=t}function S(){Object.defineProperties(this,{proxy:{value:null,configurable:!0,writable:!0},receivers:{writable:!0,value:[]}})}function C(e,t){Object.defineProperties(this,{_name:{value:'string'==typeof t||t instanceof String?t:'',enumerable:!1,writable:!0,configurable:!0},_value:{value:isNaN(e)?0:e,enumerable:!1,writable:!0,configurable:!0}})}function P(e,t){C.call(this,e,t)}function F(e,t,r){this.channel=r,this.level=t instanceof P?t:P.ALL,this.message=e}function D(e){S.call(this),Object.defineProperties(this,{_entry:{value:new F(null,null,e),writable:!0}})}function k(e,...t){if(null===e||!(e instanceof String||'string'==typeof e))return'';if(0<t.length){t=[].concat.apply([],t);let n=t.length;for(var r=0;r<n;r++)e=e.replace(new RegExp('\\{'+r+'\\}','g'),t[r])}return e}function M(e,t,r){this.name='InvalidFilterError',this.message=e||'invalid filter error',this.fileName=t,this.lineNumber=r,this.stack=new Error().stack}function j(){Object.defineProperties(this,{_count:{value:0,writable:!0},_factory:{value:null,writable:!0},_filters:{value:['*'],writable:!0},_level:{value:P.ALL,writable:!0}}),this.factory=me}function x(){Object.defineProperties(this,{_loggers:{value:new s,writable:!0},_targetLevel:{value:P.NONE,writable:!0},_targets:{value:[],writable:!0}})}function Y(e,t,r=null,n=!1,a='after',l=0){Object.defineProperties(this,{dispatcher:{value:e,writable:!0},method:{value:r,writable:!0},priority:{value:l,writable:!0},type:{value:t,writable:!0},useCapture:{value:!0===n,writable:!0},_order:{value:a===Oe.BEFORE?Oe.BEFORE:Oe.AFTER,writable:!0}})}function G(e){if(!e)return null;let t=null;if(e instanceof Array?t=e:ye.LISTENERS in e&&e[ye.LISTENERS]instanceof Array&&(t=e[ye.LISTENERS]),null===t||0===t.length)return null;let r,n,a,l=[],o=e[ye.ID]+'',u=t.length;for(let s=0;s<u;s++)if(r=t[s],null!==r&&Y.DISPATCHER in r&&Y.TYPE in r){if(n=r[Y.DISPATCHER],!(n instanceof String||'string'==typeof n)||0===n.length)continue;if(a=r[Y.TYPE],!(a instanceof String||'string'==typeof a)||0===a.length)continue;l.push(new Y(n,a,r[Y.METHOD],!0===r[Y.USE_CAPTURE],r[Y.ORDER]===Oe.BEFORE?Oe.BEFORE:Oe.AFTER,isNaN(r[Y.PRIORITY])?0:r[Y.PRIORITY]))}else we&&we.warning('ObjectBuilder.createListeners failed, a listener definition is invalid in the object definition "{0}" at "{1}" with the value : {2}',o,s,L(r));return 0<l.length?l:null}function U(){}function V(e,t,r='value',n=null){Object.defineProperties(this,{args:{value:null,writable:!0},evaluators:{value:n instanceof Array?n:null,writable:!0},name:{value:e,writable:!0},scope:{value:null,writable:!0},value:{value:t,writable:!0},_policy:{value:null,writable:!0}}),this.policy=r}function B(e){if(!e)return null;let t=null;if(e instanceof Array?t=e:ye.PROPERTIES in e&&e[ye.PROPERTIES]instanceof Array&&(t=e[ye.PROPERTIES]),!(t instanceof Array)||0===t.length)return null;let r=[],n=e[ye.ID]+'',a=t.length,l=null;for(let o=0;o<a;o++){l=t[o];let e=null,a=null,i=null,u=null,s=null,d=null,c=null,v=null;if(l&&ye.NAME in l){if(s=l[ye.NAME],!(s instanceof String||'string'==typeof s)||''===s.length)continue;ye.EVALUATORS in l&&(v=l[ye.EVALUATORS]instanceof Array?l[ye.EVALUATORS]:null),ye.ARGUMENTS in l&&(e=l[ye.ARGUMENTS]||null),ye.CONFIG in l&&(i=l[ye.CONFIG]||null),ye.LOCALE in l&&(u=l[ye.LOCALE]||null),ye.CALLBACK in l&&(a=l[ye.CALLBACK]),ye.REFERENCE in l&&(d=l[ye.REFERENCE]||null),ye.VALUE in l&&(c=l[ye.VALUE]);let t=null;(d instanceof String||'string'==typeof d)&&''!==d?t=new V(s,d,ye.REFERENCE,v):(i instanceof String||'string'==typeof i)&&''!==i?t=new V(s,i,ye.CONFIG,v):(u instanceof String||'string'==typeof u)&&''!==u?t=new V(s,u,ye.LOCALE,v):a instanceof Function||(a instanceof String||'string'==typeof a)&&''!==a?(t=new V(s,a,ye.CALLBACK,v),e&&e instanceof Array&&(t.args=h(e)),ye.SCOPE in l&&(t.scope=l[ye.SCOPE]||null)):e&&e instanceof Array?t=new V(s,h(e),ye.ARGUMENTS):t=new V(s,c,ye.VALUE,v),t&&r.push(t)}else we&&we.warning('createProperties failed, a property definition is invalid in the object definition "{0}" at "{1}" with the value : {2}',n,o,L(l))}return 0<r.length?r:null}function H(e,t=null,r=0,n=!1,a='after'){Object.defineProperties(this,{autoDisconnect:{value:n,writable:!0},order:{get:function(){return this._order},set:function(e){this._order=e===Oe.BEFORE?Oe.BEFORE:Oe.AFTER}},priority:{value:r,writable:!0},signal:{value:e,writable:!0},slot:{value:t,writable:!0},_order:{value:a===Oe.BEFORE?Oe.BEFORE:Oe.AFTER,writable:!0}})}function K(e){if(!e)return null;let t=null;if(e instanceof Array?t=e:ye.RECEIVERS in e&&e[ye.RECEIVERS]instanceof Array&&(t=e[ye.RECEIVERS]),null===t||0===t.length)return null;let r,n,a=[],l=e[ye.ID]+'',o=t.length;for(let u=0;u<o;u++)if(r=t[u],null!==r&&H.SIGNAL in r){if(n=r[H.SIGNAL],!(n instanceof String||'string'==typeof n)||0===n.length)continue;a.push(new H(n,r[H.SLOT],isNaN(r[H.PRIORITY])?0:r[H.PRIORITY],!0===r[H.AUTO_DISCONNECT],r[H.ORDER]===Oe.BEFORE?Oe.BEFORE:Oe.AFTER))}else we.warning('ObjectBuilder.createReceivers failed, a receiver definition is invalid in the object definition "{0}" at "{1}" with the value : {2}',l,u,L(r));return 0<a.length?a:null}function z(e,t){Object.defineProperties(this,{args:{value:t,writable:!0},name:{value:e,writable:!0}})}function W(e,t,r){z.call(this,t,r),Object.defineProperties(this,{factory:{value:e,writable:!0}})}function X(e,t,r=null){V.call(this,t,null,null,r),Object.defineProperties(this,{factory:{value:e,writable:!0}})}function Z(e){Object.defineProperties(this,{ref:{value:e instanceof String||'string'==typeof e?e:null,writable:!0}})}function $(e,t,r){z.call(this,t,r),Object.defineProperties(this,{type:{value:e,writable:!0}})}function q(e,t,r=null){V.call(this,e,null,null,r),Object.defineProperties(this,{type:{value:t,writable:!0}})}function J(e){Object.defineProperties(this,{value:{writable:!0,value:e}})}function Q(e){return Ae.FACTORY_METHOD in e?W.build(e[Ae.FACTORY_METHOD]):Ae.FACTORY_PROPERTY in e?X.build(e[Ae.FACTORY_PROPERTY]):Ae.FACTORY_REFERENCE in e?new Z(e[Ae.FACTORY_REFERENCE]):Ae.FACTORY_VALUE in e?new J(e[Ae.FACTORY_VALUE]):Ae.STATIC_FACTORY_METHOD in e?$.build(e[Ae.STATIC_FACTORY_METHOD]):Ae.STATIC_FACTORY_PROPERTY in e?q.build(e[Ae.STATIC_FACTORY_PROPERTY]):null}function ee(e,t,r=!1,n=!1,a=!1){if(null===e||e===void 0)throw new ReferenceError(this+' constructor failed, the \'id\' value passed in argument not must be empty or \'null\' or \'undefined\'.');if(null===t||void 0===t)throw new ReferenceError(this+' constructor failed, the \'type\' passed in argument not must be empty or \'null\' or \'undefined\'.');Object.defineProperties(this,{constructorArguments:{value:null,enumerable:!0,writable:!0},destroyMethodName:{value:null,enumerable:!0,writable:!0},id:{value:e,enumerable:!0,writable:!0},identify:{value:!1,enumerable:!0,writable:!0},initMethodName:{value:null,enumerable:!0,writable:!0},lock:{value:!1,enumerable:!0,writable:!0},properties:{value:null,enumerable:!0,writable:!0},type:{value:t,enumerable:!0,writable:!0},_afterListeners:{value:null,writable:!0},_beforeListeners:{value:null,writable:!0},_dependsOn:{value:null,writable:!0},_generates:{value:null,writable:!0},_lazyInit:{value:n&&r,writable:!0},_lazyType:{value:!0===a,writable:!0},_singleton:{value:!0===r,writable:!0},_scope:{value:!0===r?Re.SINGLETON:Re.PROTOTYPE,writable:!0},_strategy:{value:null,writable:!0}})}function te(e){let t=new ee(e[ye.ID]||null,e[ye.TYPE]||null,e[ye.SINGLETON]||!1,e[ye.LAZY_INIT]||!1,e[ye.LAZY_TYPE]||!1);ye.IDENTIFY in e&&(e[ye.IDENTIFY]instanceof Boolean||'boolean'==typeof e[ye.IDENTIFY])&&(t.identify=e[ye.IDENTIFY]),ye.LOCK in e&&(e[ye.LOCK]instanceof Boolean||'boolean'==typeof e[ye.LOCK])&&(t.lock=e[ye.LOCK]),ye.ARGUMENTS in e&&e[ye.ARGUMENTS]instanceof Array&&(t.constructorArguments=h(e[ye.ARGUMENTS])),ye.DESTROY_METHOD_NAME in e&&(t.destroyMethodName=e[ye.DESTROY_METHOD_NAME]),ye.INIT_METHOD_NAME in e&&(t.initMethodName=e[ye.INIT_METHOD_NAME]),ye.SCOPE in e&&(t.scope=e[ye.SCOPE]),ye.DEPENDS_ON in e&&e[ye.DEPENDS_ON]instanceof Array&&(t.dependsOn=e[ye.DEPENDS_ON]),ye.GENERATES in e&&e[ye.GENERATES]instanceof Array&&(t.generates=e[ye.GENERATES]);let r=G(e);r&&(t.listeners=r);let n=B(e);n&&(t.properties=n);let a=K(e);a&&(t.receivers=a);let l=Q(e);return l&&(t.strategy=l),t}function re(){}function ne(){Object.defineProperties(this,{expressions:{value:new s},_beginSeparator:{value:'{',writable:!0},_endSeparator:{value:'}',writable:!0},_pattern:{value:'{0}((\\w+)|(\\w+)((.\\w)+|(.\\w+))){1}'},_reg:{value:null,writable:!0}}),this._reset()}function ae(e){Object.defineProperties(this,{separator:{value:'.',writable:!0},target:{value:e,writable:!0,configurable:!0},throwError:{value:!1,writable:!0},undefineable:{value:null,writable:!0}})}function le(e){ae.call(this),this.config=e instanceof de?e:null,Object.defineProperties(this,{target:{get:function(){return null===this.config?null:this.config.config}}})}function ie(e){ae.call(this),this.config=e instanceof de?e:null,Object.defineProperties(this,{target:{get:function(){return null===this.config?null:this.config.locale}}})}function oe(e){Object.defineProperties(this,{factory:{value:e instanceof ge?e:null,writable:!0},separator:{value:'.',writable:!0},undefineable:{value:null,writable:!0},throwError:{get:function(){return this._propEvaluator.throwError},set:function(e){this._propEvaluator.throwError=e}},_propEvaluator:{value:new ae,writable:!0}})}function ue(e,t=null){if((e instanceof String||'string'==typeof e)&&(e=e.split('.'),0<e.length))try{var r=t||Te;return e.forEach((e)=>{r.hasOwnProperty(e)&&(r=r[e])}),r}catch(t){}}function se(e=null){Object.defineProperties(this,{config:{value:e instanceof de?e:null,writable:!0},throwError:{value:!1,writable:!0}})}function de(e=null){Object.defineProperties(this,{defaultDestroyMethod:{value:null,writable:!0,enumerable:!0},defaultInitMethod:{value:null,writable:!0,enumerable:!0},domain:{value:null,writable:!0,enumerable:!0},identify:{value:!1,writable:!0,enumerable:!0},lazyInit:{value:!1,writable:!0,enumerable:!0},lock:{value:!1,writable:!0,enumerable:!0},parameters:{value:null,writable:!0,enumerable:!0},root:{value:null,writable:!0,enumerable:!0},stage:{value:null,writable:!0,enumerable:!0},useLogger:{value:!1,writable:!0,enumerable:!0},_config:{value:{},writable:!0},_configEvaluator:{value:new le(this),writable:!0},_locale:{value:{},writable:!0},_localeEvaluator:{value:new ie(this),writable:!0},_referenceEvaluator:{value:new oe,writable:!0},_typeAliases:{value:new s,writable:!0},_typeEvaluator:{value:new se(this),writable:!0},_typeExpression:{value:new ne,writable:!0},_typePolicy:{value:Ie.NONE,writable:!0}}),this.throwError=!1,e&&this.initialize(e)}function ce(){}function ve(){Object.defineProperties(this,{finishIt:{value:new S},startIt:{value:new S},__lock__:{writable:!0,value:!1},_phase:{writable:!0,value:Ne.INACTIVE},_running:{writable:!0,value:!1}})}function pe(){ve.call(this),Object.defineProperties(this,{changeIt:{value:new S},clearIt:{value:new S},errorIt:{value:new S},infoIt:{value:new S},looping:{value:!1,writable:!0},loopIt:{value:new S},pauseIt:{value:new S},progressIt:{value:new S},resumeIt:{value:new S},stopIt:{value:new S},throwError:{value:!1,writable:!0},timeoutIt:{value:new S}})}function fe(){pe.call(this),Object.defineProperties(this,{_map:{writable:!0,value:new s}})}function ge(e=null,t=null){fe.call(this),Object.defineProperties(this,{objects:{value:t instanceof Array?t:null,writable:!0},bufferSingletons:{value:[],writable:!0},_config:{value:null,writable:!0},_evaluator:{value:new v},_singletons:{value:new s}}),this.config=e}function _e(e=null){if(j.call(this),Object.defineProperties(this,{_lineNumber:{value:1,writable:!0}}),this.includeChannel=!1,this.includeDate=!1,this.includeLevel=!1,this.includeLines=!1,this.includeMilliseconds=!1,this.includeTime=!1,this.separator=' ',e)for(var t in e)this.hasOwnProperty(t)&&(this[t]=e[t])}function be(e=null){_e.call(this,e)}r.prototype=Object.create(Object.prototype,{constructor:{writable:!0,value:r},eval:{writable:!0,value:function(){}},toString:{writable:!0,value:function(){return'['+this.constructor.name+']'}}}),n.prototype=Object.create(Object.prototype,{constructor:{writable:!0,value:n},length:{get:()=>0},clear:{value:function(){},writable:!0},clone:{value:function(){return new n},writable:!0},copyFrom:{value:function(){},writable:!0},delete:{value:function(){},writable:!0},forEach:{value:function(e=null){},writable:!0},get:{value:function(){return null},writable:!0},has:{value:function(){return!1},writable:!0},hasValue:{value:function(){return!1},writable:!0},isEmpty:{value:function(){return!1},writable:!0},iterator:{value:function(){return null},writable:!0},keyIterator:{value:function(){return null},writable:!0},keys:{value:function(){return null},writable:!0},set:{value:function(){},writable:!0},toString:{value:function(){return'['+this.constructor.name+']'},writable:!0},values:{value:function(){},writable:!0}}),a.prototype=Object.create(Object.prototype,{constructor:{value:a},clone:{value:function(){return new a(this.key,this.value)}},toString:{value:function(){return'[MapEntry key:'+this.key+' value:'+this.value+']'}}}),l.prototype=Object.create(Object.prototype,{constructor:{writable:!0,value:l},format:{value:function(e){if(e instanceof n){let t='{',r=e.keys(),n=r.length;if(0<n){let a=e.values();for(let e=0;e<n;e++)t+=r[e]+':'+a[e],e<n-1&&(t+=',')}return t+='}',t}return'{}'}}});var Ee=new l;i.prototype=Object.create(Object.prototype,{constructor:{writable:!0,value:i},delete:{writable:!0,value:function(){}},hasNext:{writable:!0,value:function(){}},key:{writable:!0,value:function(){}},next:{writable:!0,value:function(){}},reset:{writable:!0,value:function(){}},seek:{writable:!0,value:function(){}},toString:{writable:!0,value:function(){return'__clazzname__'in this.constructor||Object.defineProperty(this.constructor,'__clazzname__',{value:this.constructor.name}),'['+this.constructor.__clazzname__+']'}}}),o.prototype=Object.create(i.prototype,{constructor:{value:o},delete:{value:function(){return this._a.splice(this._k--,1)[0]}},hasNext:{value:function(){return this._k<this._a.length-1}},key:{value:function(){return this._k}},next:{value:function(){return this._a[++this._k]}},reset:{value:function(){this._k=-1}},seek:{value:function(e){e=Math.max(Math.min(e-1,this._a.length),-1),this._k=isNaN(e)?-1:e}}}),u.prototype=Object.create(i.prototype,{constructor:{writable:!0,value:u},delete:{value:function(){return this._i.delete(),this._m.delete(this._k)}},hasNext:{value:function(){return this._i.hasNext()}},key:{value:function(){return this._k}},next:{value:function(){return this._k=this._i.next(),this._m.get(this._k)}},reset:{value:function(){this._i.reset()}},seek:{value:function(){throw new Error('This Iterator does not support the seek() method.')}}}),s.prototype=Object.create(n.prototype,{constructor:{writable:!0,value:s},length:{get:function(){return this._keys.length}},clear:{value:function(){this._keys=[],this._values=[]}},clone:{value:function(){return new s(this._keys,this._values)}},copyFrom:{value:function(e){if(e&&e instanceof n){let t=e.keys(),r=e.values(),n=t.length;for(let e=0;e<n;e-=-1)this.set(t[e],r[e])}}},delete:{value:function(e){let t=null,r=this.indexOfKey(e);return-1<r&&(t=this._values[r],this._keys.splice(r,1),this._values.splice(r,1)),t}},forEach:{value:function(e,t=null){if('function'!=typeof e)throw new TypeError(e+' is not a function');let r=this._keys.length;for(let n=0;n<r;n++)e.call(t,this._values[n],this._keys[n],this)}},get:{value:function(e){return this._values[this.indexOfKey(e)]}},getKeyAt:{value:function(e){return this._keys[e]}},getValueAt:{value:function(e){return this._values[e]}},has:{value:function(e){return-1<this.indexOfKey(e)}},hasValue:{value:function(e){return-1<this.indexOfValue(e)}},indexOfKey:{value:function(e){for(let t=this._keys.length;-1<--t;)if(this._keys[t]===e)return t;return-1}},indexOfValue:{value:function(e){for(let t=this._values.length;-1<--t;)if(this._values[t]===e)return t;return-1}},isEmpty:{value:function(){return 0===this._keys.length}},iterator:{value:function(){return new u(this)}},keyIterator:{value:function(){return new o(this._keys)}},keys:{value:function(){return this._keys.concat()}},set:{value:function(e,t){let n=null,r=this.indexOfKey(e);return 0>r?(this._keys.push(e),this._values.push(t)):(n=this._values[r],this._values[r]=t),n}},setKeyAt:{value:function(e,t){if(e>=this._keys.length)throw new RangeError('ArrayMap.setKeyAt('+e+') failed with an index out of the range.');if(this.containsKey(t))return null;let r=this._keys[e];if(void 0===r)return null;let n=this._values[e];return this._keys[e]=t,new a(r,n)}},setValueAt:{value:function(e,t){if(e>=this._keys.length)throw new RangeError('ArrayMap.setValueAt('+e+') failed with an index out of the range.');let r=this._values[e];if(void 0===r)return null;let n=this._keys[e];return this._values[e]=t,new a(n,r)}},toString:{value:function(){return Ee.format(this)}},values:{value:function(){return this._values.concat()}}}),c.prototype=Object.create(Object.prototype,{constructor:{writable:!0,value:c}}),v.prototype=Object.create(r.prototype,{length:{get:function(){return this._evaluators.length}},add:{value:function(...t){this.autoClear&&this.clear();var n=t.length;if(0<n){var a,l,i,o;for(l=0;l<n;l++)if(o=t[l],o instanceof r)this._evaluators.push(o);else if(o instanceof Array)for(a=o.length,i=0;i<a;i++)o[i]instanceof r&&this._evaluators.push(o[i])}}},clear:{value:function(){this._evaluators=[]}},eval:{value:function(e){return this._evaluators.forEach((t)=>{t instanceof r&&(e=t.eval(e))}),e}},remove:{value:function(e){if(e instanceof r){var t=this._evaluators.indexOf(e);if(-1<t)return this._evaluators.splice(t,1),!0}return!1}}}),v.prototype.constructor=v,v.prototype.toString=function(){return'[MultiEvaluator]'},p.prototype=Object.create(Object.prototype,{constructor:{writable:!0,value:p},handleEvent:{writable:!0,value:function(){}},toString:{writable:!0,value:function(){return'['+this.constructor.name+']'}}}),f.prototype=Object.create(Object.prototype,{constructor:{writable:!0,value:f},addEventListener:{writable:!0,value:function(e=!1,t=0){}},dispatchEvent:{writable:!0,value:function(){}},hasEventListener:{writable:!0,value:function(){}},removeEventListener:{writable:!0,value:function(e=!1){}},willTrigger:{writable:!0,value:function(){}}}),g.prototype=Object.create(Object.prototype,{constructor:{writable:!0,value:g},receive:{writable:!0,value:function(){}},toString:{writable:!0,value:function(){return'['+this.constructor.name+']'}}}),_.prototype=Object.create(Object.prototype,{constructor:{writable:!0,value:_},length:{get:function(){return 0}},connect:{writable:!0,value:function(e=0,t=!1){}},connected:{writable:!0,value:function(){}},disconnect:{writable:!0,value:function(){}},emit:{writable:!0,value:function(){}},hasReceiver:{writable:!0,value:function(){}}}),E.prototype=Object.create(Object.prototype,{constructor:{writable:!0,value:E},isLocked:{writable:!0,value:function(){return this.__lock__}},lock:{writable:!0,value:function(){this.__lock__=!0}},unlock:{writable:!0,value:function(){this.__lock__=!1}},toString:{writable:!0,value:function(){return'['+this.constructor.name+']'}}});var ye=Object.defineProperties({},{ARGUMENTS:{value:'args',enumerable:!0},CALLBACK:{value:'callback',enumerable:!0},CONFIG:{value:'config',enumerable:!0},DEPENDS_ON:{value:'dependsOn',enumerable:!0},DESTROY_METHOD_NAME:{value:'destroy',enumerable:!0},EVALUATORS:{value:'evaluators',enumerable:!0},FACTORY:{value:'factory',enumerable:!0},GENERATES:{value:'generates',enumerable:!0},ID:{value:'id',enumerable:!0},IDENTIFY:{value:'identify',enumerable:!0},INIT_METHOD_NAME:{value:'init',enumerable:!0},LAZY_INIT:{value:'lazyInit',enumerable:!0},LAZY_TYPE:{value:'lazyType',enumerable:!0},LISTENERS:{value:'listeners',enumerable:!0},LOCALE:{value:'locale',enumerable:!0},LOCK:{value:'lock',enumerable:!0},NAME:{value:'name',enumerable:!0},PROPERTIES:{value:'properties',enumerable:!0},RECEIVERS:{value:'receivers',enumerable:!0},REFERENCE:{value:'ref',enumerable:!0},SCOPE:{value:'scope',enumerable:!0},SINGLETON:{value:'singleton',enumerable:!0},TYPE:{value:'type',enumerable:!0},VALUE:{value:'value',enumerable:!0}});y.prototype=Object.create(Object.prototype,{constructor:{value:y},policy:{get:function(){return this._policy},set:function(e){switch(e){case ye.CALLBACK:case ye.REFERENCE:case ye.CONFIG:case ye.LOCALE:{this._policy=e;break}default:this._policy=ye.VALUE;}}},toString:{value:function(){return'[ObjectArgument]'}}}),I.prototype=Object.create(Error.prototype),I.prototype.constructor=I,N.prototype=Object.create(Object.prototype),N.prototype.constructor=N,N.prototype.toString=function(){return'[SignalEntry]'},S.prototype=Object.create(_.prototype,{constructor:{value:S,writable:!0},length:{get:function(){return this.receivers.length}},connect:{value:function(e,t=0,r=!1){if(null===e)return!1;if(r=!0===r,t=0<t?t-t%1:0,'function'==typeof e||e instanceof Function||e instanceof g||'receive'in e){if(this.hasReceiver(e))return!1;this.receivers.push(new N(e,t,r));let n,i,o=this.receivers,a=function(e,t){var r=o[e];return o[e]=o[t],o[t]=r,!0},u=!1,s=o.length;for(n=1;n<s;n++){for(i=0;i<s-n;i++)o[i+1].priority>o[i].priority&&(u=a(i,i+1));if(!u)break}return!0}return!1}},connected:{value:function(){return 0<this.receivers.length}},disconnect:{value:function(e=null){if(null===e)return!!(0<this.receivers.length)&&(this.receivers=[],!0);if(0<this.receivers.length)for(var t=this.receivers.length;-1<--t;)if(this.receivers[t].receiver===e)return this.receivers.splice(t,1),!0;return!1}},emit:{value:function(...t){let n=this.receivers.length;if(0===n)return;let l,i,e=[],r=this.receivers.slice();var a;for(l=0;l<n;l++)i=r[l],i.auto&&e.push(i);if(0<e.length)for(n=e.length;-1<--n;)l=this.receivers.indexOf(e[n]),-1<l&&this.receivers.splice(l,1);for(n=r.length,l=0;l<n;l++)a=r[l].receiver,a instanceof Function||'function'==typeof receiver?a.apply(this.proxy||this,t):(a instanceof g||'receive'in a&&a.receive instanceof Function)&&a.receive.apply(this.proxy||a,t)}},hasReceiver:{value:function(e){if(null===e)return!1;if(0<this.receivers.length)for(let t=this.receivers.length;-1<--t;)if(this.receivers[t].receiver===e)return!0;return!1}},toArray:{value:function(){let e=[],t=this.receivers.length;if(0<t)for(let r=0;r<t;r++)e.push(this.receivers[r].receiver);return e}},toString:{value:function(){return'[Signal]'}}}),C.prototype=Object.create(Object.prototype),C.prototype.constructor=C,C.prototype.equals=function(e){return!(e!==this)||!!(e instanceof C)&&e.toString()===this.toString()&&e.valueOf()===this.valueOf()},C.prototype.toString=function(){return this._name},C.prototype.valueOf=function(){return this._value},P.prototype=Object.create(C.prototype),P.prototype.constructor=P,Object.defineProperties(P,{ALL:{value:new P(1,'ALL'),enumerable:!0},CRITICAL:{value:new P(16,'CRITICAL'),enumerable:!0},DEBUG:{value:new P(2,'DEBUG'),enumerable:!0},DEFAULT_LEVEL_STRING:{value:'UNKNOWN',enumerable:!0},ERROR:{value:new P(8,'ERROR'),enumerable:!0},INFO:{value:new P(4,'INFO'),enumerable:!0},NONE:{value:new P(0,'NONE'),enumerable:!0},WARNING:{value:new P(6,'WARNING'),enumerable:!0},WTF:{value:new P(32,'WTF'),enumerable:!0},get:{value:function(e){let t=[P.ALL,P.CRITICAL,P.DEBUG,P.ERROR,P.INFO,P.NONE,P.WARNING,P.WTF],r=t.length;for(;-1<--r;)if(t[r]._value===e)return t[r];return null}},getLevelString:{value:function(e){return P.validate(e)?e.toString():P.DEFAULT_LEVEL_STRING}},validate:{value:function(e){let t=[P.ALL,P.CRITICAL,P.DEBUG,P.ERROR,P.INFO,P.NONE,P.WARNING,P.WTF];return-1<t.indexOf(e)}}}),F.prototype=Object.create(Object.prototype),F.prototype.constructor=F,D.prototype=Object.create(S.prototype,{constructor:{writable:!0,value:D},channel:{get:function(){return this._entry.channel}},critical:{value:function(e,...t){this._log(P.CRITICAL,e,t)}},debug:{value:function(e,...t){this._log(P.DEBUG,e,t)}},error:{value:function(e,...t){this._log(P.ERROR,e,t)}},info:{value:function(e,...t){this._log(P.INFO,e,t)}},log:{value:function(e,...t){this._log(P.ALL,e,t)}},warning:{value:function(e,...t){this._log(P.WARNING,e,t)}},wtf:{value:function(e,...t){this._log(P.WTF,e,t)}},toString:{value:function(){return'[Logger]'}},_log:{value:function(e,t,r){if(this.connected()){if(('string'==typeof t||t instanceof String)&&r instanceof Array)for(var n=r.length,a=0;a<n;a++)t=(t+'').replace(new RegExp('\\{'+a+'\\}','g'),r[a]);this._entry.message=t,this._entry.level=e,this.emit(this._entry)}}}}),M.prototype=Object.create(Error.prototype),M.prototype.constructor=M;var he=Object.defineProperties({},{CHARS_INVALID:{value:'The following characters are not valid: []~$^&/(){}<>+=_-`!@#%?,:;\'\\',enumerable:!0},CHAR_PLACEMENT:{value:'\'*\' must be the right most character.',enumerable:!0},EMPTY_FILTER:{value:'filter must not be null or empty.',enumerable:!0},ERROR_FILTER:{value:'Error for filter \'{0}\'.',enumerable:!0},DEFAULT_CHANNEL:{value:'',enumerable:!0},ILLEGALCHARACTERS:{value:'[]~$^&/\\(){}<>+=`!#%?,:;\'"@',enumerable:!0},INVALID_CHARS:{value:'Channels can not contain any of the following characters : []~$^&/\\(){}<>+=`!#%?,:;\'"@',enumerable:!0},INVALID_LENGTH:{value:'Channels must be at least one character in length.',enumerable:!0},INVALID_TARGET:{value:'Log, Invalid target specified.',enumerable:!0}});j.prototype=Object.create(g.prototype,{constructor:{value:j,writable:!0},factory:{get:function(){return this._factory},set:function(e){this._factory&&this._factory.removeTarget(this),this._factory=e instanceof x?e:me,this._factory.addTarget(this)}},filters:{get:function(){return[].concat(this._filters)},set:function(e){let t=[];if(e&&e instanceof Array&&0<e.length){let n,a=e.length;for(var r=0;r<a;r++)n=e[r],-1===t.indexOf(n)&&(this._checkFilter(n),t.push(n))}else t.push('*');0<this._count&&this._factory.removeTarget(this),this._filters=t,0<this._count&&this._factory.addTarget(this)}},level:{get:function(){return this._level},set:function(e){this._factory.removeTarget(this),this._level=e||P.ALL,this._factory.addTarget(this)}},addFilter:{value:function(e){this._checkFilter(e);let t=this._filters.indexOf(e);return!(-1!==t)&&(this._filters.push(e),!0)}},addLogger:{value:function(e){e&&e instanceof D&&(this._count++,e.connect(this))}},logEntry:{value:function(){}},receive:{value:function(e){if(e instanceof F){if(this._level===P.NONE)return;e.level.valueOf()>=this._level.valueOf()&&this.logEntry(e)}}},removeFilter:{value:function(e){if(e&&('string'==typeof e||e instanceof String)&&''!==e){let t=this._filters.indexOf(e);if(-1<t)return this._filters.splice(t,1),!0}return!1}},removeLogger:{value:function(e){e instanceof D&&(this._count--,e.disconnect(this))}},_checkFilter:{value:function(e){if(null===e)throw new M(he.EMPTY_FILTER);if(this._factory.hasIllegalCharacters(e))throw new M(k(he.ERROR_FILTER,e)+he.CHARS_INVALID);var t=e.indexOf('*');if(0<=t&&t!==e.length-1)throw new M(k(he.ERROR_FILTER,e)+he.CHAR_PLACEMENT)}},toString:{value:function(){return'[LoggerTarget]'}}}),x.prototype=Object.create(g.prototype,{constructor:{value:x},addTarget:{value:function(e){if(e&&e instanceof j){for(let t,r,n=e.filters,a=this._loggers.iterator();a.hasNext();)r=a.next(),t=a.key(),this._channelMatchInFilterList(t,n)&&e.addLogger(r);this._targets.push(e),(this._targetLevel===P.NONE||e.level.valueOf()<this._targetLevel.valueOf())&&(this._targetLevel=e.level)}else throw new Error(he.INVALID_TARGET)}},flush:{value:function(){this._loggers.clear(),this._targets=[],this._targetLevel=P.NONE}},getLogger:{value:function(e){this._checkChannel(e);let t=this._loggers.get(e);t||(t=new D(e),this._loggers.set(e,t));let r,n=this._targets.length;for(var a=0;a<n;a++)r=this._targets[a],this._channelMatchInFilterList(e,r.filters)&&r.addLogger(t);return t}},hasIllegalCharacters:{value:function(e){return-1!==T(e,he.ILLEGALCHARACTERS.split(''))}},isAll:{value:function(){return this._targetLevel===P.ALL}},isCritical:{value:function(){return this._targetLevel===P.CRITICAL}},isDebug:{value:function(){return this._targetLevel===P.DEBUG}},isError:{value:function(){return this._targetLevel===P.ERROR}},isInfo:{value:function(){return this._targetLevel===P.INFO}},isWarning:{value:function(){return this._targetLevel===P.WARNING}},isWtf:{value:function(){return this._targetLevel===P.WTF}},removeTarget:{value:function(e){if(e&&e instanceof j){for(var t,r=e.filters,n=this._loggers.iterator();n.hasNext();){t=n.next();var a=n.key();this._channelMatchInFilterList(a,r)&&e.removeLogger(t)}for(var l=this._targets.length,o=0;o<l;o++)e===this._targets[o]&&(this._targets.splice(o,1),o--);this._resetTargetLevel()}else throw new Error(he.INVALID_TARGET)}},toString:{value:function(){return'[LoggerFactory]'}},_channelMatchInFilterList:{value:function(e,t){let r,n=-1,a=t.length;for(var l=0;l<a;l++){if(r=t[l],n=r.indexOf('*'),0===n)return!0;if(n=0>n?n=e.length:n-1,e.substring(0,n)===r.substring(0,n))return!0}return!1}},_checkChannel:{value:function(e){if(null===e||0===e.length)throw new I(he.INVALID_LENGTH);if(this.hasIllegalCharacters(e)||-1!==e.indexOf('*'))throw new I(he.INVALID_CHARS)}},_resetTargetLevel:{value:function(){let e,t=P.NONE,r=this._targets.length;for(let n=0;n<r;n++)e=this._targets[n],(t===P.NONE||e.level.valueOf()<t.valueOf())&&(t=e.level);this._targetLevel=t}}});var me=new x,we=me.getLogger('system.ioc.logger'),Oe=Object.defineProperties({},{AFTER:{value:'after',enumerable:!0},BEFORE:{value:'before',enumerable:!0},NONE:{value:'none',enumerable:!0},NOW:{value:'now',enumerable:!0}});Y.prototype=Object.create(Object.prototype,{constructor:{value:Y},order:{get:function(){return this._order},set:function(e){this._order=e===Oe.BEFORE?Oe.BEFORE:Oe.AFTER}},toString:{value:function(){return'[ObjectListener]'}}}),Object.defineProperties(Y,{DISPATCHER:{value:'dispatcher',enumerable:!0},METHOD:{value:'method',enumerable:!0},ORDER:{value:'order',enumerable:!0},PRIORITY:{value:'priority',enumerable:!0},USE_CAPTURE:{value:'useCapture',enumerable:!0},TYPE:{value:'type',enumerable:!0}}),U.prototype=Object.create(Object.prototype,{constructor:{writable:!0,value:U},toString:{writable:!0,value:function(){return'['+this.constructor.name+']'}}}),V.prototype=Object.create(U.prototype,{constructor:{writable:!0,value:V},policy:{get:function(){return this._policy},set:function(e){switch(e){case ye.ARGUMENTS:case ye.CALLBACK:case ye.CONFIG:case ye.LOCALE:case ye.REFERENCE:{this._policy=e;break}default:this._policy=ye.VALUE;}}}}),H.prototype=Object.create(Object.prototype,{constructor:{value:H},toString:{value:function(){return'[ObjectReceiver]'}}}),Object.defineProperties(H,{AUTO_DISCONNECT:{value:'autoDisconnect',enumerable:!0},ORDER:{value:'order',enumerable:!0},PRIORITY:{value:'priority',enumerable:!0},SIGNAL:{value:'signal',enumerable:!0},SLOT:{value:'slot',enumerable:!0}});var Ae=Object.defineProperties({},{FACTORY_METHOD:{value:'factoryMethod',enumerable:!0},FACTORY_PROPERTY:{value:'factoryProperty',enumerable:!0},FACTORY_REFERENCE:{value:'factoryReference',enumerable:!0},FACTORY_VALUE:{value:'factoryValue',enumerable:!0},STATIC_FACTORY_METHOD:{value:'staticFactoryMethod',enumerable:!0},STATIC_FACTORY_PROPERTY:{value:'staticFactoryProperty',enumerable:!0}});z.prototype=Object.create(U.prototype,{constructor:{writable:!0,value:z}}),W.prototype=Object.create(z.prototype,{constructor:{writable:!0,value:W}}),Object.defineProperties(W,{build:{value:function(e){return null===e?null:ye.FACTORY in e&&ye.NAME in e?new W(e[ye.FACTORY]||null,e[ye.NAME]||null,h(e[ye.ARGUMENTS]||null)):null}}}),X.prototype=Object.create(V.prototype,{constructor:{writable:!0,value:X}}),Object.defineProperties(X,{build:{value:function(e){return null===e?null:ye.FACTORY in e&&ye.NAME in e?new X(e[ye.FACTORY]||null,e[ye.NAME]||null,e[ye.EVALUATORS]||null):null}}}),Z.prototype=Object.create(U.prototype,{constructor:{value:Z}}),$.prototype=Object.create(z.prototype,{constructor:{value:$,writable:!0}}),Object.defineProperties($,{build:{value:function(e){if(null===e)return null;if(ye.TYPE in e&&ye.NAME in e){let t=new $(e[ye.TYPE]||null,e[ye.NAME]||null,h(e[ye.ARGUMENTS]||null));return t}return null}}}),q.prototype=Object.create(V.prototype,{constructor:{value:q,writable:!0}}),Object.defineProperties(q,{build:{value:function(e){return null===e?null:ye.TYPE in e&&ye.NAME in e?new q(e[ye.NAME]||null,e[ye.TYPE]||null,e[ye.EVALUATORS]||null):null}}}),J.prototype=Object.create(U.prototype,{constructor:{writable:!0,value:J}});var Re=Object.defineProperties({},{PROTOTYPE:{value:'prototype',enumerable:!0},SINGLETON:{value:'singleton',enumerable:!0},SCOPES:{value:['prototype','singleton']},validate:{value:function(e){return-1<Re.SCOPES.indexOf(e)}}});ee.prototype=Object.create(c.prototype,{constructor:{writable:!0,value:c},afterListeners:{get:function(){return this._afterListeners}},afterReceivers:{get:function(){return this._afterReceivers}},beforeListeners:{get:function(){return this._beforeListeners}},beforeReceivers:{get:function(){return this._beforeReceivers}},dependsOn:{get:function(){return this._dependsOn},set:function(e){this._dependsOn=e instanceof Array&&0<e.length?e.filter(this._filterStrings):null}},generates:{get:function(){return this._generates},set:function(e){this._generates=e instanceof Array&&0<e.length?e.filter(this._filterStrings):null}},lazyInit:{get:function(){return this._lazyInit},set:function(e){this._lazyInit=(e instanceof Boolean||'boolean'==typeof e)&&e}},lazyType:{get:function(){return this._lazyType},set:function(e){this._lazyType=!0===e}},listeners:{set:function(e){if(this._afterListeners=[],this._beforeListeners=[],null!==e&&e instanceof Array){let t=e.length;if(0<t)for(let n,r=0;r<t;r++)n=e[r],n instanceof Y&&(n.order===Oe.AFTER?this._afterListeners.push(n):this._beforeListeners.push(n))}}},receivers:{set:function(e){if(this._afterReceivers=[],this._beforeReceivers=[],null!==e&&e instanceof Array){let r=e.length;if(0<r)for(var t=0;t<r;t++){let n=e[t];n instanceof H&&(n.order===Oe.AFTER?this._afterReceivers.push(n):this._beforeReceivers.push(n))}}}},singleton:{get:function(){return this._singleton}},scope:{get:function(){return this._scope},set:function(e){this._scope=Re.validate(e)?e:Re.PROTOTYPE,this._singleton=!(this._scope!==Re.SINGLETON)}},strategy:{get:function(){return this._strategy},set:function(e){this._strategy=e instanceof U?e:null}},toString:{value:function(){return'[ObjectDefinition]'}},_filterStrings:{value:function(e){return('string'==typeof e||e instanceof String)&&0<e.length}}});var Le=Object.defineProperties({},{CONFIG:{value:'#config',enumerable:!0},INIT:{value:'#init',enumerable:!0},LOCALE:{value:'#locale',enumerable:!0},PARAMS:{value:'#params',enumerable:!0},ROOT:{value:'#root',enumerable:!0},STAGE:{value:'#stage',enumerable:!0},THIS:{value:'#this',enumerable:!0}});re.prototype=Object.create(Object.prototype),re.prototype.constructor=re,re.prototype.format=function(){},Object.defineProperties(ne,{MAX_RECURSION:{value:200,enumerable:!0}}),ne.prototype=Object.create(re.prototype,{constructor:{value:ne},beginSeparator:{get:function(){return this._beginSeparator},set:function(e){this._beginSeparator=e||'{',this._reset()}},endSeparator:{get:function(){return this._endSeparator},set:function(e){this._endSeparator=e||'}',this._reset()}},length:{get:function(){return this.expressions.length}},clear:{value:function(){this.expressions.clear()}},format:{value:function(e){return this._format(e+'',0)}},set:{value:function(e,t){return''!==e&&(e instanceof String||'string'==typeof e)&&''!==t&&(t instanceof String||'string'==typeof t)&&(this.expressions.set(e,t),!0)}},toString:{value:function(){return'[ExpressionFormatter]'}},_reset:{value:function(){this._reg=new RegExp(k(this._pattern,this.beginSeparator,this.endSeparator),'g')}},_format:{value:function(e,t=0){if(t>=ne.MAX_RECURSION)return e;let r=e.match(this._reg);if(null===r)return e;let n=r.length;if(0<n){let a,l;for(let o=0;o<n;o++)l=r[o].substr(1),l=l.substr(0,l.length-1),this.expressions.has(l)&&(a=this._format(this.expressions.get(l),t+1),this.expressions.set(l,a),e=e.replace(r[o],a)||a)}return e}}}),ae.prototype=Object.create(r.prototype),ae.prototype.constructor=ae,ae.prototype.eval=function(e){if(null!==e&&('string'==typeof e||e instanceof String)&&null!==this.target){var t=e+'';if(0<t.length){for(var r=this.target,n=t.split(this.separator),a=n.length,l=0;l<a;l++)if(n[l]in r)r=r[n[l]];else{if(this.throwError)throw new EvalError(this+' eval failed with the expression : '+e);return this.undefineable}return r}}return this.undefineable},ae.prototype.toString=function(){return'[PropertyEvaluator]'},le.prototype=Object.create(ae.prototype,{constructor:{value:le}}),ie.prototype=Object.create(ae.prototype,{constructor:{value:ie}}),oe.prototype=Object.create(r.prototype,{constructor:{value:oe},eval:{value:function(e){if(this.factory instanceof ge&&(e instanceof String||'string'==typeof e)){var t=e+'';if(0<t.length){var r;try{r=this.factory.config.root}catch(t){}switch(t){case Le.CONFIG:return this.factory.config.config;case Le.LOCALE:return this.factory.config.locale;case Le.PARAMS:return this.factory.config.parameters;case Le.THIS:return this.factory;case Le.ROOT:return r;case Le.STAGE:{var n=this.factory.config.stage;return null===n?r&&'stage'in r&&null!==r.stage?r.stage:this.undefineable:n}default:{let e=t.split(this.separator);if(0<e.length){let t=e.shift(),r=this.factory.getObject(t);return r&&0<e.length&&(this._propEvaluator.target=r,r=this._propEvaluator.eval(e.join('.')),this._propEvaluator.target=null),r}}}}}return this.undefineable}}});var Te=Te||null;if(!Te)try{Te=window}catch(t){}if(!Te)try{Te=document}catch(t){}Te||(Te={});var Ie=Object.defineProperties({},{ALIAS:{value:'alias',enumerable:!0},ALL:{value:'all',enumerable:!0},EXPRESSION:{value:'expression',enumerable:!0},NONE:{value:'none',enumerable:!0}});se.prototype=Object.create(r.prototype,{constructor:{value:se},eval:{value:function(e){if(e instanceof Function)return e;if(e instanceof String||'string'==typeof e){var t=e+'',r=this.config;if(r&&r instanceof de){var n=r.typePolicy;if(n!==Ie.NONE){if(n===Ie.ALL||n===Ie.ALIAS){var a=r.typeAliases;a instanceof s&&a.has(t)&&(t=a.get(t))}(n===Ie.ALL||n===Ie.EXPRESSION)&&r.typeExpression instanceof ne&&(t=r.typeExpression.format(t))}}try{var l=ue(t,r.domain);if(l instanceof Function)return l}catch(t){if(this.throwError)throw new EvalError(this+' eval failed : '+t.toString())}}return null}}}),Object.defineProperties(de,{TYPE_ALIAS:{value:'alias',enumerable:!0}}),de.prototype=Object.create(Object.prototype,{constructor:{value:de},config:{get:function(){return this._config},set:function(e){for(let t in e)this._config[t]=e[t]}},configEvaluator:{get:function(){return this._configEvaluator}},locale:{get:function(){return this._locale},set:function(e){for(let t in e)this._locale[t]=e[t]}},localeEvaluator:{get:function(){return this._localeEvaluator}},referenceEvaluator:{get:function(){return this._referenceEvaluator}},throwError:{get:function(){return this._configEvaluator.throwError&&this._localeEvaluator.throwError&&this._typeEvaluator.throwError&&this._referenceEvaluator.throwError},set:function(e){this._configEvaluator.throwError=e,this._localeEvaluator.throwError=e,this._referenceEvaluator.throwError=e,this._typeEvaluator.throwError=e}},typeAliases:{get:function(){return this._typeAliases},set:function(e){if(e instanceof s)for(let t=e.iterator();t.hasNext();){let e=t.next(),r=t.key();this._typeAliases.set(r,e)}else if(e instanceof Array){let t=e.length;if(0<t)for(;-1<--t;){let r=e[t];null!==r&&de.TYPE_ALIAS in r&&ye.TYPE in r&&this._typeAliases.set(r[de.TYPE_ALIAS]+'',r[ye.TYPE]+'')}}}},typeEvaluator:{get:function(){return this._typeEvaluator}},typeExpression:{get:function(){return this._typeExpression},set:function(e){if(e instanceof ne)this._typeExpression=e;else if(e instanceof Array){null===this._typeExpression&&(this._typeExpression=new ne);let t=e.length;if(0<t)for(;-1<--t;){let r=e[t];null!==r&&ye.NAME in r&&ye.VALUE in r&&this._typeExpression.set(r[ye.NAME]+'',r[ye.VALUE]+'')}}else this._typeExpression=new ne}},typePolicy:{get:function(){return this._typePolicy},set:function(e){switch(e){case Ie.ALIAS:case Ie.EXPRESSION:case Ie.ALL:{this._typePolicy=e;break}default:this._typePolicy=Ie.NONE;}}},initialize:{value:function(e){if(null!==e)for(let t in e)t in this&&(this[t]=e[t])}},setConfigTarget:{value:function(e=null){this._config=e||{}}},setLocaleTarget:{value:function(e=null){this._locale=e||{}}},toString:{value:function(){return'[ObjectConfig]'}}}),ce.prototype=Object.create(Object.prototype,{constructor:{writable:!0,value:ce},run:{writable:!0,value:function(){}},toString:{writable:!0,value:function(){return'['+this.constructor.name+']'}}});var Ne=Object.defineProperties({},{ERROR:{value:'error',enumerable:!0},DELAYED:{value:'delayed',enumerable:!0},FINISHED:{value:'finished',enumerable:!0},INACTIVE:{value:'inactive',enumerable:!0},RUNNING:{value:'running',enumerable:!0},STOPPED:{value:'stopped',enumerable:!0},TIMEOUT:{value:'timeout',enumerable:!0}});ve.prototype=Object.create(ce.prototype,{constructor:{writable:!0,value:ve},phase:{get:function(){return this._phase}},running:{get:function(){return this._running}},clone:{writable:!0,value:function(){return new ve}},isLocked:{writable:!0,value:function(){return this.__lock__}},lock:{writable:!0,value:function(){this.__lock__=!0}},notifyFinished:{writable:!0,value:function(){this._running=!1,this._phase=Ne.FINISHED,this.finishIt.emit(this),this._phase=Ne.INACTIVE}},notifyStarted:{writable:!0,value:function(){this._running=!0,this._phase=Ne.RUNNING,this.startIt.emit(this)}},unlock:{writable:!0,value:function(){this.__lock__=!1}}}),pe.prototype=Object.create(ve.prototype,{constructor:{writable:!0,value:pe},clone:{writable:!0,value:function(){return new pe}},notifyChanged:{writable:!0,value:function(){this.__lock__||this.changeIt.emit(this)}},notifyCleared:{writable:!0,value:function(){this.__lock__||this.clearIt.emit(this)}},notifyError:{writable:!0,value:function(e=null){if(this._running=!1,this._phase=Ne.ERROR,this.__lock__||this.errorIt.emit(this,e),this.throwError)throw new Error(e)}},notifyInfo:{writable:!0,value:function(e){this.__lock__||this.infoIt.emit(this,e)}},notifyLooped:{writable:!0,value:function(){this._phase=Ne.RUNNING,this.__lock__||this.loopIt.emit(this)}},notifyPaused:{writable:!0,value:function(){this._running=!1,this._phase=Ne.STOPPED,this.__lock__||this.pauseIt.emit(this)}},notifyProgress:{writable:!0,value:function(){this.__lock__||this.progressIt.emit(this)}},notifyResumed:{writable:!0,value:function(){this._phase=Ne.RUNNING,this.__lock__||this.resumeIt.emit(this)}},notifyStopped:{writable:!0,value:function(){this._running=!1,this._phase=Ne.STOPPED,this.__lock__||this.stopIt.emit(this)}},notifyTimeout:{writable:!0,value:function(){this._running=!1,this._phase=Ne.TIMEOUT,this.__lock__||this.timeoutIt.emit(this)}},resume:{writable:!0,value:function(){}},reset:{writable:!0,value:function(){}},start:{writable:!0,value:function(){this.run()}},stop:{writable:!0,value:function(){}}}),fe.prototype=Object.create(pe.prototype,{constructor:{configurable:!0,writable:!0,value:fe},numObjectDefinition:{get:function(){return this._map.length}},addObjectDefinition:{value:function(e){if(e instanceof ee)this._map.set(e.id,e);else throw new ReferenceError(this+' addObjectDefinition failed, the specified object definition must be an ObjectDefinition object.')}},clearObjectDefinition:{value:function(){this._map.clear()}},clone:{value:function(){return new fe}},getObjectDefinition:{value:function(e){if(this._map.has(e))return this._map.get(e);throw new ReferenceError(this+' getObjectDefinition failed, the specified object definition don\'t exist : '+e)}},hasObjectDefinition:{value:function(e){return this._map.has(e)}},removeObjectDefinition:{value:function(e){if(this._map.has(e))this._map.delete(e);else throw new ReferenceError(this+' removeObjectDefinition failed, the specified object definition don\'t exist : '+e)}}}),ge.prototype=Object.create(fe.prototype,{constructor:{value:ge},config:{get:function(){return this._config},set:function(e){this._config&&(this._config.referenceEvaluator.factory=null),this._config=e instanceof de?e:new de,this._config.referenceEvaluator.factory=this}},singletons:{get:function(){return this._singletons}},clone:{value:function(){return new ge(this.config,[].concat(this.objects))}},hasSingleton:{value:function(e){return this._singletons.has(e)}},getObject:{value:function(e){if(!(e instanceof String||'string'==typeof e))return null;let r=null;try{let n;try{n=this.getObjectDefinition(e)}catch(t){}if(!(n instanceof ee))throw new Error('the definition is not register in the factory');if(n.singleton&&(r=this._singletons.get(e)||null),!r)if(!(n.type instanceof Function)&&(n.type instanceof String||'string'==typeof n.type)&&(n.type=this.config.typeEvaluator.eval(n.type)),n.type instanceof Function){if(n.strategy)r=this.createObjectWithStrategy(n.strategy);else try{r=t(n.type,this.createArguments(n.constructorArguments,n.id))}catch(t){throw new Error('can\'t create the instance with the specified definition type '+n.type+'. The arguments limit exceeded, you can pass a maximum of 32 arguments')}if(r){if(!n.lazyType){let e=!1;if(r instanceof n.type?e=!0:n.type===String?e=r instanceof String||'string'==typeof r:n.type===Number?e=r instanceof Number||'number'==typeof r:n.type===Boolean&&(e=r instanceof Boolean||'boolean'==typeof r),!e)throw r=null,new Error('the new object is not an instance of the ['+n.type.name+'] constructor')}n.singleton&&this._singletons.set(e,r),this.dependsOn(n),this.populateIdentifiable(r,n);let t=b(r)&&(!0===n.lock||!0===this.config.lock&&!1!==n.lock);t&&r.lock(),n.beforeListeners instanceof Array&&0<n.beforeListeners.length&&this.registerListeners(r,n.beforeListeners),n.beforeReceivers instanceof Array&&0<n.beforeReceivers.length&&this.registerReceivers(r,n.beforeReceivers),this.populateProperties(r,n),n.afterListeners instanceof Array&&0<n.afterListeners.length&&this.registerListeners(r,n.afterListeners),n.afterReceivers instanceof Array&&0<n.afterReceivers.length&&this.registerReceivers(r,n.afterReceivers),t&&r.unlock(),this.invokeInitMethod(r,n),this.generates(n)}}else throw new Error('the definition.type property is not a valid constructor')}catch(t){this.warn(this+' getObject(\''+e+'\') failed, '+t.message+'.')}return r||null}},isDirty:{value:function(){return this.bufferSingletons&&this.bufferSingletons instanceof Array&&0<this.bufferSingletons.length}},isLazyInit:{value:function(e){return!!this.hasObjectDefinition(e)&&this.getObjectDefinition(e).lazyInit}},isSingleton:{value:function(e){return!!this.hasObjectDefinition(e)&&this.getObjectDefinition(e).singleton}},removeSingleton:{value:function(e){this.isSingleton(e)&&this._singletons.has(e)&&(this.invokeDestroyMethod(e),this._singletons.delete(e))}},run:{value:function(...e){if(!this.running){if(this.notifyStarted(),0<e.length&&e[0]instanceof Array&&(this.objects=e[0]),null===this.bufferSingletons&&(this.bufferSingletons=[]),this.objects instanceof Array&&0<this.objects.length)for(;0<this.objects.length;){let e=this.objects.shift();if(null!==e){let t=te(e);this.addObjectDefinition(t),t.singleton&&!t.lazyInit&&this.hasObjectDefinition(t.id)&&this.bufferSingletons.push(t.id+'')}else this.warn(this+' create new object definition failed with a \'null\' or \'undefined\' object.')}if(this.bufferSingletons instanceof Array&&0<this.bufferSingletons.length&&!this._config.lazyInit&&!this.isLocked()){let e=this.bufferSingletons.length;for(let t=0;t<e;t++)this.getObject(this.bufferSingletons[t]);this.bufferSingletons=null}this.notifyFinished()}}},warn:{value:function(...e){this.config.useLogger&&we.warning.apply(we,e)}},createArguments:{value:function(e=null,t=null){if(null===e||!(e instanceof Array)||0===e.length)return null;let r=[],n=e.length;for(let a,l=0;l<n;l++)if(a=e[l],a instanceof y){let e=a.value;try{let n=null;if(a.policy===ye.CALLBACK){let r=e;(e instanceof String||'string'==typeof e)&&(r=this._config.referenceEvaluator.eval(e)),r instanceof Function?(a.scope&&(a.args instanceof Array?r=e.bind.apply(a.scope,[a.scope].concat(this.createArguments(a.args,t))):r=e.bind(a.scope)),e=r):(n=ye.CALLBACK,e=null)}a.policy===ye.REFERENCE?(e=this._config.referenceEvaluator.eval(e),null===e&&(n=ye.FACTORY)):a.policy===ye.CONFIG?(e=this._config.configEvaluator.eval(e),null===e&&(n=ye.LOCALE)):a.policy===ye.LOCALE&&(e=this._config.localeEvaluator.eval(e),null===e&&(n=ye.LOCALE)),null!==n&&this.warn(this+' createArguments failed at the index \''+l+'\' and return a \'null\' '+n+' reference, see the object definition with the id : '+t),null!==a.evaluators&&0<a.evaluators.length&&(e=this.eval(e,a.evaluators)),r.push(e)}catch(e){this.warn(this+' createArguments failed in the object definition with the id : '+t+', '+e.toString())}}return r}},createObjectWithStrategy:{value:function(e,t=null){if(!(e instanceof U))return null;let r,n,a=e.name,l=null;return e instanceof z?e instanceof $?(r=e.type,(r instanceof String||'string'==typeof r)&&(r=this.config.typeEvaluator.eval(r)),r&&a&&a in r&&r[a]instanceof Function&&(l=r[a].apply(r,this.createArguments(e.args,t)))):e instanceof W&&(n=this.getObject(e.factory),n&&a&&a in n&&n[a]instanceof Function&&(l=n[a].apply(n,this.createArguments(e.args,t)))):e instanceof V?e instanceof q?(r=e.type,(r instanceof String||'string'==typeof r)&&(r=this.config.typeEvaluator.eval(r)),r&&a&&a in r&&(l=r[a])):e instanceof X&&(n=this.getObject(e.factory),n&&a&&a in n&&(l=n[a])):e instanceof J?l=e.value:e instanceof Z&&(l=this._config.referenceEvaluator.eval(e.ref)),l}},dependsOn:{value:function(e){if(e instanceof ee&&e.dependsOn instanceof Array&&0<e.dependsOn.length){let t,r=e.dependsOn.length;for(let n=0;n<r;n++)t=e.dependsOn[n],this.hasObjectDefinition(t)&&this.getObject(t)}}},eval:{value:function(e,t=null){if(!(t instanceof Array)||0===t.length)return e;this._evaluator.clear();let n,l=t.length,u=[];for(let a=0;a<l;a++)(n=t[a],null!==n)&&((n instanceof String||'string'==typeof n)&&(n=this.getObject(n)),n instanceof r&&u.push(n));return 0<u.length&&(this._evaluator.add(u),e=this._evaluator.eval(e),this._evaluator.clear()),e}},generates:{value:function(e){if(e instanceof ee&&e.generates instanceof Array){let t=e.generates,r=t.length;if(0<r)for(let e,n=0;n<r;n++)e=t[n],this.hasObjectDefinition(e)&&this.getObject(e)}}},invokeDestroyMethod:{value:function(e){if(this.hasObjectDefinition(e)&&this._singletons.has(e)){let t=this.getObjectDefinition(e),r=this._singletons.get(e),n=t.destroyMethodName||null;null===n&&null!==this.config&&(n=this.config.defaultDestroyMethod),n&&n in r&&r[n]instanceof Function&&r[n].call(r)}}},invokeInitMethod:{value:function(e,t=null){if(t&&t instanceof ee){let r=t.initMethodName||null;null===r&&this.config&&(r=this.config.defaultInitMethod||null),r&&r in e&&e[r]instanceof Function&&e[r].call(e)}}},populateIdentifiable:{value:function(e,t=null){t&&t instanceof ee&&t.singleton&&d(e)&&(!0===t.identify||!0===this.config.identify&&!1!==t.identify)&&(e.id=t.id)}},populateProperties:{value:function(e,t=null){if(t&&t instanceof ee){let r=t.properties;if(r&&r instanceof Array&&0<r.length){let n=t.id,a=r.length;for(let t=0;t<a;t++)this.populateProperty(e,r[t],n)}}}},populateProperty:{value:function(e,t,r){if(null===e)return void this.warn(this+' populate a new property failed, the object not must be \'null\' or \'undefined\', see the factory with the object definition \''+r+'\'.');let n=t.name,a=t.value;if(n===Le.INIT){if(t.policy===ye.REFERENCE&&(a instanceof String||'string'==typeof a)?a=this._config.referenceEvaluator.eval(a):t.policy===ye.CONFIG?a=this.config.configEvaluator.eval(a):t.policy===ye.LOCALE&&(a=this.config.localeEvaluator.eval(a)),t.evaluators&&0<t.evaluators.length&&(a=this.eval(a,t.evaluators)),a)for(var l in a)l in e?e[l]=a[l]:this.warn(this+' populateProperty failed with the magic #init name, the '+l+' attribute is not declared on the object with the object definition \''+r+'\'.');else this.warn(this+' populate a new property failed with the magic #init name, the object to enumerate not must be null, see the factory with the object definition \''+r+'\'.');return}if(!(n in e))return void this.warn(this+' populate a new property failed with the '+n+' attribute, this property is not registered in the object, see the object definition \''+r+'\'.');try{if(t.policy===ye.CALLBACK)(a instanceof String||'string'==typeof a)&&(a=this._config.referenceEvaluator.eval(a),null===a&&this.warn(this+' populateProperty with the name \''+n+'\' return a null callback reference, see the object definition with the id : '+r)),a instanceof Function?(t.scope&&(t.args instanceof Array?a=a.bind.apply(t.scope,[t.scope].concat(this.createArguments(t.args,r))):a=a.bind(t.scope)),a=a):a=null;else if(t.policy===ye.REFERENCE)a=this._config.referenceEvaluator.eval(a),null===a&&this.warn(this+' populateProperty with the name \''+n+'\' return a \'null\' factory reference, see the object definition with the id : '+r);else if(t.policy===ye.CONFIG)a=this.config.configEvaluator.eval(a),null===a&&this.warn(this+' populateProperty with the name \''+n+'\' return a \'null\' config reference, see the object definition with the id : '+r);else if(t.policy===ye.LOCALE)a=this.config.localeEvaluator.eval(a),null===a&&this.warn(this+' populateProperty with the name \''+n+'\' return a null locale reference, see the object definition with the id : '+r);else if(e[n]instanceof Function)return t.policy===ye.ARGUMENTS?void e[n].apply(e,this.createArguments(a,r)):void e[n]();t.evaluators&&0<t.evaluators.length&&(a=this.eval(a,t.evaluators)),e[n]=a}catch(t){this.warn(this+' populateProperty failed with the name \''+n+', see the object definition \''+r+'\', error: '+t.toString())}}},registerListeners:{value:function(t,e){if(null!==t&&null!==e&&e instanceof Array){let r=e.length;if(0<r)for(let n=0;n<r;n++)try{let r=e[n],a=this._config.referenceEvaluator.eval(r.dispatcher);if(a&&null!==r.type){let e;a instanceof f?(r.method&&r.method in t&&t[r.method]instanceof Function?e=t[r.method].bind(t):t instanceof p&&(e=t),a.addEventListener(r.type,e,r.useCapture,r.priority)):'addEventListener'in a&&a.addEventListener instanceof Function&&(r.method&&r.method in t&&t[r.method]instanceof Function?e=t[r.method].bind(t):t instanceof p&&(e=t.handleEvent.bind(t)),a.addEventListener(r.type,e,r.useCapture))}}catch(r){this.warn(this+' registerListeners failed with the target \''+t+'\' , in the collection of this listeners at {'+n+'} : '+r.toString())}}}},registerReceivers:{value:function(t,e=null){if(e instanceof Array&&0!==e.length){let r=e.length;for(let n=0;n<r;n++)try{let r=e[n],a=this._config.referenceEvaluator.eval(r.signal),l=null;a instanceof _&&((r.slot instanceof String||'string'==typeof r.slot)&&r.slot in t&&t[r.slot]instanceof Function?l=t[r.slot]:t instanceof g&&(l=t),(l instanceof g||l instanceof Function)&&a.connect(l,r.priority,r.autoDisconnect))}catch(r){this.warn(this+' registerReceivers failed with the target \''+t+'\' , in the collection of this receivers at {'+n+'} : '+r.toString())}}}}});var Se=new ge;Se.config.setConfigTarget({origin:{x:10,y:20},nirvana:{x:0,y:0}}),Se.config.setLocaleTarget({messages:{test:'test'}}),_e.prototype=Object.create(j.prototype,{constructor:{value:_e,writable:!0},internalLog:{value:function(){}},toString:{writable:!0,value:function(){return'['+this.constructor.name+']'}},logEntry:{value:function(e){var t=this.formatMessage(e.message,P.getLevelString(e.level),e.channel,new Date);this.internalLog(t,e.level)}},resetLineNumber:{value:function(){this._lineNumber=1}},formatDate:{value:function(e){var t='';return t+=this.getDigit(e.getDate()),t+='/'+this.getDigit(e.getMonth()+1),t+='/'+e.getFullYear(),t}},formatLevel:{value:function(e){return'['+e+']'}},formatLines:{value:function(){return'['+this._lineNumber++ +']'}},formatMessage:{value:function(e,t,r,n){var a='';return this.includeLines&&(a+=this.formatLines()+this.separator),(this.includeDate||this.includeTime)&&(n=n||new Date,this.includeDate&&(a+=this.formatDate(n)+this.separator),this.includeTime&&(a+=this.formatTime(n)+this.separator)),this.includeLevel&&(a+=this.formatLevel(t||'')+this.separator),this.includeChannel&&(a+=(r||'')+this.separator),a+=e,a}},formatTime:{value:function(e){var t='';return t+=this.getDigit(e.getHours()),t+=':'+this.getDigit(e.getMinutes()),t+=':'+this.getDigit(e.getSeconds()),this.includeMilliseconds&&(t+=':'+this.getDigit(e.getMilliseconds())),t}},getDigit:{value:function(e){return isNaN(e)?'00':(10>e?'0':'')+e}}}),be.prototype=Object.create(_e.prototype,{constructor:{value:be},internalLog:{value:function(e,t){if(console)switch(t){case P.CRITICAL:{console.trace(e);break}case P.DEBUG:{console.debug?console.debug(e):console.trace&&console.trace(e);break}case P.ERROR:{console.error(e);break}case P.INFO:{console.info(e);break}case P.WARNING:{console.warn(e);break}default:case P.ALL:{console.log(e);break}}else throw new new ReferenceError('The console reference is unsupported.')}}});var Ce=me.getLogger('channel'),Pe=new be({includeChannel:!0,includeDate:!1,includeLevel:!0,includeLines:!0,includeMilliseconds:!0,includeTime:!0});Pe.filters=['*'],Pe.level=P.ALL;var Fe=function(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:0,t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0;this.x=e,this.y=t};Fe.prototype.destroy=function(){Ce.info(this+' destroy')},Fe.prototype.init=function(){Ce.info(this+' init')},Fe.prototype.test=function(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:'';Ce.info(this+' test message: '+e)},Fe.prototype.toString=function(){return'[Point x:'+this.x+' y:'+this.y+']'};var De=function(){Ce.debug(this+' constructor invoked')};De.prototype=Object.create(g.prototype,{constructor:{value:De},receive:{value:function(e){Ce.info('slot receive '+(e||'an unknow message...'))}},toString:{value:function(){return'[Slot]'}}});var ke=[{id:'signal',type:S,dependsOn:['slot'],singleton:!0,lazyInit:!0},{id:'slot',type:De,singleton:!0,lazyInit:!0,receivers:[{signal:'signal'}]},{id:'position',type:Fe,args:[{value:2},{ref:'origin.y'}],sigleton:!0,lazyInit:!0,init:'init',properties:[{name:'x',ref:'origin.x'},{name:'y',value:100},{name:'#init',config:'nirvana'}]},{id:'origin',type:Fe,singleton:!0,lazyInit:!0,args:[{config:'origin.x'},{value:20}],properties:[{name:'test',args:[{locale:'messages.test'}]}]}];e.main=function(){Ce.info('VEGAS JS SKELETON ----- START'),Se.run(ke);var e=Se.getObject('position');Ce.info(e);var t=Se.getObject('signal');t?t.emit('hello world'):Ce.warning('The slot reference not must be null or undefined.')},Object.defineProperty(e,'__esModule',{value:!0})});
